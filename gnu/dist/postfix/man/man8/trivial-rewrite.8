.TH TRIVIAL-REWRITE 8 
.ad
.fi
.SH NAME
trivial-rewrite
\-
Postfix address rewriting and resolving daemon
.SH SYNOPSIS
.na
.nf
\fBtrivial-rewrite\fR [generic Postfix daemon options]
.SH DESCRIPTION
.ad
.fi
The \fBtrivial-rewrite\fR daemon processes two types of client
service requests:
.IP \fBrewrite\fR
Rewrite an address to standard form. The \fBtrivial-rewrite\fR
daemon by default appends local domain information to unqualified
addresses, swaps bang paths to domain form, and strips source
routing information. This process is under control of several
configuration parameters (see below).
.IP \fBresolve\fR
Resolve an address to a (\fItransport\fR, \fInexthop\fR,
\fIrecipient\fR) triple. The meaning of the results is as follows:
.RS
.IP \fItransport\fR
The delivery agent to use. This is the first field of an entry
in the \fBmaster.cf\fR file.
.IP \fInexthop\fR
The host to send to. For local delivery this is an empty string.
.IP \fIrecipient\fR
The envelope recipient address that is passed on to \fInexthop\fR.
.PP
The \fBtrivial-rewrite\fR daemon by default only distinguishes
between local and non-local mail. For finer control over mail
routing, use the optional \fBtransport\fR(5) lookup table.
.RE
.PP
This program expects to be run from the \fBmaster\fR(8) process
manager.
.SH STANDARDS
.na
.nf
.ad
.fi
None. The command does not interact with the outside world.
.SH SECURITY
.na
.nf
.ad
.fi
The \fBtrivial-rewrite\fR daemon is not security sensitive.
By default, this daemon does not talk to remote or local users.
It can run at a fixed low privilege in a chrooted environment.
.SH DIAGNOSTICS
.ad
.fi
Problems and transactions are logged to \fBsyslogd\fR(8).
.SH BUGS
.ad
.fi
.SH CONFIGURATION PARAMETERS
.na
.nf
.ad
.fi
The following \fBmain.cf\fR parameters are especially relevant to
this program. See the Postfix \fBmain.cf\fR file for syntax details
and for default values. Use the \fBpostfix reload\fR command after
a configuration change.
.SH Miscellaneous
.ad
.fi
.IP \fBinet_interfaces\fR
The network interfaces that this mail system receives mail on.
This information is used to determine if
\fIuser\fR@[\fInet.work.addr.ess\fR] is local or remote.
.IP \fBmydestination\fR
List of domains that this machine considers local.
.IP \fBmyorigin\fR
The domain that locally-posted mail appears to come from.
.IP \fBresolve_unquoted_address\fR
When resolving an address, do not quote the address localpart as
per RFC 822, so that additional \fB@\fR, \fB%\fR or \fB!\fR
characters remain visible. This is technically incorrect, but
allows us to stop relay attacks when forwarding mail to a Sendmail
primary MX host.
.SH Rewriting
.ad
.fi
.IP \fBallow_percent_hack\fR
Rewrite \fIuser\fR%\fIdomain\fR to \fIuser\fR@\fIdomain\fR.
.IP \fBappend_at_myorigin\fR
Rewrite \fIuser\fR to \fIuser\fR@$\fBmyorigin\fR.
.IP \fBappend_dot_mydomain\fR
Rewrite \fIuser\fR@\fIhost\fR to \fIuser\fR@\fIhost\fR.$\fBmydomain\fR.
.IP \fBswap_bangpath\fR
Rewrite \fIsite\fR!\fIuser\fR to \fIuser\fR@\fIsite\fR.
.SH Routing
.ad
.fi
.IP \fBlocal_transport\fR
Where to deliver mail for destinations that match $\fBmydestination\fR
or $\fBinet_interfaces\fR.
The default transport is \fBlocal\fR.
.sp
Syntax is \fItransport\fR:\fInexthop\fR; see \fBtransport\fR(5)
for details. The :\fInexthop\fR part is optional.
.IP \fBdefault_transport\fR
Where to deliver non-local mail when no information is explicitly
given in the \fBtransport\fR(5) table.
The default transport is \fBsmtp\fR.
.sp
Syntax is \fItransport\fR:\fInexthop\fR; see \fBtransport\fR(5)
for details. The :\fInexthop\fR part is optional.
.IP \fBparent_domain_matches_subdomains\fR
List of Postfix features that use \fIdomain.tld\fR patterns
to match \fIsub.domain.tld\fR (as opposed to
requiring \fI.domain.tld\fR patterns).
.IP \fBrelayhost\fR
The default host to send non-local mail to when no entry is matched
in the \fBtransport\fR(5) table.
.sp
When no \fBrelayhost\fR is specified, mail is routed directly
to the destination's mail exchanger.
.IP \fBtransport_maps\fR
List of tables with \fIdomain\fR to (\fItransport, nexthop\fR)
mappings.
.SH SEE ALSO
.na
.nf
master(8) process manager
syslogd(8) system logging
transport(5) transport table format
.SH LICENSE
.na
.nf
.ad
.fi
The Secure Mailer license must be distributed with this software.
.SH AUTHOR(S)
.na
.nf
Wietse Venema
IBM T.J. Watson Research
P.O. Box 704
Yorktown Heights, NY 10598, USA
