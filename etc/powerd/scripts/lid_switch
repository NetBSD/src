#!/bin/sh -
#
#	$NetBSD: lid_switch,v 1.7 2010/09/19 21:47:28 abs Exp $
#
# Generic script for lid switch events.  We try to put the system to sleep.
#
# Arguments passed by powerd(8):
#
#	device event

case "${2}" in
pressed)
	#if /etc/rc.d/apmd onestatus >/dev/null ; then
	#	/usr/sbin/apm -S
	#else
	#	/usr/sbin/apm -d -S
	#fi
	wsconsctl -d backlight >/tmp/backlight
	wsconsctl -d -w backlight=0 >/dev/null
	exit 0
	;;
released)
	if [ -f "/tmp/backlight" ]; then
		wsconsctl -d -w `cat /tmp/backlight`	
	fi
	exit 0
	;;
*)
	logger -p warning "${0}: unsupported event ${2} on device ${1}" >&1
	exit 1
esac
