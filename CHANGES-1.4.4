#	$NetBSD: CHANGES-1.4.4,v 1.1.2.21 2002/06/26 22:16:33 he Exp $

A complete list of changes from NetBSD 1.4.3 to NetBSD 1.4.4:

File						Revision(s)
----						--------

sys/conf/osrelease.sh				patch
sys/sys/param.h					patch
share/tmac/doc-common				patch

  Bump visible version number to 1.4.3A, to indicate that we're
  no longer exactly at 1.4.3.

dist/bind/README				patch
dist/bind/bind2netbsd				patch
dist/bind/bin/named/ns_config.c			patch
dist/bind/bin/named/ns_ctl.c			patch
dist/bind/bin/named/ns_defs.h			patch
dist/bind/bin/named/ns_forw.c			patch
dist/bind/bin/named/ns_func.h			patch
dist/bind/bin/named/ns_main.c			patch
dist/bind/bin/named/ns_notify.c			patch
dist/bind/bin/named/ns_req.c			patch
dist/bind/bin/named/ns_resp.c			patch
dist/bind/include/arpa/nameser.h		patch
dist/bind/lib/irs/irs_data.c			patch
dist/bind/lib/nameser/ns_name.c			patch
dist/bind/lib/resolv/res_debug.c		patch
dist/bind/man/dnskeygen.1			patch
dist/bind/man/named.8				patch
usr.sbin/bind/Makefile				patch
usr.sbin/bind/named/Makefile			patch
usr.sbin/bind/nslookup/Makefile			patch
dist/bind/LICENSE_RSA				patch (new)
dist/bind/bin/named/ns_parser.h			delete

  Upgrade to BIND version 8.2.2-P7.

sys/netinet/ip_fil.c				patch

  Fix problem causing only first ipnat rule to be loaded.
  Fixes PR#11569.

distrib/sets/lists/etc/mi			1.71

  Add /etc/skel files.

sys/dev/scsipi/atapiconf.c			1.31

  Add a quirk entry for Hitachi CDR-7730.  Fixes PR#11654.

sys/arch/mac68k/nubus/nubus.h			1.52

  Add the DrHw Apple 24AC "Boogie" video card.

sys/arch/mac68k/nubus/grf_nubus.c		1.60

  Clear interrupts on the Apple "Boogie" card.

libexec/ftpd/ftpd.c				patch

  Fix a one-byte buffer overrun.

sys/arch/i386/i386/sys_machdep.c		1.55

  Validate gate targets correctly.

sys/arch/sun3/sun3x/pmap.c			1.55

  Properly handle pmap->pm_refcount (initialize and lock before
  access).  Should fix long-standing "out of space in kmem_map"
  bug on sun3x.

gnu/usr.bin/ld/ld/ld.c				1.73
gnu/usr.bin/ld/ld/ld_i.h			1.2
gnu/usr.bin/ld/ld/lib.c				1.23

  The options --whole-archive and --no-whole-archive should be
  position-dependent.  Make them actually behave that way.

usr.sbin/chown/chown.c				1.25 via patch

  Correct display of invalid username error and cache duplicate
  password lookup.  Fixes PR#11695.

share/examples/supfiles/sup.de.netbsd.org	delete
share/examples/supfiles/Makefile		1.7 via patch

  This service no longer exists.

sys/arch/x68k/dev/rtclock.c			1.6

  Correct ``Year 2001 problem''.

dist/bind/LICENSE				1.2
dist/bind/README				1.3
dist/bind/bin/dig/dig.c				1.3
dist/bind/bin/dnskeygen/dnskeygen.c		1.2
dist/bind/bin/dnsquery/dnsquery.c		1.2
dist/bind/bin/host/host.c			1.4
dist/bind/bin/irpd/irpd.c			1.2
dist/bind/bin/mkservdb/mkservdb.c		1.2
dist/bind/bin/named-bootconf/named-bootconf.sh	1.2
dist/bind/bin/named-xfer/named-xfer.c		1.3
dist/bind/bin/named/db_defs.h			1.2
dist/bind/bin/named/db_dump.c			1.3
dist/bind/bin/named/db_func.h			1.2
dist/bind/bin/named/db_glob.h			1.2
dist/bind/bin/named/db_glue.c			1.3
dist/bind/bin/named/db_ixfr.c			1.2
dist/bind/bin/named/db_load.c			1.3
dist/bind/bin/named/db_lookup.c			1.2
dist/bind/bin/named/db_save.c			1.2
dist/bind/bin/named/db_sec.c			1.2
dist/bind/bin/named/db_tsig.c			1.2
dist/bind/bin/named/db_update.c			1.3
dist/bind/bin/named/named.conf			1.3
dist/bind/bin/named/named.h			1.2
dist/bind/bin/named/ns_config.c			1.4
dist/bind/bin/named/ns_ctl.c			1.4
dist/bind/bin/named/ns_defs.h			1.3
dist/bind/bin/named/ns_forw.c			1.4
dist/bind/bin/named/ns_func.h			1.5
dist/bind/bin/named/ns_glob.h			1.3
dist/bind/bin/named/ns_glue.c			1.3
dist/bind/bin/named/ns_init.c			1.2
dist/bind/bin/named/ns_ixfr.c			1.3
dist/bind/bin/named/ns_lexer.c			1.3
dist/bind/bin/named/ns_lexer.h			1.3
dist/bind/bin/named/ns_main.c			1.8 via patch
dist/bind/bin/named/ns_maint.c			1.3
dist/bind/bin/named/ns_ncache.c			1.2
dist/bind/bin/named/ns_notify.c			1.3
dist/bind/bin/named/ns_parser.y			1.3
dist/bind/bin/named/ns_parseutil.c		1.2
dist/bind/bin/named/ns_parseutil.h		1.2
dist/bind/bin/named/ns_req.c			1.3 via patch
dist/bind/bin/named/ns_resp.c			1.4
dist/bind/bin/named/ns_signal.c			1.2
dist/bind/bin/named/ns_sort.c			1.3
dist/bind/bin/named/ns_stats.c			1.3
dist/bind/bin/named/ns_udp.c			1.2
dist/bind/bin/named/ns_update.c			1.3
dist/bind/bin/named/ns_xfr.c			1.2
dist/bind/bin/named/pathtemplate.h		1.2
dist/bind/bin/ndc/ndc.c				1.3
dist/bind/bin/nslookup/commands.l		1.2
dist/bind/bin/nslookup/debug.c			1.3
dist/bind/bin/nslookup/getinfo.c		1.3
dist/bind/bin/nslookup/list.c			1.2
dist/bind/bin/nslookup/main.c			1.2
dist/bind/bin/nslookup/nslookup.help		1.3
dist/bind/bin/nslookup/pathnames.h		1.2
dist/bind/bin/nslookup/res.h			1.2
dist/bind/bin/nslookup/send.c			1.3
dist/bind/bin/nslookup/subr.c			1.2
dist/bind/bin/nsupdate/nsupdate.c		1.2
dist/bind/bind2netbsd				1.15 via patch
dist/bind/include/arpa/nameser.h		1.3
dist/bind/include/irs.h				1.2
dist/bind/include/isc/assertions.h		1.2
dist/bind/include/isc/list.h			1.2
dist/bind/include/isc/logging.h			1.3
dist/bind/include/isc/misc.h			1.2
dist/bind/include/port_after.h			1.2-1.3
dist/bind/include/port_before.h			1.4
dist/bind/include/resolv.h			1.5
dist/bind/lib/dst/bsafe_link.c			1.2
dist/bind/lib/dst/cylink_link.c			1.2
dist/bind/lib/dst/dst_api.c			1.3
dist/bind/lib/dst/eay_dss_link.c		1.2
dist/bind/lib/dst/hmac_link.c			1.2
dist/bind/lib/dst/md5.h				1.1-1.3 (new)
dist/bind/lib/dst/md5_dgst.c			1.1-1.3 (new)
dist/bind/lib/dst/md5_locl.h			1.1-1.3 (new)
dist/bind/lib/dst/prandom.c			1.2
dist/bind/lib/dst/rsaref_link.c			1.2
dist/bind/lib/dst/support.c			1.2
dist/bind/lib/inet/inet_cidr_pton.c		1.2
dist/bind/lib/inet/inet_net_ntop.c		1.2
dist/bind/lib/inet/inet_ntop.c			1.2
dist/bind/lib/irs/dns.c				1.2
dist/bind/lib/irs/dns_ho.c			1.2
dist/bind/lib/irs/dns_sv.c			1.2
dist/bind/lib/irs/gen_gr.c			1.2
dist/bind/lib/irs/gethostent.c			1.2
dist/bind/lib/irs/gethostent_r.c		1.2
dist/bind/lib/irs/getnameinfo.c			1.2
dist/bind/lib/irs/getnetent.c			1.2
dist/bind/lib/irs/getpwent.c			1.2
dist/bind/lib/irs/hesiod.c			1.2
dist/bind/lib/irs/irp.c				1.2
dist/bind/lib/irs/irpmarshall.c			1.2
dist/bind/lib/irs/irs_data.c			1.4
dist/bind/lib/irs/lcl.c				1.2
dist/bind/lib/irs/nis.c				1.2
dist/bind/lib/irs/util.c			1.2
dist/bind/lib/isc/ctl_clnt.c			1.3
dist/bind/lib/isc/ctl_p.c			1.2
dist/bind/lib/isc/ctl_srvr.c			1.3
dist/bind/lib/isc/ev_connects.c			1.2
dist/bind/lib/isc/ev_timers.c			1.3
dist/bind/lib/isc/ev_waits.c			1.3
dist/bind/lib/isc/eventlib.c			1.3
dist/bind/lib/isc/eventlib_p.h			1.3
dist/bind/lib/isc/logging.c			1.2
dist/bind/lib/isc/logging_p.h			1.2
dist/bind/lib/isc/movefile.c			1.1 (new)
dist/bind/lib/nameser/ns_name.c			1.3
dist/bind/lib/nameser/ns_parse.c		1.2
dist/bind/lib/nameser/ns_print.c		1.2
dist/bind/lib/nameser/ns_sign.c			1.2
dist/bind/lib/nameser/ns_verify.c		1.2
dist/bind/lib/resolv/res_data.c			1.5
dist/bind/lib/resolv/res_debug.c		1.3
dist/bind/lib/resolv/res_debug.h		1.2
dist/bind/lib/resolv/res_findzonecut.c		1.3
dist/bind/lib/resolv/res_init.c			1.2
dist/bind/lib/resolv/res_mkupdate.c		1.2
dist/bind/lib/resolv/res_query.c		1.2
dist/bind/lib/resolv/res_send.c			1.3
dist/bind/lib/resolv/res_sendsigned.c		1.2
dist/bind/lib/resolv/res_update.c		1.3
dist/bind/man/host.1				1.4
dist/bind/man/named.8				1.5
dist/bind/man/named.conf.5			1.3
dist/bind/man/nsupdate.8			1.3
usr.sbin/bind/Makefile				1.9 via patch
usr.sbin/bind/lib/Makefile			1.11 via patch

  Upgrade to BIND version 8.2.3.

share/examples/supfiles/sup.no.netbsd.org	delete
share/examples/supfiles/Makefile		1.6 via patch

  This service (sup.no.netbsd.org) is being phased out.

usr.sbin/ypserv/ypinit/Makefile.yp		1.14

  Handle multi-line netgroup entries correctly.

lib/libc/net/ethers.c				patch

  Correct error in pull-up to 1.4.3 which prevents rarpd
  from working.

usr.sbin/arp/arp.c				1.29 via patch

  Add interface names to ``arp -a'' output.

usr.bin/vi/vi/vs_refresh.c			1.6

  Pull in a patch from nvi 1.79 for when the repainting code messes
  up.  Fixes those annoying ``Error: move: l(4294967295) c(0) o(0)''
  core dumps.

libexec/ld.aout_so/malloc.c			1.6-1.7
libexec/ld.aout_so/rtld.c			1.75,1.78-1.80
libexec/ld.aout_so/shlib.c			1.17 via patch
libexec/ld.aout_so/arch/arm32/md.h		1.4
libexec/ld.aout_so/arch/i386/md.h		1.13
libexec/ld.aout_so/arch/m68k/md.h		1.9
libexec/ld.aout_so/arch/ns32k/md.h		1.8
libexec/ld.aout_so/arch/powerpc/md.h		1.3
libexec/ld.aout_so/arch/sparc/md.h		1.17
libexec/ld.aout_so/arch/vax/md.h		1.11

  Several changes to consolidate with main trunk:
   o Deal correctly with common symbols in shared libraries.
     Fixes PR#10940.
   o Use MAP_PRIVATE instead of MAP_COPY.
   o Deal correctly with an empty hints file.
   o Use <link_aout.h> for the benefit of cross compiling.
   o Remove RELOC_SYMBOLICS_THROUGH_JMPSLOT as it's always true.
   o A few minor fixes.

share/man/man7/mdoc.7				1.21

  Remove reference to nonexistent file.  Fixes PR#10992.

include/glob.h					1.12-1.13
lib/libc/gen/__glob13.c				1.11-1.21
libexec/ftpd/conf.c				1.39
libexec/ftpd/popen.c				1.24
libexec/ftpd/ftpd.c				1.122

  Fixes buffer overflow problems in glob(3).  Adds and uses GLOB_LIMIT
  to prevent denial of service attacks.

usr.sbin/xntp/xntpd/ntp_control.c		patch

  Fix a DoS attack (and possibly, but not confirmed, a root exploit)
  in ntpd.

sys/netinet/ip_frag.c				1.23 via patch
sys/netinet/ip_frag.h				1.16
sys/netinet/ip_nat.c				1.39
sys/netinet/ip_nat.h				1.23 via patch
sys/netinet/ip_state.c				1.30 via patch

  Fix bug related to fragment cache handling.

usr.sbin/xntp/xntpd/ntp_control.c		patch

  Avoid underrun, and fix the fact that the previous fix was one byte
  too restrictive.

usr.sbin/pkg_install/lib/ftpio.c		1.30

  Do not exit on EINTR, which happens on window size change.

share/examples/supfiles/ftp.cs.umn.edu		delete
share/examples/supfiles/sup2.fr.netbsd.org	1.1 (new)
share/examples/supfiles/Makefile		1.8

  Remove ftp.cs.umn.edu sup mirror, add sup2.fr.netbsd.org.

sys/arch/i386/i386/svr4_machdep.c		1.51

  Make sure the machine state restored by setmcontext() is identical
  to that of sigreturn().

sys/netinet/ip_input.c				1.131,1.133 via patch
sys/netinet/in.h				1.53 via patch
usr.sbin/sysctl/sysctl.8			patch
lib/libc/gen/sysctl.3				1.75 via patch

  Introduce net.inet.ip.maxfragpackets, which controls the maximum
  number of IPv4 fragment reassembly queue entries.  Defends against
  certain DoS attacks.  Fixes SA#2001-006.

sys/kern/exec_script.c				patch
sys/kern/kern_exec.c				patch

  In check_exec(), don't bother checking P_TRACED along with
  MNT_NOSUID, just check MNT_NOSUID to clear the S{U,G}ID bits
  in the attributes for the vnode we're about to exec.

  We now check P_TRACED right before we would actually perform
  the s{u,g}id function in the exec code.

  This closes a race condition between exec of a setuid binary
  and ptrace(2).

sys/kern/uipc_syscalls.c			patch

  fix overflow in sendmsg()

sys/arch/i386/i386/sys_machdep.c		1.58 via patch

  Copy in segment descriptors all at once rather than one at a time.

sys/kern/uipc_syscalls.c			patch

  Add required include files to make this compile again.

sys/arch/i386/i386/vm86.c			1.24

  Rework how user-mode instructions and stack fetches are done.
  Also fix another vm86 protocol bug.

sbin/route/route.c				1.46

  Fix problem where an output message would be stuck in stdio buffers
  until the next one arrived.

bin/sh/expand.c					1.52

  Do not truncate expr > 10 digits.  Fixes PR#13943.

sys/uvm/uvm_map.c				1.76 via patch

  Let uvm_map_extract() set the lower bound on the kernel address
  range itself, instead of having its callers do that.  Fixes
  PR#11972.

gnu/libexec/uucp/uuxqt/uuxqt.c			1.4

  Pay more attention to command line parsing of long options.
  Plugs security hole.  Fixes SA#2001-019.

lib/libc/stdlib/random.c			1.20 via patch

  Make this work on LP64 platforms.  Fixes krb5-enabled logins on
  Alpha.

lib/libc/stdlib/random.3			1.13

  Note alignment requirement of the state array passed to initstate(3).
  This was formerly only documented in the comments in the code.

sys/kern/kern_exec.c				1.149-1.150 via patch
sys/kern/sys_process.c				1.72
sys/sys/proc.h					1.136 via patch
lib/libc/sys/ptrace.2				1.16
sys/miscfs/procfs/procfs_ctl.c			1.22
sys/miscfs/procfs/procfs_mem.c			1.30
sys/miscfs/procfs/procfs_regs.c			1.15
sys/miscfs/procfs/procfs_vnops.c		1.88 via patch

  Fix a ptrace/execve race condition which could be used to modify
  the child process' image during execve.  This would be a security
  issue due to setuid programs.

gnu/usr.bin/gzip/gzip.c				1.9

  Fix long file name buffer overrun vulnerability.

sys/arch/i386/i386/sys_machdep.c		patch

  Correct error in previous pull-up, to make this compile again.

lib/libwrap/tcpd.h				1.9,1.11 via patch

   Include required files, and wrap declarations in __BEGIN_DECLS/
   __END_DECLS.

lib/libc/net/gethnamaddr.c			1.45-1.46 via patch
lib/libc/net/getnetnamadr.c			1.22

  Fix remote buffer overrun on hostbuf[].  Also fix up logic of
  buffer handling.  

distrib/notes/common/main			1.167 via patch

  Note that agc is not a member of core anymore.
