<html><head><title>
Miscellaneous Options
</title></head><body><h3>
Miscellaneous Options
</h3><hr>

<dl>

<dt><tt>broadcastdelay <I>seconds</I></tt></dt>
<dd>The broadcast and multicast modes require a special calibration to
determine the network delay between the local and remote servers.
Ordinarily, this is done automatically by the initial protocol exchanges
between the client and server. In some cases, the calibration
procedure may fail due to network or server access controls, for
example. This command specifies the default delay to be used under these
circumstances. Typically (for Ethernet), a number between 0.003 and
0.007 seconds is appropriate. The default when this command is not used
is 0.004 seconds.</dd>

<dt><tt>driftfile <i>driftfile</i></tt>
<dd>This command specifies the name of the file used to record the
frequency offset of the local clock oscillator. If the file exists, it
is read at startup in order to set the initial frequency offset and then
updated once per hour with the current frequency offset computed by the
daemon. If the file does not exist or this command is not given, the
initial frequency offset is assumed zero. In this case, it may take some
hours for the frequency to stabilize and the residual timing errors to
subside.</dd>

<p><dd>The file format consists of a single line containing a single
floating point number, which records the frequency offset measured in
parts-per-million (PPM). The file is updated by first writing the
current drift value into a temporary file and then renaming this file to
replace the old version. This implies that <tt>ntpd</tt> must have write
permission for the directory the drift file is located in, and that file
system links, symbolic or otherwise, should be avoided.</dd>

<dt><tt>enable [auth | bclient | kernel | monitor | ntp | stats]</tt>
<br><tt>disable [auth | bclient | kernel | monitor | ntp | stats</tt>
<dd>Provides a way to enable or disable various server options. Flags
not mentioned are unaffected. Note that all of these flags can be
controlled remotely using the <a href="ntpdc.htm"><tt>ntpdc</tt></a>
utility program.</dd>

<dd><dl>

<dt><tt>auth</tt></dt>
<dd>Enables the server to synchronize with unconfigured peers only if
the peer has been correctly authenticated using a trusted key and key
identifier. The default for this flag is <tt>enable</tt>.</dd>

<dt><tt>bclient</tt></dt>
<dd>When enabled, this is identical to the <tt>broadcastclient</tt>
command. The default for this flag is <tt>disable</tt>.</dd>

<dt><tt>kernel</tt></dt>
<dd>Enables the precision-time kernel support for the
<tt>ntp_adjtime()</tt> system call, if implemented. Ordinarily, support
for this routine is detected automatically when the NTP daemon is
compiled, so it is not necessary for the user to worry about this flag.
It flag is provided primarily so that this support can be disabled
during kernel development. The default for this flag is
<tt>enable</tt>.</dd>

<dt><tt>monitor</tt></dt>
<dd>Enables the monitoring facility. See the <tt>ntpdc</tt> program and
the <tt>monlist</tt> command or further information. The default for
this flag is <tt>enable</tt>.</dd>

<dt><tt>ntp</tt></dt>
<dd>Enables the server to adjust its local clock by means of NTP. If
disabled, the local clock free-runs at its intrinsic time and frequency
offset. This flag is useful in case the local clock is controlled by
some other device or protocol and NTP is used only to provide
synchronization to other clients. In this case, the local clock driver
can be used to provide this function and also certain time variables for
error estimates and leap-indicators. See the <a
href="refclock.htm">Reference Clock Drivers </a>page for further
information. The default for this flag is <tt>enable</tt>.</dd>

<dt><tt>stats</tt></dt>
<dd>Enables the statistics facility. See the <a
href="monopt.htm">Monitoring Options </a>page for further information.
The default for this flag is <tt>enable</tt>.</dd>

</dl>

<dt><tt>logconfig <I>configkeyword</I></tt></dt>
<dd>This command controls the amount and type of output written to the
system <tt>syslog</tt> facility or the alternate <tt>logfile</tt> log
file. By default, all output is turned on. All
<I><tt>configkeyword</tt></I> keywords can be prefixed with <tt>=</tt>,
<tt>+</tt> and <tt>-</tt>, where <tt>=</tt> sets the
<tt>syslogmask</tt>, <tt>+</tt> adds and <tt>-</tt> removes messages.
<tt>syslog messages</tt> can be controlled in four classes (,
<tt>peer</tt>, <tt>sys</tt> and <tt>sync</tt>). Within these classes
four types of messages can be controlled.</dd>

<dd>Informational messages (<tt>info</tt>) control configuration
information. Event messages (<tt>events</tt>) control logging of events
(reachability, synchronization, alarm conditions). Statistical output is
controlled with the <tt>statistics</tt> keyword. The final message group
is the status messages. This describes mainly the synchronizations
status. Configuration keywords are formed by concatenating the message
class with the event class. The <tt>allprefix</tt> can be used instead
of a message class. A message class may also be followed by the
<tt>all</tt> keyword to enable/disable all messages of the respective
message class.</dd>

<dd>Thus, a minimal log configuration could look like this:</dd>

<p><dd><tt>logconfig = syncstatus +sysevents</tt></dd>

<p><dd>This would just list the synchronizations state of <tt>ntpd</tt>
and the major system events. For a simple reference server, the
following minimum message configuration could be useful:</dd>

<p><dd><tt>logconfig = syncall +clockall</tt></dd>

<p><dd>This configuration will list all clock information and
synchronization information. All other events and messages about peers,
system events and so on is suppressed.</dd>

<dt><tt>logfile <I>logfile</I></tt></dt>
<dd>This command specifies the location of an alternate log file to be
used instead of the default system <tt>syslog</tt> facility.</dd>

<dt><tt>setvar <I>variable</I> [default]</tt></dt>
<dd>This command adds an additional system variable. These variables can
be used to distribute additional information such as the access policy.
If the variable of the form <tt><I>name</I> = <I>value</I></tt> is
followed by the <tt>default</tt> keyword, the variable will be listed as
part of the default system variables (<tt>ntpq rv</tt> command). These
additional variables serve informational purposes only. They are not
related to the protocol other that they can be listed. The known
protocol variables will always override any variables defined via the
<tt>setvar</tt> mechanism. There are three special variables that
contain the names of all variable of the same group. The
<tt>sys_var_list</tt> holds the names of all system variables. The
<tt>peer_var_list</tt> holds the names of all peer variables and the
<tt>clock_var_list</tt> holds the names of the reference clock
variables.</dd>

<dt><tt>trap <I>host_address</I> [port <I>port_number</I>] [interface
<I>interface_address</I>]</tt></dt>
<dd>This command configures a trap receiver at the given host address
and port number for sending messages with the specified local interface
address. If the port number is unspecified. a value of 18447 is used. If
the interface address is not specified, the message is sent with a
source address of the local interface the message is sent through. Note
that on a multihomed host the interface used may vary from time to time
with routing changes.</dd>

<dd>The trap receiver will generally log event messages and other
information from the server in a log file. While such monitor programs
may also request their own trap dynamically, configuring a trap receiver
will ensure that no messages are lost when the server is started.</dd>

</dl>

<h4>Files</h4>

<tt>ntp.drift</tt> frequency compensation (PPM)

<hr><a href=index.htm>Home</a><address><a
href=mailto:mills@udel.edu> David L. Mills &lt;mills@udel.edu&gt;</a>
</address></a></body></html>
