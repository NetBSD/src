#	$NetBSD: CHANGES-1.3.4,v 1.1.2.10 1999/02/01 06:10:28 cgd Exp $

Changes from NetBSD 1.3.3 to NetBSD 1.3.4:

File						Version(s)
----						--------

sys/netinet/in_pcb.c				1.56

  If INADDR_ANY is given in in_pcbconnect(), choose the ia_addr of the
  first interface, not the ia_broadaddr.  (Fixes PR#5645 and PR#6425.)
  (lukem)

sys/dev/ic/ncr53c9xvar.h			1.12
sys/dev/ic/ncr53c9x.c				1.24

  Allocate SCSI message buffers in ncr53c9x_attach(), with a provision
  for front-ends to override the allocation to avoid alignment
  handling in their DMA engines.  (Fixes PR#5180.)  (pk)

usr.bin/ftp/util.c				patch

  Fix 1.3.3 ftp's filename completion (PR#6647).  (frueauf)

sys/arch/i386/i386/ibcs2_machdep.c		patch

  Compiling a kernel with COMPAT_IBCS2 and VM86 failed due to a missing
  include of <machine/vm86.h>.  Fix that.  Fixes PR#5574 and PR#5884.
  (frueauf)

sys/sys/cdio.h					1.17
sys/isofs/cd9660/cd9660_vfsops.c		1.35
sys/dev/scsipi/cd.c				1.118

  Add multisession capability.  (Fixes PR#6093.)  (is)

lib/libc/stdio/freopen.c			1.8

  When reopening in append mode, seek to the end of file in order to have
  the internally kept offset pointer reflect this; ftell(3) would report
  an incorrect current offset otherwise.  Fixes PR#6381.  (kleink)

distrib/sparc/xsets/Makefile			1.2 (deleted)

  Remove long-unused file.  (mrg)

usr.bin/login/login.1				1.14

  Correct documentation of /etc/nologin to note that it does not
  apply to the superuser (PR#6328).  Correct some nroff nits in the
  process.  (fair)

usr.sbin/dhcp/server/Makefile			1.4
usr.sbin/dhcp/server/dhcpd.c			1.2

  Don't use the 'Name' RCS keyword; it makes builds harder.  Instead
  use a version string defined by the Makefile.  (cgd)

sys/arch/amiga/dev/sbicvar.h			1.13
sys/arch/amiga/dev/sbicreg.h			1.3
sys/arch/amiga/dev/atzsc.c			1.25
sys/arch/amiga/dev/gtsc.c			1.24
sys/arch/amiga/dev/sbic.c			1.33
sys/arch/amiga/dev/ahsc.c			1.21-1.22

  Makes the ahsc (Amiga 3000 mainboard SCSI) driver also work for A3000
  machines that have been reworked to support the Apollo3060 CPU
  accelerator board.  (is)

usr.bin/netstat/if.c				1.30
usr.bin/netstat/main.c				1.18
usr.bin/netstat/netstat.h			1.11
usr.bin/netstat/route.c				1.33

  Don't include 'wierd' network spport if "SMALL" is defined, to
  enable a much smaller netstat to be built, which is useful for boot
  media.  (mrg)

distrib/utils/x_netstat/Makefile		1.1 (new)

  Build a netstat without 'weird' network support or multicasting
  suppport.  (mrg)

distrib/utils/x_gzip/Makefile			1.1 (new)
distrib/utils/x_gzip/gzip.c			1.1 (new)
distrib/utils/x_gzip/gzip.1			1.1 (new)

  zlib-based (almost) fully featured free gzip clone, which is
  significantly smaller than the GNU version.  (mrg)

sys/arch/sparc/stand/common/newvers.sh		1.2
sys/arch/sparc/stand/boot/version		1.8-1.9

  Generate boot program version in a manner suitable for branches.  (mrg)

sys/arch/sparc/stand/boot/boot.c		1.3

  If /netbsd cannot be booted, look for kernels named /netbsd.gz,
  /netbsd.old, /netbsd.old.gz, /onetbsd, /onetbsd.gz, and /vmunix.  (mrg)

bin/pax/cache.c					patch

  This fixes a memory leak (due to never actually adding items to the
  hash table).  It may therefore also fix some problems with installing
  on machines with little memory.  (mycroft)

sbin/disklabel/disklabel.c			1.58 (patch)

  Fix a type overflow problem that prevents correct operation on large
  disks in some circumstances (PR#5534).  (drochner)

sys/arch/pmax/dev/rz.c				1.41

  Fixes RZ25 spinup failure: it seems to need a short delay after the
  start command completes.  RZ25 drives would spin up, but would not
  be recognized by the driver during that probe.  (mhitch)

usr.sbin/portmap/Makefile			1.9
usr.sbin/portmap/portmap.c			1.13-1.18
usr.sbin/portmap/portmap.8			1.5

  Fixes possible denial of service attacks from forged SET and UNSET
  calls, and adds logging features.  (mycroft and drochner)

sys/kern/uipc_socket.c				patch
sys/kern/uipc_socket2.c				patch
sys/sys/socketvar.h				patch

  Fix select(2)/accept(2) race condition which permits denial of
  service.  (mycroft)

distrib/sparc/Makefile                         1.1-1.2 (new)
distrib/sparc/Makefile.inc                     1.1-1.3 (new)
distrib/sparc/bootfs/Makefile                  1.1-1.9 (new)
distrib/sparc/bootfs/list                      1.1 (new)
distrib/sparc/ramdisk/Makefile                 1.1-1.7 (new)
distrib/sparc/ramdisk/disktab.preinstall       1.1 (new)
distrib/sparc/ramdisk/dot.profile              1.1-1.3 (new)
distrib/sparc/ramdisk/list                     patch (new)
distrib/sparc/ramdisk/mtree.conf               1.1-1.3 (new)
distrib/sparc/ramdisk/ramdiskbin.conf          patch (new)
distrib/sparc/ramdisk/termcap.src              1.1-1.2 (new)

  Build a ramdisk filesystem image for install/recover type media.
  Build a bootable floppy image using the ramdisk, that can also be
  used to build bootable CD-ROMs.  (mrg)

sys/arch/vax/include/float.h			1.5

  Make DBL_MIN and DBL_MAX match limits.h to avoid compile
  warnings.  (abs)

sys/nfs/nfs_serv.c				1.46

  Allow non-root users to create named pipes on NetBSD NFS file
  systems, like all other NFS servers.  (mrg)

sys/arch/pmax/tc/scc.c				1.45

  Fix scc speedtab handling and enable 78.6k and 115.2k
  (PR#6848).  (jonathan)

etc/etc.sparc/disktab				1.5-1.8

  Give floppy entry a BSD partition type in partition a.  Add an
  "instfs" entry used to build the ramdisk.  (mrg)


