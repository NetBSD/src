; NOTE: Assertions have been autogenerated by utils/update_test_checks.py
; RUN: opt < %s -instcombine -S | FileCheck %s

define <4 x i32> @foo(<4 x i32> %t, <4 x i32> %u) {
; CHECK-LABEL: @foo(
; CHECK-NEXT:    [[K:%.*]] = srem <4 x i32> %t, %u
; CHECK-NEXT:    ret <4 x i32> [[K]]
;
  %k = sdiv <4 x i32> %t, %u
  %l = mul <4 x i32> %k, %u
  %m = sub <4 x i32> %t, %l
  ret <4 x i32> %m
}
