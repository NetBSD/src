#	$NetBSD: Makefile,v 1.4.8.1 2021/06/02 14:46:19 cjep Exp $

.include <bsd.own.mk>

PROG=	proxymngr
SRCS=	main.c pmdb.c config.c

PROXYMANAGERDIR=	${X11ETCDIR}/proxymngr

CPPFLAGS.main.c=	-DCONFIG_FILE=\"${PROXYMANAGERDIR}/pmconfig\" \
			-DXVENDORNAMESHORT=${XVENDORNAMESHORT} \
                	-DXVENDORNAME=${XVENDORNAME} \
			-DXORG_RELEASE=${XORG_RELEASE}


X11EXTRAMANDEFS+=	-e 's,PROXYMANAGERDIR,${PROXYMANAGERDIR},g'

CPPSCRIPTS=	pmconfig
CPPSCRIPTFLAGS=	-DLBXPROXY=${X11BINDIR}/lbxproxy
CONFIGFILES=	pmconfig
FILESDIR=	${PROXYMANAGERDIR}

LDADD+=	${XLIBLDADD_XT}
DPADD+=	${XLIBDPADD_XT}

.if (${USE_INET6} != "no")
CPPFLAGS+=      -DIPv6
.endif

X11EXTRAMANTRANSFORMS+= \
	__configdir__		${X11ETCDIR}/proxymngr

.PATH:	${X11SRCDIR.${PROG}}

.include <bsd.x11.mk>
.include <bsd.prog.mk>
