#	$NetBSD: Makefile.xkbdata,v 1.1.28.1 2018/06/06 15:09:51 martin Exp $

XKBDISTDIR=	${X11SRCDIR.xkeyboard-config}/${XKBNAME}

.PATH:		${XKBDISTDIR}

.SUFFIXES: .in

.in:
	${TOOL_SED} -e 's,<_,<,g' -e 's,</_,</,g' < ${.ALLSRC} > ${.TARGET}


FILESDIR=	${X11LIBDIR}/xkb/${XKBNAME}


.if defined(XKBDIR)							# {
FILES+=			${XKBNAME}.dir
FILESDIR_${XKBNAME}.dir=${X11LIBDIR}/xkb
CLEANFILES+=		${XKBNAME}.dir

.include "${NETBSDSRCDIR}/external/mit/xorg/tools/xkbcomp/Makefile.xkbcomp"

${XKBNAME}.dir:
	${_MKTARGET_CREATE}
	rm -f ${.TARGET}
	(cd ${XKBDISTDIR} && ${XKBCOMP} -lfhlpR -o ${.OBJDIR}/${.TARGET} '*')

realall: ${FILES}

.endif									# }
