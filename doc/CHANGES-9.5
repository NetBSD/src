# $NetBSD: CHANGES-9.5,v 1.1.2.12 2024/08/07 11:03:34 martin Exp $

A complete list of changes from the NetBSD 9.4 release to the NetBSD 9.5
release:

external/gpl2/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h 				patched by hand
doc/README.files				patched by hand
doc/CHANGES-9.5 				added

	Welcome to 9.4_STABLE.
	[martin]

sys/netinet6/frag6.c				1.78

	inet6: fix calculation of fragment length.
	[ozaki-r, ticket #1836]

sys/dev/usb/uftdi.c				1.78
sys/dev/usb/usbdevs				1.815
sys/dev/usb/usbdevs.h				(regen)
sys/dev/usb/usbdevs_data.h			(regen)

	uftdi(4): PR 58127: add some USB serial adapters.
	[maya, ticket #1837]

sys/arch/hp300/stand/inst/Makefile		1.11
sys/arch/hp300/stand/uboot/Makefile		1.11

	hp300: PR 58211: fix hardlinks in /usr/mdec.
	[tsutsui, ticket #1838]

sys/arch/mac68k/dev/pm_direct.c			1.31

	mac68k: avoid random crashes on some Powerbook models
	when using mouse or keyboard.
	[nat, ticket #1839]

sys/dev/hil/hil.c				1.8

	hp300: fix "stray level 1 interrupt" panic by pressing keys
	during autoconf(9).
	[tsutsui, ticket #1840]

sbin/disklabel/main.c				1.58

	disklabel(8): avoid writing a label to the wrong sector
	on some architectures from installer/ramdisk versions of
	the disklabel command.
	[tsutsui, ticket #1841]

sys/arch/hp300/hp300/autoconf.c			1.113

	hp300: fix boot device selection for SCSI disks.
	[tsutsui, ticket #1842]

sys/dev/pci/eap.c				1.103

	eap(4): restore the full set of supported hardware encodings
	from netbsd-7.
	[nia, ticket #1843]

share/man/man4/eap.4				1.18-1.20

	eap(4): improve man page.
	[nia, ticket #1844]

external/bsd/tre/dist/src/agrep.c		1.5,1.6 (patch)

	agrep(1): PR 53513: rewrite check for binary files.
	[andvar, ticket #1845]

sys/dev/usb/if_urtwn.c				1.108
sys/dev/usb/usbdevs				1.812
sys/dev/usb/usbdevs.h				(regen)
sys/dev/usb/usbdevs_data.h			(regen)

	urtwn(4): PR 57819: add Mercusys and Mercusys MW150USV2 support.
	[nia, ticket #1846]

sys/arch/mac68k/dev/aed.c			1.39
sys/arch/macppc/dev/aed.c			1.35

	mac68k/macppc: PR 58303: fix passing of emulated 2nd and 3rd button
	events to the corresponding adb mouse.
	[nat, ticket #1847]

sys/arch/x86/x86/coretemp.c			1.40,1.41

	coretemp(4): do not accept impossibly low TjMax values.
	[gutteridge, ticket #1848]

usr.sbin/btpand/btpand.c			1.9

	btpand(8): fix off-by-one bug causing out of bounds memory access.
	[plunky, ticket #1851]

crypto/external/bsd/openssh/dist/log.c		1.29
crypto/external/bsd/openssh/dist/version.h	(patch)

	sshd(8): PR 58386:  avoid strnvis and syslog_r in signal handler
	context. Fixes CVE-2024-6387.
	[riastradh, ticket #1854]

sys/dev/pci/pcidevs				1.1507
sys/dev/pci/pcidevs.h				(regen)
sys/dev/pci/pcidevs_data.h			(regen)

	PR 58358: add Brainboxes as manufacturer and some of their devices.
	[nia, ticket #1852]

usr.sbin/sysinst/msg.mi.de			1.49,1.50
usr.sbin/sysinst/msg.mi.en			1.52

	sysinst(8): Note that leaving the network "media type" empty
	autoconfigures.
	[nia, ticket #1853]

sys/arch/x86/include/specialreg.h		1.212
sys/arch/x86/x86/identcpu.c			1.129,1.130

	x86: PR 58370: VIA CPU probe fixes.
	[andvar, ticket #1855]

bin/sh/histedit.c				1.68

	sh(1): ignore non-numeric values for HISTSIZE.
	[kre, ticket #1856]

distrib/sets/lists/comp/mi			1.2463
share/man/man9/Makefile				1.471
share/man/man9/imax.9				1.7,1.8

	imax(9): document the renaming from  max/min to uimax/uimin.
	[rin, ticket #1857]

sys/net/if_bridge.c				1.192

	bridge(4): add missing curlwp_bind() for pppoe.
	[rin, ticket #1858]

libexec/ld.elf_so/rtld.c			1.216

	PR 57628: at the end of _rtld_init() explicitly initialize the
	ld.elf_so local copy of the atomic access support functions
	for machines that do not implement all required ops in hardware
	(like 32bit sparc).
	[martin, ticket #1861]

lib/libc/compat-43/killpg.c			1.10
sys/kern/kern_descrip.c				1.263 (patch)
sys/kern/kern_ktrace.c				1.185 (patch)
sys/kern/kern_proc.c				1.276 (patch)
sys/kern/sys_sig.c				1.58 (patch)
sys/kern/tty.c					1.313 (patch)
tests/lib/libc/sys/t_kill.c			1.2

	PR 58425: disallow INT_MIN as a (negative) pid arg.
	Add a test for this.
	[kre, ticket #1859]

bin/sh/histedit.c				1.72

	sh(1): fix sh histedit core dump.
	[kre, ticket #1860]

libexec/ld.elf_so/arch/aarch64/mdreloc.c	1.14
libexec/ld.elf_so/arch/arm/mdreloc.c		1.45

	ld.elf_so(1): honor addend for R_AARCH64_TLS_TPREL relocation.
	[riastradh, ticket #1862]

bin/pax/ar_subs.c				1.58
bin/pax/buf_subs.c				1.31
bin/pax/extern.h				1.61
bin/pax/file_subs.c				1.65
bin/pax/ftree.c					1.43
bin/pax/pax.c					1.50,1.51
tests/bin/pax/t_pax.sh				1.3-1.7

	pax(1): Fix various PRs and add tests for the bugs.
	PR 33753: pax(1) deletes target file if rewriting it fails
	(`don't installworld to a full disk')
	PR 41736: pax reports an error when copying zero files
	PR 44498: tar(1) unnecessarily demands that getcwd() work
	[riastradh, ticket #1863]

libexec/ld.elf_so/README.TLS			1.7
libexec/ld.elf_so/arch/aarch64/rtld_start.S	1.6,1.7
libexec/ld.elf_so/tls.c				1.15,1.20,1.21
tests/libexec/ld.elf_so/t_tls_extern.c		1.15,1.16

	ld.elf_so(1): PR 58154: fix aarch64 thread-local storage
	[riastradh, ticket #1864]

