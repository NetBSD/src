# $NetBSD: CHANGES-9.1,v 1.1.2.23 2020/03/23 10:07:20 martin Exp $

A complete list of changes from the NetBSD 9.0 release to the NetBSD 9.1
release:

external/gpl2/groff/tmac/mdoc.local             patched by hand
sys/sys/param.h                                 patched by hand

        Welcome to 9.0_STABLE.
        [martin]

external/cddl/osnet/dist/uts/common/fs/zfs/zfs_vnops.c 1.57

	zfs_netbsd_setattr: ignore size changes on device nodes.
	[hannken, ticket #709]

external/cddl/osnet/dist/uts/common/fs/zfs/zfs_vnops.c 1.58

	Teach zfs to revoke vnodes the usual way.
	[riastradh, ticket #710]

sys/arch/arm/ti/if_cpsw.c			1.9

	Fix KERNHIST build (and simplify).
	[skrll, ticket #711]

sys/arch/hpcmips/hpcmips/hpcapm_machdep.c	1.6

	Fix spelling in comments.
	[sevan, ticket #712]

lib/libdm/libdm_ioctl.c				1.4

	Do not write temporary files to fixed paths in /tmp.
	[riastradh, ticket #713]

crypto/external/bsd/openssl/dist/crypto/rand/rand_unix.c 1.14

	Open /dev/urandom with O_CLOEXEC to avoid leaking filedescriptors
	into child processes.
	[riastradh, ticket #714]

external/cddl/osnet/dist/cmd/zpool/zpool_vdev.c	1.5

	zpool: The NetBSD specific ioctl needs to include sys/ioctl.h.
	[riastradh, ticket #715]

sys/dev/usb/usbdi.c				1.194

	Fix a race in USB abort, so that a transfer on an interrupt
	pipe whose callback is currently running at the moment the
	pipe is aborted will not be restarted afterward.
	[riastradh, ticket #716]

sys/dev/fdt/dwcmmc_fdt.c			1.11
sys/dev/ic/bwfm.c				1.15-1.18
sys/dev/ic/bwfmreg.h				1.4-1.6
sys/dev/ic/bwfmvar.h				1.4,1.5
sys/dev/ic/dwc_mmc.c				1.21,1.22
sys/dev/ic/dwc_mmc_reg.h			1.8,1.9,1.12,1.13
sys/dev/pcmcia/pcmciareg.h			1.11
sys/dev/sdmmc/if_bwfm_sdio.c			1.4,1.6-1.12
sys/dev/sdmmc/if_bwfm_sdio.h			1.1,1.2
sys/dev/sdmmc/sdhc.c				1.105,1.106
sys/dev/sdmmc/sdmmc.c				1.37,1.39
sys/dev/sdmmc/sdmmc_cis.c			1.6,1.8
sys/dev/sdmmc/sdmmc_io.c			1.15-1.19
sys/dev/sdmmc/sdmmc_ioreg.h			1.4,1.5
sys/dev/sdmmc/sdmmc_mem.c			1.69-1.71
sys/dev/sdmmc/sdmmcdevs				1.5-1.8
sys/dev/sdmmc/sdmmcvar.h			1.31,1.33,1.34
sys/net/if_media.h				1.66
sys/dev/sdmmc/sdmmcdevs.h			(regen)

	Various fixes to make bwfm@sdio work on Pinebook Pro:
	 - Several fixes to SDIO (generic for the dwc driver)
	 - bwfm sdio attachment.
	 - Various bwfm fixes
	 - isplay 802.11 modes beyond 'g'
	 - sdhc voltage setting fixes
	[mrg, ticket #717]

sys/arch/mips/adm5120/dev/ahci.c		1.21
sys/dev/usb/ehci.c				1.274
sys/dev/usb/ohci.c				1.296
sys/dev/usb/uhci.c				1.294
sys/external/bsd/dwc2/dwc2.c			1.72

	Fix a memory leak.
	[skrll, ticket #718]

sys/kern/uipc_socket.c				1.288

	SO_RCVTIMEO: zero out the time value, to prevent uninitialized
	bytes in its padding from leaking to userland.
	[maxv, ticket #720]

sys/arch/arm/arm32/bus_dma.c			1.119,1.120

	Make sure to convey a failure to the calling function.
	[skrll, ticket #721]

sys/arch/i386/stand/efiboot/eficons.c		1.10,1.11

	If the default GOP mode is unavailable, fallback to the first mode
	defined.
	[jmcneill, ticket #723]

xsrc/external/mit/MesaLib/dist/src/mapi/entry_x86-64_tls.h 1.5
xsrc/external/mit/MesaLib/dist/src/mapi/entry_x86_tls.h 1.6

	mesa: sync w/ pkgsrc: don't assume the current gl dispatch table
	points to noop if NULL, instead call the ENTRY_CURRENT_TABLE_GET
	function.
	[tnn, ticket #724]

etc/rc.d/mountall				1.12
external/cddl/osnet/dist/uts/common/fs/zfs/spa_history.c 1.5,1.6
external/cddl/osnet/dist/uts/common/fs/zfs/zfs_vnops.c 1.59-1.61
external/cddl/osnet/sys/kern/misc.c		1.8

	- Make block device nodes with /dev on zfs work.
	- Mount zfs if zfs=YES whether or not /etc/zfs/zpool.cache is there.
	- Mark our changes to zpools as NetBSD, not OpenSolaris.
	[riastradh, ticket #725]

external/gpl3/binutils/dist/bfd/elf.c		1.14

	Fix 'nm /dev/ksyms'.
	[rin, ticket #726]

sys/arch/powerpc/include/db_machdep.h		1.27

	Do not mask out LK bit (bit 31) from M_BCTR, which distinguishes
	bcctr and bcctrl.
	[rin, ticket #727]

sys/arch/powerpc/ibm4xx/dev/com_opb.c		1.23

	Fix a panic during attach of com(4) for powerpc/ibm4xx peripheral.
	[rin, ticket #728]

sys/arch/powerpc/include/intr.h			1.15

	Fix !__HAVE_FAST_SOFTINTS build for debugging.
	[rin, ticket #729]

sys/arch/powerpc/conf/files.powerpc		1.93
sys/arch/powerpc/include/pio.h			1.8
sys/arch/powerpc/pic/intr.c			1.27
sys/arch/powerpc/powerpc/bus_dma.c		1.50
sys/arch/powerpc/powerpc/pio_subr.S		1.17

	Remove redundant "eieio" instructions for powerpc/ibm4xx.
	[rin, ticket #730]

sys/dev/usb/u3g.c				1.40
sys/dev/usb/umodeswitch.c			1.5
sys/dev/usb/usbdevs				1.776
sys/dev/usb/usbdevs.h				(regen)
sys/dev/usb/usbdevs_data.h			(regen)

	Add support for D-Link DWM-157 3G USB modem.
	[manu, ticket #719]

sys/arch/powerpc/ibm4xx/pmap.c			1.77-1.80

	Fix powerpc/ibm4xx bugs:
	- fix NULL dereference; "pap" argument of pmap_extract(9) can be
	  NULL.
	- fix off-by-one error for ctx (ASID).
	- clear ti_ctx when flushing a TLB entry for clarity.
	- in ppc4xx_tlb_find_victim(), mark kernel stack page TLBF_REF
	  instead of TLBF_USED.
	[rin, ticket #731]

sys/uvm/uvm_pglist.c				1.80

	Make this compile again with PGALLOC_VERBOSE.
	[rin, ticket #732]

sys/arch/powerpc/powerpc/fpu.c			1.39
sys/arch/powerpc/powerpc/powerpc_machdep.c	1.77

	Fix panics on machines without FPU.
	[rin, ticket #733]

sys/net/if_bridge.c				1.167,1.168

	bridge(4): disable two noisy debug messages.
	[rin, ticket #734]

sys/arch/powerpc/ibm4xx/trap.c			1.71-1.78

	Various fixes for powerpc/ibm4xx:
	- improve copyin() and copyout()
	- do not try to recovery from data page fault in interrupt context
	- comment out unused functions badaddr() and badaddr_read()
	- cleanup/cosmetic
	[rin, ticket #735]

lib/libpthread/arch/powerpc/pthread_md.h	1.8
sys/arch/powerpc/powerpc/sig_machdep.c		1.47

	Document how the initial MSR for lwps is set.
	Add a KASSERT validating the effective value.
	[rin, ticket #736]

sys/arch/powerpc/powerpc/locore_subr.S		1.60
sys/arch/powerpc/powerpc/trap.c			1.157

	Comment out do_ucas_32(), only user of which, _ucas_32(), is
	commented out since powerpc/trap.c rev 1.156.
	[rin, ticket #737]

usr.sbin/postinstall/postinstall.in		1.15

	PR install/54990: fix the fixup script to follow the URL change in
	/etc/motd (http->https).
	[nakayama, ticket #738]

sys/ufs/ufs/ufs_vnops.c				1.249

	Zero out the padding in 'd_namlen', to prevent info leaks.
	[maxv, ticket #739]

sys/external/bsd/drm2/dist/drm/radeon/radeon_irq_kms.c 1.5

	Take a mutex around mode config logic as the comment advises.
	[riastradh, ticket #740]

sys/compat/common/vfs_syscalls_43.c		1.65

	PR kern/55025: include all of the vfs syscalls in the syscall_package,
	not just oquota.
	[pgoyette, ticket #741]

sys/arch/arm/arm/cpufunc.c			1.176
sys/arch/arm/arm32/armv7_generic_space.c	1.11
sys/arch/arm/arm32/pmap.c			1.388
sys/arch/arm/conf/Makefile.arm			1.54 (via patch)
sys/arch/arm/include/arm32/pmap.h		1.161

	Fix the armv[67] memory attributes for uncached memory.
	Remove workaround for unaligned access faults.
	[skrll, ticket #742]

etc/rc.d/random_seed				1.8

	Allow random seed on zfs.
	[riastradh, ticket #743]

sys/arch/mips/adm5120/dev/ahci.c		1.18-1.20
sys/dev/ic/sl811hs.c				1.103
sys/dev/usb/ehci.c				1.270-1.273
sys/dev/usb/motg.c				1.26-1.33
sys/dev/usb/ohci.c				1.293-1.295
sys/dev/usb/uhci.c				1.289-1.293
sys/dev/usb/usb.c				1.181,1.182
sys/dev/usb/usbdi.c				1.190-1.192
sys/dev/usb/usbdi.h				1.99-1.101
sys/dev/usb/usbdivar.h				1.121,1.122
sys/dev/usb/xhci.c				1.116-1.118
sys/external/bsd/dwc2/dwc2.c			1.67-1.71
sys/external/bsd/dwc2/dwc2var.h			1.7

	Fix various race conditions in USB abort and timeout.
	[riastradh, ticket #744]

sys/dev/usb/umass.c				1.177-1.179

	Abort default pipe too on detach before detaching children.
	Consolidate logic to call the transfer callback.
	Make sure the umass transfer callback is run in error branches.
	[riastradh, ticket #745]

sys/ddb/db_lex.c				1.25

	Fix crash(8) prompt.
	[riastradh, ticket #746]

sys/dev/pci/if_mcx.c				1.11

	mcx(4): use 64-bit PCI DMA if available.
	[thorpej, ticket #747]

sys/dev/pci/ichsmb.c				1.61

	If attach fails, don't panic on detach.
	[riastradh, ticket #748]

sys/external/bsd/drm2/nouveau/nouveau_pci.c	1.25

	List the PCI ID range for new nvidia TU117 and TU116.
	Adjust the check to simply be >= 0x1580, which is the
	first pciid not supported. Fixes PR 54600.
	[mrg, ticket #749]

sys/arch/amd64/amd64/db_interface.c		1.37

	Fix boot -c or -d by avoiding ipi handling before the vector is
	initialized.
	[christos, ticket #750]

sys/arch/cobalt/dev/gt.c			1.30

	Fix mapping of the PCI I/O space.
	[thorpej, ticket #751]

sys/arch/powerpc/booke/copyin.c			1.8

	Let copyinstr(9) return ENAMETOOLONG correctly if source is not
	NUL-terminated.
	[rin, ticket #752]

sys/fs/tmpfs/tmpfs_vfsops.c			1.75

	Remove an always false check.
	[rin, ticket #753]

sys/kern/files.kern				1.44

	Include kern_crashme.c in non-DEBUG kernels.
	This is useful for simulating crashes in production to test failover.
	[rin, ticket #754]

common/lib/libc/arch/powerpc/atomic/atomic_cas.S 1.9
common/lib/libc/arch/powerpc/atomic/atomic_op_asm.h 1.7
common/lib/libc/arch/powerpc/atomic/atomic_swap.S 1.8
sys/arch/evbppc/conf/std.obs200			1.5
sys/arch/evbppc/conf/std.obs266			1.3
sys/arch/evbppc/conf/std.virtex			1.4
sys/arch/evbppc/conf/std.walnut			1.9
sys/arch/powerpc/ibm4xx/4xx_trap_subr.S		1.8
sys/arch/powerpc/ibm4xx/trap_subr.S		1.28
sys/arch/powerpc/include/asm.h			1.49
sys/arch/powerpc/include/lock.h			1.15
sys/arch/powerpc/powerpc/lock_stubs.S		1.12
sys/arch/powerpc/powerpc/locore_subr.S		1.61
sys/arch/powerpc/powerpc/trap_subr.S		1.81

	Work around IBM405 Errata 77 (CPU_210) for kernel and userland. 
	[rin, ticket #755]

lib/Makefile					1.276

	Avoid running useless makes in every subdirectory.
	[riastradh, ticket #756]

sys/conf/files					1.1257-1.1259

	Fix COMPAT_NETBSD32 to properly handle EXEC_AOUT binaries.
	[pgoyette, ticket #757]

libexec/ld.elf_so/headers.c			1.68
libexec/ld.elf_so/map_object.c			1.61
libexec/ld.elf_so/rtld.c			1.203

	PR 55043: fix protection update for the last page of a PT_GNU_RELRO
	segment.
	[thorpej, ticket #758]

sys/dev/pci/if_ena.c				1.24

	PR 55044: replace #if condition for irq_slot with __diagused on the
	cleanup path.
	[jdolecek, ticket #759]

sys/arch/amiga/dev/gayle_pcmcia.c		1.32
sys/arch/amigappc/include/bus_defs.h		1.8

	The Gayle interface uses swapped (little-endian) word accesses, so we
	need to use the amiga_bus_stride_1swap methods for the word accesses.
	[is, ticket #760]

sys/compat/netbsd32/netbsd32_compat_43.c	1.60
sys/compat/netbsd32/syscalls.master		1.132
sys/compat/netbsd32/netbsd32_syscallargs.h	(regen)
sys/compat/netbsd32/netbsd32_syscall.h		(regen)
sys/compat/netbsd32/netbsd32_sysent.c		(regen)
sys/compat/netbsd32/netbsd32_syscalls.c		(regen)
sys/compat/netbsd32/netbsd32_syscalls_autoload.c (regen)
sys/compat/netbsd32/netbsd32_systrace_args.c	(regen)

	PR 55047: properly mark netbsd32_compat_43 syscalls that are
	directly implemented by calling their compat_43 equivalents.
	[pgoyette, ticket #761]

sys/arch/amd64/amd64/trap.c			1.126
sys/compat/netbsd32/netbsd32_mod.c		1.17,1.18
sys/sys/compat_stub.h				1.23

	PR 55038: fix handling of "oosyscall" under compat_netbsd32.
	[pgoyette, ticket #762]

lib/libkvm/kvm.c				1.105
lib/libkvm/kvm_x86_64.c				1.11

	Only do bounce buffering for character devices.
	Uuse a binary search in _kvm_pa2off().
	[chs, ticket #763]

sys/uvm/uvm_fault.c				1.207

	 - in uvm_fault_check(), if the map entry is wired, handle the fault
	   the same way that we would handle UVM_FAULT_WIRE.
	   Faulting on wired mappings is valid if the mapped object was
	   truncated and then later grown again.

	 - in uvm_fault_unwire_locked(), we must hold the locks for the
	   vm_map_entry while calling pmap_extract() in order to avoid
	   races with the mapped object being truncated while we are
	   unwiring it.
	[chs, ticket #764]

sys/dev/acpi/acpi_pci_link.c			1.25

	Fix a use-after-free bug for extended IRQ resource.
	[chs, ticket #765]

sys/kern/subr_pool.c				1.265

	Fix assertions about when it is ok for pool_get() to return NULL.
	[chs, ticket #766]

sys/ufs/ufs/ufs_dirhash.c			1.38

	In ufsdirhash_free(), only examine dh->dh_onlist after taking the
	dirhashlist lock.
	[chs, ticket #767]

sys/kern/kern_mutex.c				1.90

	Split an "a && b" assertion into two so it's clear in the dump
	which condition was not true even if both are true by the time
	the dump is written.
	[chs, ticket #768]

sys/compat/netbsd32/netbsd32_mod.c		1.17,1.18

	Fix MODULE_HOOK_SET arguments (broken in ticket #762).
	[pgoyette, ticket #775]

external/cddl/osnet/dist/uts/common/fs/zfs/zfs_vnops.c 1.63

	Avoid unnecessary zil_commit on rm.
	[riastradh, ticket #769]

sys/compat/netbsd32/netbsd32_mod.c		1.19

	Fix restarting of syscalls in compat_netbsd32.
	[pgoyette, ticket #770]

sys/arch/powerpc/booke/copyout.c		1.6-1.8

	copyoutstr(9):
	 - sync style with copyinstr(9)
	 - return  ENAMETOOLONG correctly when source string is not
	   NUL-terminated.
	Comment out full function of optimized version of copyoutstr(9),
	which has never been enabled so far.
	[rin, ticket #771]

sys/arch/powerpc/ibm4xx/copyinstr.c		1.10-1.13
sys/arch/powerpc/ibm4xx/copyoutstr.c		1.10-1.13

	copy{in,out}str: sync style with booke.
	copy{in,out}str: Correctly return ENAMETOOLONG if source is not
	NUL-terminated.
	Use dcbst instead of dcbf to flush cache.
	Cosmetic changes.
	[rin, ticket #772]

sys/arch/powerpc/ibm4xx/pmap.c			1.81-1.85
sys/arch/powerpc/include/ibm4xx/pmap.h		1.20
sys/arch/powerpc/include/ibm4xx/tlb.h		1.6

	Misc non-critical fixes.
	ppc4xx_tlb_enter(): invalidate entry after clearing MSR for sure.
	pmap_procwr(): use dcbst instead of dcbf as a tiny optimization.
	Retire tlbpid_t (u_short).
	Fix pmap_procwr().
	[rin, ticket #773]

sys/arch/powerpc/ibm4xx/cpu.c			1.34
sys/arch/powerpc/ibm4xx/pic_uic.c		1.5

	Cosmetic change. No binary changes.
	Remove unused macros.
	[rin, ticket #774]

usr.bin/config/TODO                             up to 1.32
usr.bin/config/defs.h                           up to 1.105
usr.bin/config/files.c                          up to 1.37
usr.bin/config/gram.y                           up to 1.55
usr.bin/config/main.c                           up to 1.99
usr.bin/config/scan.l                           up to 1.31
usr.bin/config/sem.c                            up to 1.84
usr.bin/config/util.c                           up to 1.21

	config(1): fix issue with incorrect handling of elifdef statements.
	[christos, ticket #776]

usr.sbin/sysinst/arch/alpha/md.c		1.8

	The (unused) md_pre_disklabel() function needs to return
	success, otherwise all installations will be aborted.
	[martin, ticket #777]

sys/arch/amd64/amd64/trap.c			1.127
sys/compat/netbsd32/netbsd32_mod.c		1.20

	Fix unloading of compat modules (fallout from ticket #762).
	[pgoyette, ticket #778]

sys/arch/mips/mips/bus_dma.c			1.39

	Allow len == 0 in bus_dmamap_sync().
	[thorpej, ticket #779]

sys/net/if_ipsec.c				1.28,1.29
sys/netipsec/key.c				1.271

	Fix ipsecif(4) SPDADD pfkey message contains garbage.
	Reduce unnecessary reqid of NAT-T ipsecif(4).
	Fix kern/55066.
	[knakahara, ticket #780]

sys/arch/xen/xen/xennet_checksum.c		1.4

	Make the packet length check less strict, allow the physical
	packet longer than IP payload. This fixes problem where checksum
	was not recomputed for short packets coming from Windows domU
	on same physical host as it seems Windows does some padding.
	[jdolecek, ticket #781]

sys/dev/pci/pci_subr.c				1.220,1.221
sys/dev/pci/pcireg.h				1.149-1.151

	Enhancements to pcictl(8) dump:
	- Print Bridge Config Retry Enable bit and Retimer Presence
	  Detect Supported bit.
	- 10-bit Tag Requester/Completer.
	- Add Data link Feature extended capability.
	- Add Physical Layer 16.0 GT/s extended capability.
	[msaitoh, ticket #782]

etc/MAKEDEV.tmpl				1.216

	Create /dev/ipmi0 in `MAKEDEV all'.
	[riastradh, ticket #783]

sys/dev/pci/pcidevs				1.1398-1.1402
sys/dev/pci/pcidevs.h				(regen)
sys/dev/pci/pcidevs_data.h			(regen)

	- Add Radeon HD4290				  
	- Add Farallon PN9000SX Ethernet.
	- NVIDIA 0x036[0-7] are nForce MCP55 LPC Bridge.
	- Add VIA VX900 chipset.	    
	- Add some GeForce devices.
	[msaitoh, ticket #784]

sys/net/if_media.h				1.70

	- Remove 50GBASE-LR10.
	- Add the following medias:
	  - 25GBASE-ACC
	  - 100GBASE-ACC
	  - 100GBASE-AOC
	  - 100GBASE-FR
	  - 100GBASE-LR
	  - 200GBASE-ER4
	  - 400GBASE-ER8
	  - 400GBASE-FR4
	  - 400GBASE-LR4
	  - 400GBASE-SR4.2
	  - 400GBASE-SR8
	[msaitoh, ticket #785]

sys/dev/mii/atphy.c			1.28-1.29 
sys/dev/mii/miidevs			1.163		        
sys/dev/pci/if_nfe.c			1.77-1.78
sys/dev/mii/miidevs.h			regen 
sys/dev/mii/miidevs_data.h		regen 
						        
	- 0x001374 is non-bitreversed value of Attansic OUI(0x00c82e) and
	  Attansic/Atheros correctly uses ID1 and ID2 register, so delete all
	  0x001374 related entries.			  
	- Use unsigned to avoid undefined behavior in nfe_setmulti() and
	  nfe_set_macaddr(). Found by kUBSan.
	- Improve error check in mfe_miibus_{read,write}reg().
	- Fix a bug that atphy(4) doesn't work with Attansic L2 rev. 1.
	[msaitoh, ticket #786]

sys/altq/altq_flowvalve.h			1.4
sys/dist/pf/net/pfvar.h				1.23
sys/external/bsd/drm2/dist/drm/drm_drv.c	1.13
sys/external/bsd/drm2/dist/include/drm/drmP.h	1.38
sys/net/slcompress.h				1.20
sys/net/zlib.h					1.15

	Fix kernel ctf type duplication.
	[riastradh, ticket #787]

external/cddl/osnet/dist/uts/common/fs/zfs/vdev_disk.c 1.14,1.15
sys/dev/ata/wd.c				1.459
sys/dev/ata/wdvar.h				1.50
sys/dev/cgd.c					1.121
sys/dev/dkwedge/dk.c				1.100
sys/kern/subr_disk_open.c			1.15
sys/sys/disk.h					1.75
sys/sys/dkio.h					1.26

	New ioctl DIOCGSECTORALIGN to query sector alignment parameters.
	Make zfs zpool(8) use it to detect ata disks with native 4096-byte
	sectors.
	[riastradh, ticket #788]

sys/miscfs/deadfs/dead_vnops.c			1.62

	Fix missing biodone from VOP_BWRITE on revoked device vnode.
	[riastradh, ticket #789]

sys/ufs/ffs/ffs_alloc.c				1.165

	Fix non-DIAGNOSTIC build with UVM_PAGE_TRKOWN.
	[riastradh, ticket #790]

sys/external/bsd/drm2/include/drm/bus_dma_hacks.h 1.20

	PR 54817: in bus_dmamap_load_pglist() try a 32-element array of
	bus_dma_segment_t's before attempting to allocate.
	[mrg, ticket #791]

sys/arch/amiga/dev/aucc.c			1.48
sys/dev/pci/auacer.c				1.39
sys/dev/pci/auich.c				1.159
sys/dev/pci/auixp.c				1.49
sys/dev/pci/auvia.c				1.85
sys/dev/pci/gcscaudio.c				1.19
sys/dev/sbus/dbri.c				1.42

	PR 55017: fix audio round_blocksize mismatch.
	[isaki, ticket #792]

sys/dev/audio/audio.c				1.42,1.47
sys/dev/audio/audiodef.h			1.9

	Remove incorrect assertion and improve messages for others.
	[isaki, ticket #793]

sys/dev/audio/audio.c				1.38, 1.56 (patch), 1.57
sys/dev/audio/audiodef.h			1.10
sys/dev/audio/audiovar.h			1.8

	PR 54427: fix panic when closing before pad.
	[isaki, ticket #794]

sys/arch/xen/xen/xbd_xenbus.c			1.95
sys/dev/ata/wd.c				1.458
sys/dev/cgd.c					1.120
sys/dev/dksubr.c				1.112
sys/dev/dkvar.h					1.32
sys/dev/ld.c					1.109
sys/dev/raidframe/rf_netbsdkintf.c		1.380
sys/dev/scsipi/sd.c				1.328
sys/dev/dksubr.c				(apply patch)
sys/dev/dkvar.h					(apply patch)

	Fix dump on nested virtual disk devices.
	Additional patches to provide ABI compatibility.
	[riastradh, ticket #795]

sys/arch/arm/samsung/exynos5410_clock.c		1.6
sys/arch/arm/samsung/exynos5422_clock.c		1.15
sys/arch/arm/samsung/exynos_gpio.c		1.26
sys/arch/arm/samsung/exynos_pinctrl.c		1.16
sys/arch/arm/samsung/exynos_uart.c		1.3

	Whitespace cosmetics in preparation for further pullups.
	[skrll, ticket #796]

sys/arch/arm/altera/cycv_dwcmmc.c		1.5
sys/arch/arm/samsung/exynos_dwcmmc.c		1.10

	Fix some dwcmmc attachments (broken by ticket #717).
	[skrll, ticket #797]

sys/arch/arm/samsung/exynos_gpio.c		1.27-1.29
sys/arch/arm/samsung/exynos_pinctrl.c		1.17
sys/arch/arm/samsung/exynos_pinctrl.h		1.3
sys/arch/arm/samsung/exynos_var.h		1.28

	Support Exynos 5410 GPIO.
	[skrll, ticket #798]

sys/arch/arm/samsung/exynos_platform.c		1.28

	Bring back EXYNOS5422_DISABLE_CA7_CLUSTER.
	[skrll, ticket #799]

sys/dev/ic/dwc_mmc.c				1.23-1.26
sys/dev/ic/dwc_mmc_reg.h			1.10
sys/dev/ic/dwc_mmc_var.h			1.14

	Fix dwc_mmc.
	[skrll, ticket #800]

etc/etc.amiga/Makefile.inc			1.29-1.31

	Provide both miniroot.fs (for people wanting to install NetBSD
	without more 3rdparty software than what's provided on our ISO and
	.fs.tz (for people downloading over slow links).
	[is, ticket #801]

sys/arch/vax/vsa/ncr.c				1.50

	Do not expect a struct buf to be present if doing DMA to kernel space.
	[ragge, ticket #802]

