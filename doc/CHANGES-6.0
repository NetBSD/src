# $NetBSD: CHANGES-6.0,v 1.1.2.13 2012/02/23 02:31:50 riz Exp $

A complete list of changes from the initial NetBSD 6.0 branch on 15 Feb 2012
until the 6.0 release:

gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 6.0_BETA!

sys/conf/osrelease.sh				1.121

	Don't eat _BETA or other textual tags after the version.
	[christos, ticket #3]

UPDATING					1.235
etc/daily					1.81
etc/weekly					1.26

	Run makemandb with the normal 022 umask, not the restrictive 077.
	[joerg, ticket #2]

distrib/amd64/kmod/Makefile			1.2
distrib/common/Makefile.distrib			1.9
distrib/i386/kmod/Makefile			1.11
distrib/sets/sets.subr				1.136
share/mk/bsd.kmodule.mk				1.34
sys/conf/osrelease.sh				1.122

	Reconcile the various methods of telling what kernel version
	modules are for.
	[christos, ticket #6]

etc/man.conf					1.30
external/bsd/mdocml/Makefile.inc		1.15
external/bsd/mdocml/dist/mandoc.h		1.2
external/bsd/mdocml/dist/read.c			1.6
usr.sbin/makemandb/Makefile			1.2
usr.sbin/makemandb/apropos.1			1.3
usr.sbin/makemandb/apropos.c			1.5
usr.sbin/makemandb/makemandb.c			1.3-1.5

	Various fixes for apropos(1) to restore functionality (including
	compressed man page support) which had been there prior
	to importing the new version.
	[joerg, ticket #4]

share/mk/bsd.README				1.293
share/mk/bsd.own.mk				1.697

	Derive MANINSTALL from MKCATPAGES and MKHTML.
	[joerg, ticket #5]

doc/3RDPARTY								patch
doc/CHANGES								patch
external/ibm-public/postfix/dist/HISTORY				patch
external/ibm-public/postfix/dist/mantools/get_anchors.pl		patch
external/ibm-public/postfix/dist/src/bounce/bounce_trace_service.c	patch
external/ibm-public/postfix/dist/src/global/dict_ldap.c			patch
external/ibm-public/postfix/dist/src/global/dict_sqlite.c		patch
external/ibm-public/postfix/dist/src/global/mail_version.h		patch
external/ibm-public/postfix/dist/src/global/maps.c			patch
external/ibm-public/postfix/dist/src/local/mailbox.c			patch
external/ibm-public/postfix/dist/src/local/unknown.c			patch
external/ibm-public/postfix/dist/src/tlsproxy/tlsproxy.c		patch
external/ibm-public/postfix/dist/src/util/dict.c			patch
external/ibm-public/postfix/dist/src/xsasl/xsasl_dovecot_server.c	patch

	Import Postfix 2.8.8.
	[tron, ticket #7]
	
usr.sbin/postinstall/postinstall		1.130

	Add "pwd_mkdb" item, which checks whether /etc/pwd.db is in the
	new format, and runs "pwd_mkdb -V 1 /etc/master.passwd" to fix it.
	[apb, ticket #9]

usr.sbin/postinstall/postinstall		1.131

	Use msg for indentation.
	[apb, ticket #10]

sys/dev/usb/if_udav.c				1.35
sys/dev/usb/usbdevs				1.608
sys/dev/usb/usbdevs.h				regen
sys/dev/usb/usbdevs_data.h			regen

	Add support for the QUAN DM9601.
	[mbalmer, ticket #11]

sys/dev/usb/umidi.c				1.60

	Fix the reversed logic in several uses of the new 'closing'
	member introduced in the previous change. From PR 45909.
	[mrg, ticket #12]

doc/3RDPARTY						patch
doc/CHANGES						patch
external/bsd/pkg_install/dist/add/perform.c		patch
external/bsd/pkg_install/dist/delete/pkg_delete.c	patch
external/bsd/pkg_install/dist/lib/license.c		patch
external/bsd/pkg_install/dist/lib/opattern.c		patch
external/bsd/pkg_install/dist/lib/pkg_summary.5		patch
external/bsd/pkg_install/dist/lib/version.h		patch

	Update "pkg_install" to version 20120128:
	- pkg_install 20120128:
	  - Explicitly stat(2) if mkdir failed. errno detection
	    doesn't work e.g.  on Solaris.
	  - Provide a stable order for package names that only differ
	    in the base name, not the version number.
	- pkg_install 20110805:
	  - Fix for pkg_delete on NFS from Anthony Mallet.
	[tron, ticket #13]

include/spawn.h					1.2
sys/kern/kern_exec.c				1.341
sys/uvm/uvm_glue.c				1.157
tests/lib/libc/gen/posix_spawn/t_fileactions.c	1.3

	posix_spawn: fix kernel bug when passing empty fileactions
	(PR kern/46038)	and add a test case for this. Fix potential
	race condition, doublefreeing of memory and memory leaks in
	error cases.
	[martin, ticket #14]

usr.sbin/makemandb/apropos.1			1.4
usr.sbin/makemandb/makemandb.8			1.2
usr.sbin/makemandb/whatis.c			1.3

	Add reference to whatis(1).
	SQLite doesn't use the FTS index for equal ops, so force it
	to do a FTS search first. Drops run time by a factor of 6
	for "whatis man".
	[joerg, ticket #15]

sys/sys/cdefs.h					1.90

	Fix __restricted expansion for C++ programs.
	[martin, ticket #16]

sys/kern/kern_exec.c				1.342-344

	Various posix_spawn fixes.
	[martin, ticket #17]

sys/arch/macppc/stand/ofwboot/boot.c		1.27
sys/arch/macppc/stand/ofwboot/boot.h		1.4
sys/arch/macppc/stand/ofwboot/ofdev.c		1.26

	Fix boot failure on OF 2.0 machines.
	[tsutsui, ticket #22]

sys/arch/xen/include/hypervisor.h		1.38
sys/arch/xen/xen/clock.c			1.62
sys/arch/xen/xen/hypervisor.c			1.61

	Fix Xen 3.0 support and other Xen hypervisor-version-specific
	fixes.  PR#45961.
	[bouyer, ticket #28]

sys/arch/x86/include/cpu.h			1.48
sys/arch/x86/include/pmap.h			1.50
sys/arch/x86/x86/cpu.c				1.97
sys/arch/x86/x86/pmap.c				1.165,167-168
sys/arch/xen/include/hypervisor.h		1.37
sys/arch/xen/include/intr.h			1.34
sys/arch/xen/x86/cpu.c				1.81-82
sys/arch/xen/x86/x86_xpmap.c			1.39
sys/arch/xen/x86/xen_ipi.c			1.10
sys/arch/xen/x86/xen_pmap.c			1.17
sys/uvm/uvm_km.c				1.122
sys/uvm/uvm_kmguard.c				1.10
sys/uvm/uvm_map.c				1.315

	Xen MP stability fixes, including a problem initially reported in
	PR port-xen/45975
	[bouyer, ticket #29]

sys/arch/x86/x86/pmap.c				1.166
sys/arch/xen/x86/cpu.c				1.83

	Get rid of "mapping already present" log messages.
	[bouyer, ticket #31]

sys/arch/i386/i386/machdep.c			1.719

	Fix FPU corruption occasionally reported on Xen/MP systems.
	[bouyer, ticket #32]

doc/3RDPARTY					1.912-913 via patch

	Remove stale entries and add "Location" tags that tells where
	the source lives in the NetBSD tree.
	[tron, ticket #18]

external/bsd/flex/dist/libmain.c		1.2
external/bsd/flex/dist/libyywrap.c		1.2
tools/compat/Makefile				1.56
usr.bin/lex/COPYING				delete
usr.bin/lex/FlexLexer.h				delete
usr.bin/lex/Makefile				delete
usr.bin/lex/NEWS				delete
usr.bin/lex/VERSION				delete
usr.bin/lex/ccl.c				delete
usr.bin/lex/config.h				delete
usr.bin/lex/dfa.c				delete
usr.bin/lex/ecs.c				delete
usr.bin/lex/flex.1				delete
usr.bin/lex/flex.skl				delete
usr.bin/lex/flexdef.h				delete
usr.bin/lex/gen.c				delete
usr.bin/lex/initscan.c				delete
usr.bin/lex/libmain.c				delete
usr.bin/lex/libyywrap.c				delete
usr.bin/lex/main.c				delete
usr.bin/lex/misc.c				delete
usr.bin/lex/mkskel.sh				delete
usr.bin/lex/nfa.c				delete
usr.bin/lex/parse.y				delete
usr.bin/lex/scan.l				delete
usr.bin/lex/sym.c				delete
usr.bin/lex/tblcmp.c				delete
usr.bin/lex/version.h				delete
usr.bin/lex/yylex.c				delete

	Remove unused lex sources.
	[tron, ticket #19]

dist/openpam/CREDITS				delete
dist/openpam/HISTORY				delete
dist/openpam/INSTALL				delete
dist/openpam/LICENSE				delete
dist/openpam/Makefile.am			delete
dist/openpam/Makefile.in			delete
dist/openpam/README				delete
dist/openpam/RELNOTES				delete
dist/openpam/aclocal.m4				delete
dist/openpam/autogen.sh				delete
dist/openpam/bin/Makefile.am			delete
dist/openpam/bin/Makefile.in			delete
dist/openpam/bin/su/Makefile.am			delete
dist/openpam/bin/su/Makefile.in			delete
dist/openpam/bin/su/su.c			delete
dist/openpam/compile				delete
dist/openpam/config.guess			delete
dist/openpam/config.h.in			delete
dist/openpam/config.sub				delete
dist/openpam/configure				delete
dist/openpam/configure.ac			delete
dist/openpam/depcomp				delete
dist/openpam/doc/Makefile.am			delete
dist/openpam/doc/Makefile.in			delete
dist/openpam/doc/man/Makefile.am		delete
dist/openpam/doc/man/Makefile.in		delete
dist/openpam/doc/man/openpam.3			delete
dist/openpam/doc/man/openpam.man		delete
dist/openpam/doc/man/openpam_borrow_cred.3	delete
dist/openpam/doc/man/openpam_free_data.3	delete
dist/openpam/doc/man/openpam_free_envlist.3	delete
dist/openpam/doc/man/openpam_get_option.3	delete
dist/openpam/doc/man/openpam_log.3		delete
dist/openpam/doc/man/openpam_nullconv.3		delete
dist/openpam/doc/man/openpam_readline.3		delete
dist/openpam/doc/man/openpam_restore_cred.3	delete
dist/openpam/doc/man/openpam_set_option.3	delete
dist/openpam/doc/man/openpam_ttyconv.3		delete
dist/openpam/doc/man/pam.3			delete
dist/openpam/doc/man/pam.conf.5			delete
dist/openpam/doc/man/pam.man			delete
dist/openpam/doc/man/pam_acct_mgmt.3		delete
dist/openpam/doc/man/pam_authenticate.3		delete
dist/openpam/doc/man/pam_chauthtok.3		delete
dist/openpam/doc/man/pam_close_session.3	delete
dist/openpam/doc/man/pam_conv.3			delete
dist/openpam/doc/man/pam_end.3			delete
dist/openpam/doc/man/pam_error.3		delete
dist/openpam/doc/man/pam_get_authtok.3		delete
dist/openpam/doc/man/pam_get_data.3		delete
dist/openpam/doc/man/pam_get_item.3		delete
dist/openpam/doc/man/pam_get_user.3		delete
dist/openpam/doc/man/pam_getenv.3		delete
dist/openpam/doc/man/pam_getenvlist.3		delete
dist/openpam/doc/man/pam_info.3			delete
dist/openpam/doc/man/pam_open_session.3		delete
dist/openpam/doc/man/pam_prompt.3		delete
dist/openpam/doc/man/pam_putenv.3		delete
dist/openpam/doc/man/pam_set_data.3		delete
dist/openpam/doc/man/pam_set_item.3		delete
dist/openpam/doc/man/pam_setcred.3		delete
dist/openpam/doc/man/pam_setenv.3		delete
dist/openpam/doc/man/pam_sm_acct_mgmt.3		delete
dist/openpam/doc/man/pam_sm_authenticate.3	delete
dist/openpam/doc/man/pam_sm_chauthtok.3		delete
dist/openpam/doc/man/pam_sm_close_session.3	delete
dist/openpam/doc/man/pam_sm_open_session.3	delete
dist/openpam/doc/man/pam_sm_setcred.3		delete
dist/openpam/doc/man/pam_start.3		delete
dist/openpam/doc/man/pam_strerror.3		delete
dist/openpam/doc/man/pam_verror.3		delete
dist/openpam/doc/man/pam_vinfo.3		delete
dist/openpam/doc/man/pam_vprompt.3		delete
dist/openpam/include/Makefile.am		delete
dist/openpam/include/Makefile.in		delete
dist/openpam/include/security/Makefile.am	delete
dist/openpam/include/security/Makefile.in	delete
dist/openpam/include/security/openpam.h		delete
dist/openpam/include/security/openpam_attr.h	delete
dist/openpam/include/security/openpam_version.h	delete
dist/openpam/include/security/pam_appl.h	delete
dist/openpam/include/security/pam_constants.h	delete
dist/openpam/include/security/pam_modules.h	delete
dist/openpam/include/security/pam_types.h	delete
dist/openpam/install-sh				delete
dist/openpam/lib/Makefile.am			delete
dist/openpam/lib/Makefile.in			delete
dist/openpam/lib/openpam_borrow_cred.c		delete
dist/openpam/lib/openpam_configure.c		delete
dist/openpam/lib/openpam_dispatch.c		delete
dist/openpam/lib/openpam_dynamic.c		delete
dist/openpam/lib/openpam_findenv.c		delete
dist/openpam/lib/openpam_free_data.c		delete
dist/openpam/lib/openpam_free_envlist.c		delete
dist/openpam/lib/openpam_get_option.c		delete
dist/openpam/lib/openpam_impl.h			delete
dist/openpam/lib/openpam_load.c			delete
dist/openpam/lib/openpam_log.c			delete
dist/openpam/lib/openpam_nullconv.c		delete
dist/openpam/lib/openpam_readline.c		delete
dist/openpam/lib/openpam_restore_cred.c		delete
dist/openpam/lib/openpam_set_option.c		delete
dist/openpam/lib/openpam_static.c		delete
dist/openpam/lib/openpam_ttyconv.c		delete
dist/openpam/lib/pam_acct_mgmt.c		delete
dist/openpam/lib/pam_authenticate.c		delete
dist/openpam/lib/pam_authenticate_secondary.c	delete
dist/openpam/lib/pam_chauthtok.c		delete
dist/openpam/lib/pam_close_session.c		delete
dist/openpam/lib/pam_end.c			delete
dist/openpam/lib/pam_error.c			delete
dist/openpam/lib/pam_get_authtok.c		delete
dist/openpam/lib/pam_get_data.c			delete
dist/openpam/lib/pam_get_item.c			delete
dist/openpam/lib/pam_get_mapped_authtok.c	delete
dist/openpam/lib/pam_get_mapped_username.c	delete
dist/openpam/lib/pam_get_user.c			delete
dist/openpam/lib/pam_getenv.c			delete
dist/openpam/lib/pam_getenvlist.c		delete
dist/openpam/lib/pam_info.c			delete
dist/openpam/lib/pam_open_session.c		delete
dist/openpam/lib/pam_prompt.c			delete
dist/openpam/lib/pam_putenv.c			delete
dist/openpam/lib/pam_set_data.c			delete
dist/openpam/lib/pam_set_item.c			delete
dist/openpam/lib/pam_set_mapped_authtok.c	delete
dist/openpam/lib/pam_set_mapped_username.c	delete
dist/openpam/lib/pam_setcred.c			delete
dist/openpam/lib/pam_setenv.c			delete
dist/openpam/lib/pam_sm_acct_mgmt.c		delete
dist/openpam/lib/pam_sm_authenticate.c		delete
dist/openpam/lib/pam_sm_authenticate_secondary.c delete
dist/openpam/lib/pam_sm_chauthtok.c		delete
dist/openpam/lib/pam_sm_close_session.c		delete
dist/openpam/lib/pam_sm_get_mapped_authtok.c	delete
dist/openpam/lib/pam_sm_get_mapped_username.c	delete
dist/openpam/lib/pam_sm_open_session.c		delete
dist/openpam/lib/pam_sm_set_mapped_authtok.c	delete
dist/openpam/lib/pam_sm_set_mapped_username.c	delete
dist/openpam/lib/pam_sm_setcred.c		delete
dist/openpam/lib/pam_start.c			delete
dist/openpam/lib/pam_strerror.c			delete
dist/openpam/lib/pam_verror.c			delete
dist/openpam/lib/pam_vinfo.c			delete
dist/openpam/lib/pam_vprompt.c			delete
dist/openpam/ltmain.sh				delete
dist/openpam/misc/gendoc.pl			delete
dist/openpam/missing				delete
dist/openpam/modules/Makefile.am		delete
dist/openpam/modules/Makefile.in		delete
dist/openpam/modules/pam_deny/Makefile.am	delete
dist/openpam/modules/pam_deny/Makefile.in	delete
dist/openpam/modules/pam_deny/pam_deny.c	delete
dist/openpam/modules/pam_permit/Makefile.am	delete
dist/openpam/modules/pam_permit/Makefile.in	delete
dist/openpam/modules/pam_permit/pam_permit.c	delete
dist/openpam/modules/pam_unix/Makefile.am	delete
dist/openpam/modules/pam_unix/Makefile.in	delete
dist/openpam/modules/pam_unix/pam_unix.c	delete

	openpam moved to external/bsd, remove old sources.
	[tron, ticket #20]

sys/dev/raidframe/rf_reconmap.c			1.34
sys/dev/raidframe/rf_reconstruct.c		1.118

	Handle RAID5_RS correctly.
	[oster, ticket #23]

sys/arch/xen/xen/if_xennet_xenbus.c		1.59

	Resolve network issue with NetBSD domU on newer Linux dom0.
	[bouyer, ticket #33]

