# $NetBSD: CHANGES-6.0,v 1.1.2.11 2012/02/22 19:08:36 riz Exp $

A complete list of changes from the initial NetBSD 6.0 branch on 15 Feb 2012
until the 6.0 release:

gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 6.0_BETA!

sys/conf/osrelease.sh				1.121

	Don't eat _BETA or other textual tags after the version.
	[christos, ticket #3]

UPDATING					1.235
etc/daily					1.81
etc/weekly					1.26

	Run makemandb with the normal 022 umask, not the restrictive 077.
	[joerg, ticket #2]

distrib/amd64/kmod/Makefile			1.2
distrib/common/Makefile.distrib			1.9
distrib/i386/kmod/Makefile			1.11
distrib/sets/sets.subr				1.136
share/mk/bsd.kmodule.mk				1.34
sys/conf/osrelease.sh				1.122

	Reconcile the various methods of telling what kernel version
	modules are for.
	[christos, ticket #6]

etc/man.conf					1.30
external/bsd/mdocml/Makefile.inc		1.15
external/bsd/mdocml/dist/mandoc.h		1.2
external/bsd/mdocml/dist/read.c			1.6
usr.sbin/makemandb/Makefile			1.2
usr.sbin/makemandb/apropos.1			1.3
usr.sbin/makemandb/apropos.c			1.5
usr.sbin/makemandb/makemandb.c			1.3-1.5

	Various fixes for apropos(1) to restore functionality (including
	compressed man page support) which had been there prior
	to importing the new version.
	[joerg, ticket #4]

share/mk/bsd.README				1.293
share/mk/bsd.own.mk				1.697

	Derive MANINSTALL from MKCATPAGES and MKHTML.
	[joerg, ticket #5]

doc/3RDPARTY								patch
doc/CHANGES								patch
external/ibm-public/postfix/dist/HISTORY				patch
external/ibm-public/postfix/dist/mantools/get_anchors.pl		patch
external/ibm-public/postfix/dist/src/bounce/bounce_trace_service.c	patch
external/ibm-public/postfix/dist/src/global/dict_ldap.c			patch
external/ibm-public/postfix/dist/src/global/dict_sqlite.c		patch
external/ibm-public/postfix/dist/src/global/mail_version.h		patch
external/ibm-public/postfix/dist/src/global/maps.c			patch
external/ibm-public/postfix/dist/src/local/mailbox.c			patch
external/ibm-public/postfix/dist/src/local/unknown.c			patch
external/ibm-public/postfix/dist/src/tlsproxy/tlsproxy.c		patch
external/ibm-public/postfix/dist/src/util/dict.c			patch
external/ibm-public/postfix/dist/src/xsasl/xsasl_dovecot_server.c	patch

	Import Postfix 2.8.8.
	[tron, ticket #7]
	
usr.sbin/postinstall/postinstall		1.130

	Add "pwd_mkdb" item, which checks whether /etc/pwd.db is in the
	new format, and runs "pwd_mkdb -V 1 /etc/master.passwd" to fix it.
	[apb, ticket #9]

usr.sbin/postinstall/postinstall		1.131

	Use msg for indentation.
	[apb, ticket #10]

sys/dev/usb/if_udav.c				1.35
sys/dev/usb/usbdevs				1.608
sys/dev/usb/usbdevs.h				regen
sys/dev/usb/usbdevs_data.h			regen

	Add support for the QUAN DM9601.
	[mbalmer, ticket #11]

sys/dev/usb/umidi.c				1.60

	Fix the reversed logic in several uses of the new 'closing'
	member introduced in the previous change. From PR 45909.
	[mrg, ticket #12]

doc/3RDPARTY						patch
doc/CHANGES						patch
external/bsd/pkg_install/dist/add/perform.c		patch
external/bsd/pkg_install/dist/delete/pkg_delete.c	patch
external/bsd/pkg_install/dist/lib/license.c		patch
external/bsd/pkg_install/dist/lib/opattern.c		patch
external/bsd/pkg_install/dist/lib/pkg_summary.5		patch
external/bsd/pkg_install/dist/lib/version.h		patch

	Update "pkg_install" to version 20120128:
	- pkg_install 20120128:
	  - Explicitly stat(2) if mkdir failed. errno detection
	    doesn't work e.g.  on Solaris.
	  - Provide a stable order for package names that only differ
	    in the base name, not the version number.
	- pkg_install 20110805:
	  - Fix for pkg_delete on NFS from Anthony Mallet.
	[tron, ticket #13]

include/spawn.h					1.2
sys/kern/kern_exec.c				1.341
sys/uvm/uvm_glue.c				1.157
tests/lib/libc/gen/posix_spawn/t_fileactions.c	1.3

	posix_spawn: fix kernel bug when passing empty fileactions
	(PR kern/46038)	and add a test case for this. Fix potential
	race condition, doublefreeing of memory and memory leaks in
	error cases.
	[martin, ticket #14]

usr.sbin/makemandb/apropos.1			1.4
usr.sbin/makemandb/makemandb.8			1.2
usr.sbin/makemandb/whatis.c			1.3

	Add reference to whatis(1).
	SQLite doesn't use the FTS index for equal ops, so force it
	to do a FTS search first. Drops run time by a factor of 6
	for "whatis man".
	[joerg, ticket #15]

sys/sys/cdefs.h					1.90

	Fix __restricted expansion for C++ programs.
	[martin, ticket #16]

sys/kern/kern_exec.c				1.342-344

	Various posix_spawn fixes.
	[martin, ticket #17]

sys/arch/macppc/stand/ofwboot/boot.c		1.27
sys/arch/macppc/stand/ofwboot/boot.h		1.4
sys/arch/macppc/stand/ofwboot/ofdev.c		1.26

	Fix boot failure on OF 2.0 machines.
	[tsutsui, ticket #22]

sys/arch/xen/include/hypervisor.h		1.38
sys/arch/xen/xen/clock.c			1.62
sys/arch/xen/xen/hypervisor.c			1.61

	Fix Xen 3.0 support and other Xen hypervisor-version-specific
	fixes.  PR#45961.
	[bouyer, ticket #28]

sys/arch/x86/include/cpu.h			1.48
sys/arch/x86/include/pmap.h			1.50
sys/arch/x86/x86/cpu.c				1.97
sys/arch/x86/x86/pmap.c				1.165,167-168
sys/arch/xen/include/hypervisor.h		1.37
sys/arch/xen/include/intr.h			1.34
sys/arch/xen/x86/cpu.c				1.81-82
sys/arch/xen/x86/x86_xpmap.c			1.39
sys/arch/xen/x86/xen_ipi.c			1.10
sys/arch/xen/x86/xen_pmap.c			1.17
sys/uvm/uvm_km.c				1.122
sys/uvm/uvm_kmguard.c				1.10
sys/uvm/uvm_map.c				1.315

	Xen MP stability fixes, including a problem initially reported in
	PR port-xen/45975
	[bouyer, ticket #29]

sys/arch/x86/x86/pmap.c				1.166
sys/arch/xen/x86/cpu.c				1.83

	Get rid of "mapping already present" log messages.
	[bouyer, ticket #31]

sys/arch/i386/i386/machdep.c			1.719

	Fix FPU corruption occasionally reported on Xen/MP systems.
	[bouyer, ticket #32]

