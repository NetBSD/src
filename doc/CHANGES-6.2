# $NetBSD: CHANGES-6.2,v 1.1.2.30 2013/08/08 21:59:43 snj Exp $

A complete list of changes from the 6.1 release until the 6.2 release:

doc/README.files				patched by hand
gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 6.1_STABLE!

sys/dev/usb/usb_quirks.c			1.78
sys/dev/usb/usbdevs				1.639
sys/dev/usb/usbdevs.h				regen
sys/dev/usb/usbdevs_data.h			regen

	Fix the detection of the tripplite USB SMARTLCD UPS.
	[garbled, ticket #849]

sys/dev/usb/usb.h				1.101-1.103

	Add some defines and macros.
	[skrll, ticket #850]

crypto/external/bsd/heimdal/bin/krb5-config/Makefile 1.2

	Don't force pthread linkage.
	[joerg, ticket #871]

external/gpl2/xcvs/Makefile.inc				patch
external/gpl2/xcvs/bin/xcvs/Makefile			patch
external/gpl2/xcvs/dist/INSTALL				patch
external/gpl2/xcvs/dist/Makefile.am			patch
external/gpl2/xcvs/dist/Makefile.in			patch
external/gpl2/xcvs/dist/aclocal.m4			patch
external/gpl2/xcvs/dist/config.h.in			patch
external/gpl2/xcvs/dist/configure			patch
external/gpl2/xcvs/dist/configure.in			patch
external/gpl2/xcvs/dist/acl/COPYING			patch
external/gpl2/xcvs/dist/acl/COPYING.LIB			patch
external/gpl2/xcvs/dist/acl/INSTALL			patch
external/gpl2/xcvs/dist/acl/README			patch
external/gpl2/xcvs/dist/acl/aclconfig.default		patch
external/gpl2/xcvs/dist/build-aux/compile		patch
external/gpl2/xcvs/dist/build-aux/config.guess		patch
external/gpl2/xcvs/dist/build-aux/config.sub		patch
external/gpl2/xcvs/dist/build-aux/depcomp		patch
external/gpl2/xcvs/dist/build-aux/install-sh		patch
external/gpl2/xcvs/dist/build-aux/mdate-sh		patch
external/gpl2/xcvs/dist/build-aux/missing		patch
external/gpl2/xcvs/dist/build-aux/mkinstalldirs		patch
external/gpl2/xcvs/dist/build-aux/texinfo.tex		patch
external/gpl2/xcvs/dist/build-aux/ylwrap		patch
external/gpl2/xcvs/dist/contrib/Makefile.in		patch
external/gpl2/xcvs/dist/contrib/pam/Makefile.in		patch
external/gpl2/xcvs/dist/diff/Makefile.in		patch
external/gpl2/xcvs/dist/diff/diff3.c			patch
external/gpl2/xcvs/dist/diff/util.c			patch
external/gpl2/xcvs/dist/doc/Makefile.in			patch
external/gpl2/xcvs/dist/doc/i18n/Makefile.in		patch
external/gpl2/xcvs/dist/doc/i18n/pt_BR/Makefile.in	patch
external/gpl2/xcvs/dist/lib/Makefile.in			patch
external/gpl2/xcvs/dist/lib/vasnprintf.c		patch
external/gpl2/xcvs/dist/m4/chdir-long.m4		patch
external/gpl2/xcvs/dist/m4/extensions.m4		patch
external/gpl2/xcvs/dist/m4/glibc2.m4			patch
external/gpl2/xcvs/dist/m4/glibc21.m4			patch
external/gpl2/xcvs/dist/m4/intdiv0.m4			patch
external/gpl2/xcvs/dist/m4/intmax.m4			patch
external/gpl2/xcvs/dist/m4/inttypes-pri.m4		patch
external/gpl2/xcvs/dist/m4/isc-posix.m4			patch
external/gpl2/xcvs/dist/m4/lcmessage.m4			patch
external/gpl2/xcvs/dist/m4/printf-posix.m4		patch
external/gpl2/xcvs/dist/m4/strftime.m4			patch
external/gpl2/xcvs/dist/maint-aux/Makefile.in		patch
external/gpl2/xcvs/dist/man/Makefile.in			patch
external/gpl2/xcvs/dist/src/Makefile.am			patch
external/gpl2/xcvs/dist/src/Makefile.in			patch
external/gpl2/xcvs/dist/src/acl.c			patch
external/gpl2/xcvs/dist/src/add.c			patch
external/gpl2/xcvs/dist/src/admin.c			patch
external/gpl2/xcvs/dist/src/annotate.c			patch
external/gpl2/xcvs/dist/src/commit.c			patch
external/gpl2/xcvs/dist/src/cvs.h			patch
external/gpl2/xcvs/dist/src/diff.c			patch
external/gpl2/xcvs/dist/src/error.c			patch
external/gpl2/xcvs/dist/src/filesubr.c			patch
external/gpl2/xcvs/dist/src/import.c			patch
external/gpl2/xcvs/dist/src/lock.c			patch
external/gpl2/xcvs/dist/src/log.c			patch
external/gpl2/xcvs/dist/src/logmsg.c			patch
external/gpl2/xcvs/dist/src/ls.c			patch
external/gpl2/xcvs/dist/src/main.c			patch
external/gpl2/xcvs/dist/src/mkmodules.c			patch
external/gpl2/xcvs/dist/src/parseinfo.c			patch
external/gpl2/xcvs/dist/src/parseinfo.h			patch
external/gpl2/xcvs/dist/src/patch.c			patch
external/gpl2/xcvs/dist/src/rcs.c			patch
external/gpl2/xcvs/dist/src/recurse.c			patch
external/gpl2/xcvs/dist/src/remove.c			patch
external/gpl2/xcvs/dist/src/sanity.sh			patch
external/gpl2/xcvs/dist/src/server.c			patch
external/gpl2/xcvs/dist/src/status.c			patch
external/gpl2/xcvs/dist/src/subr.c			patch
external/gpl2/xcvs/dist/src/tag.c			patch
external/gpl2/xcvs/dist/src/update.c			patch
external/gpl2/xcvs/dist/src/version.c			patch
external/gpl2/xcvs/lib/libcvs/Makefile			patch
external/gpl2/xcvs/lib/libdiff/Makefile			patch
gnu/usr.bin/rcs/lib/Makefile				patch
gnu/usr.bin/rcs/lib/rcsbase.h				patch
gnu/usr.bin/rcs/lib/rcssyn.c				patch
gnu/usr.bin/rcs/rlog/Makefile				patch
gnu/usr.bin/rcs/rlog/rlog.1				patch
gnu/usr.bin/rcs/rlog/rlog.c				patch

	Update CVS for setuid fixes, acl support, pathname resolution
	fixes.  Update RCS to handle CVS changes.
	[christos, ticket #889]

sys/arch/amiga/dev/if_ne_zbus.c			1.15

	Fix kernel panic on Amigas with Deneb cards.
	[rkujawa, ticket #892]

xsrc/external/mitMesaLib/dist/src/glx/XF86dri.c		patch
xsrc/external/mitlibFS/dist/src/FSOpenServ.c		patch
xsrc/external/mitlibX11/dist/modules/im/ximcp/Makefile.am patch
xsrc/external/mitlibX11/dist/modules/im/ximcp/imLcPrs.c	patch
xsrc/external/mitlibX11/dist/modules/im/ximcp/imTrX.c	patch
xsrc/external/mitlibX11/dist/src/AllCells.c		patch
xsrc/external/mitlibX11/dist/src/Font.c			patch
xsrc/external/mitlibX11/dist/src/FontInfo.c		patch
xsrc/external/mitlibX11/dist/src/FontNames.c		patch
xsrc/external/mitlibX11/dist/src/GetFPath.c		patch
xsrc/external/mitlibX11/dist/src/GetImage.c		patch
xsrc/external/mitlibX11/dist/src/GetMoEv.c		patch
xsrc/external/mitlibX11/dist/src/GetPntMap.c		patch
xsrc/external/mitlibX11/dist/src/GetProp.c		patch
xsrc/external/mitlibX11/dist/src/LiHosts.c		patch
xsrc/external/mitlibX11/dist/src/ListExt.c		patch
xsrc/external/mitlibX11/dist/src/ModMap.c		patch
xsrc/external/mitlibX11/dist/src/Xrm.c			patch
xsrc/external/mitlibX11/dist/src/xcms/cmsColNm.c	patch
xsrc/external/mitlibX11/dist/src/xkb/XKBExtDev.c	patch
xsrc/external/mitlibX11/dist/src/xkb/XKBGeom.c		patch
xsrc/external/mitlibX11/dist/src/xkb/XKBGetMap.c	patch
xsrc/external/mitlibX11/dist/src/xkb/XKBNames.c		patch
xsrc/external/mitlibXcursor/dist/src/file.c		patch
xsrc/external/mitlibXext/dist/src/XEVI.c		patch
xsrc/external/mitlibXext/dist/src/XShape.c		patch
xsrc/external/mitlibXext/dist/src/XSync.c		patch
xsrc/external/mitlibXext/dist/src/Xcup.c		patch
xsrc/external/mitlibXext/dist/src/Xdbe.c		patch
xsrc/external/mitlibXfixes/dist/src/Cursor.c		patch
xsrc/external/mitlibXi/dist/src/XGMotion.c		patch
xsrc/external/mitlibXi/dist/src/XGetBMap.c		patch
xsrc/external/mitlibXi/dist/src/XGetDCtl.c		patch
xsrc/external/mitlibXi/dist/src/XGetDProp.c		patch
xsrc/external/mitlibXi/dist/src/XGetFCtl.c		patch
xsrc/external/mitlibXi/dist/src/XGetProp.c		patch
xsrc/external/mitlibXi/dist/src/XIPassiveGrab.c		patch
xsrc/external/mitlibXi/dist/src/XIProperties.c		patch
xsrc/external/mitlibXi/dist/src/XISelEv.c		patch
xsrc/external/mitlibXi/dist/src/XListDev.c		patch
xsrc/external/mitlibXi/dist/src/XQueryDv.c		patch
xsrc/external/mitlibXinerama/dist/src/Xinerama.c	patch
xsrc/external/mitlibXrandr/dist/src/XrrProperty.c	patch
xsrc/external/mitlibXrender/dist/src/Filter.c		patch
xsrc/external/mitlibXrender/dist/src/Xrender.c		patch
xsrc/external/mitlibXres/dist/src/XRes.c		patch
xsrc/external/mitlibXt/dist/src/ResConfig.c		patch
xsrc/external/mitlibXt/dist/src/Selection.c		patch
xsrc/external/mitlibXv/dist/src/Xv.c			patch
xsrc/external/mitlibXvMC/dist/src/XvMC.c		patch
xsrc/external/mitlibXxf86dga/dist/src/XF86DGA2.c	patch
xsrc/external/mitlibXxf86vm/dist/src/XF86VMode.c	patch
xsrc/external/mitlibxcb/dist/src/xcb_in.c		patch
xsrc/external/mitxf86-video-openchrome/dist/libxvmc/xf86dri.c patch

	Fix protocol handling issues in X client libraries.
	[mrg, ticket #900]

external/mit/xorg/lib/libX11/Makefile.libx11	1.11 via patch

	hack for old gcc.
	[mrg, ticket #901]

external/mit/xorg/lib/libXi/Makefile		1.10

	fix vax build issues - GCC 4.1 warns about always true comparisons
	more than GCC 4.5 does.
	[mrg, ticket #902]

sys/arch/sparc64/dev/tda.c			1.7-1.8
share/man/man4/man4.sparc64/tda.4		1.1-1.3
share/man/man4/man4.sparc64/Makefile		1.7
distrib/sets/lists/man/mi			1.1419

	Add sysmon support to display the CPU and Sytem fan speeds for the
	tda driver.  Add a manual page for tda(4).  Fix a bug which caused
	the system fan to always run at full speed.
	[jdc, ticket #893]

sys/fs/nilfs/nilfs_vnops.c			1.22-1.23

	Fix serious file read problem due to not-so-clear VOP_BMAP description.
	Should fix PR 45605.
	[reinoud, ticket #894]

sys/dev/ic/iavc.c				1.10
sys/netisdn/i4b_capi.h				1.6
sys/netisdn/i4b_capi_llif.c			1.6

	Fix signature of capi_ll_control. From Wolfgang Stukenbrock in PR
	kern/47863.
	[martin, ticket #896]

usr.sbin/syslogd/syslogd.c			1.115
usr.sbin/syslogd/syslogd.h			1.4
usr.sbin/syslogd/tls.c				1.11

	PR/47861: Fredrik Pettai: keep track of the address family for each
	socket opened and don't send the a message to the wrong family type.
	[pettai, ticket #897]

sys/dev/pci/if_alc.c				1.7

	Avoid illegal sleeps in the softint routine.
	XXX could probably do better by creating a watchdog thread.
	[mrg, ticket #898]

lib/libm/arch/i387/fenv.c			1.5
lib/libm/arch/x86_64/fenv.c			1.3-1.4

	Fix amd64 feraiseexcept so that it actually traps. The call to fwait
	got lost somewhere along the line; the i387 code has it.
	Fix sense of fegetexcept on x86.
	[riastradh, ticket #899]

usr.sbin/installboot/arch/vax.c			1.16-1.17

	Don't include host's disklabel.h. Fixes cross compile error on
	some environment.
	[martin, ticket #865]
sys/netinet6/ip6_flow.c				1.21

	Clear mbuf's csum_flags in ip6flow_fastforward(). Fixes PR#47849.
	[msaitoh, ticket #895]

tests/lib/libm/t_atan.c				1.4 - 1.7, 1.9 via patch

	Fix test of atan_inf_neg, atan_inf_pos and atan_tan on i386.
	PR port-i386/46108.
	[isaki, ticket #903]

sys/arch/i386/eisa/eisa_machdep.c		1.38

	port-i386/47907: kernel trap when using EISA with I/O APIC on i386
	Patch from Felix Deichmann.
	[uebayasi, ticket #904]

external/gpl3/binutils/dist/ld/emultempl/elf32.em 1.6

	PR 47922: Properly resolve DT_NEEDED entries under sysroot and don't
	accidently try the installed system.
	[joerg, ticket #911]

share/man/man7/sysctl.7				1.73 via patch
sys/netinet6/icmp6.c				1.161 via patch
sys/netinet6/in6.c				1.161 via patch
sys/netinet6/in6_proto.c			1.97 via patch
sys/netinet6/in6_var.h				1.65 via patch
sys/netinet6/ip6_input.c			1.139 via patch
sys/netinet6/ip6_var.h				1.59 via patch
sys/netinet6/nd6.c				1.143 via patch
sys/netinet6/nd6.h				1.57 via patch
sys/netinet6/nd6_rtr.c				1.83,1.84 via patch

	4 new sysctls to avoid ipv6 DoS attacks from OpenBSD.
        Fix potentially uninitialised variable.
	[christos, ticket #905]

sys/dev/pci/pcidevs				1.1145, 1.1147, 1.1150-1.1158
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen

	Pull up pcidevs changes:
	Intel Atom E600 PCI-LPC bridge, adds a watchdog + HPET support.
	Update some Intel LPC devices.
	Change from "3400 USB" to "3400 USB EHCI" for EHCI devices.
	Fix BCM5785F entry. That is not gigabit Ethernet.
	Add ALTIMA AC1003, BROADCOM BCM57782 and BCM57786.
	Add Intel I21[0178] Ethernet.
	Add IDs for Marvell Armada XP. Obtained from Marvell, Semihalf.
	Add some Intel devices from document (Intel 8 Series / C220 Chipset
	Family Platform Controller Hub (PCH) Datasheet).
	Add some Intel devices from datasheets (4th Generation Intel Core
	Processor, Intel Xeon Processor E3-1200 v3).
	Add ATI RADEON_HD7340.
	[msaitoh, ticket #906]

sys/dev/pci/if_wm.c				1.238, 1.244-1.247, 1.249-1.258
sys/dev/pci/if_wmreg.h				1.50-1.51, 1.53
sys/dev/pci/if_wmvar.h				1.15-1.16

	Various fixes to wm(4):
	Add I21[0178] support.
	Fix a bug that wm_attach() may fail on some PCH2 or newer system.
	wm_valid_nvm_bank_detect_ich8lan() misunderstood the NVM's bank
	number. Fixes PR#47878.
	Fix a bug that the check of reset complete fails on Intel 8 series
	with "wm_lan_init_done: lan_init_done failed to complete" message.
	The broken code was used for ICH8, 9... and PCH2.
	The wm_linkintr_gmii() function is called from interrupt. That's
	not tick, so call mii_pollstat() instead of mii_tick().
	Add ECC support for the packet buffer. Only 82571 and I21[78] support
	ECC.
	Fix a bug that wrong semaphore is used in wm_gmii_hv_{read,write}reg.
	Change style, add comments, fix some comments, use macros and
	remove trailing whitespaces.
	[msaitoh, ticket #907]

external/bsd/bind/dist/lib/dns/rdata/generic/keydata_65533.c	patch

	Fix for bind CVE-2013-4854.
	[spz, ticket #924]

usr.sbin/pppd/pppd/sys-bsd.c			1.68

	Add a set_queue_size to avoid more code duplication, and set the queue
	size of all tty fd's, not just the ones that we create (the ones that
	we get passed in too). Fixes my iPhone -> xl2tpd -> pppd VPN from
	corrupting packets with MTU > ~650.
	[christos, ticket #908]

sys/net/route.c					1.127

	Fix creation of arp entries for pppd's proxyarp option. Fixes PR#44032.
	[christos, ticket #909]

sys/kern/subr_disk_mbr.c			1.46

	If the MBR is a protective MBR, don't bother looking at it.
	Fixes PR#47743.
	[matt, ticket #910]

usr.bin/netstat/inet.c				1.102-1.03
usr.bin/netstat/inet6.c				1.61-1.62
usr.bin/netstat/main.c				1.86
usr.bin/netstat/netstat.h			1.47

	Don't use -P as a kmem printer, verify that the address points to a
	pcb first!
	Not all pointers are 64bit - use uintptr_t instead of uint64_t.
	[christos, ticket #912]

share/man/man4/re.4				1.14
sys/dev/ic/rtl8169.c				1.137
sys/dev/ic/rtl81x9reg.h				1.44

	Added support for the Realtek 8168F variant in re(4).
	The manual page was adjusted as well.
	[khorben, ticket #913]

usr.bin/mklocale/mklocaledb.c			1.3

	Swap order of _CITRUS_LC_MONETARY_SYM_INT_N_CS_PRECEDES and
	_CITRUS_LC_MONETARY_SYM_INT_P_SEP_BY_SPACE to match data files.
	[joerg, ticket #914]

sys/miscfs/procfs/procfs_map.c			1.43

	Add a missing vm_map_unlock_read() and uvmspace_free() to the ENOMEM
	error case in procfs_domap()d. Fixes PR#48048.
	[ryo, ticket #917]

etc/MAKEDEV.tmpl				1.166

	Add a makedisk_p12high, used by VAX now after unbumping MAXPARTITIONS
	from 16 down to 12. This fixes install issues on new setups.
	[martin, ticket #919]

src/doc/3RDPARTY				1.1040 via patch
src/share/zoneinfo/africa			1.1.1.35 via patch
src/share/zoneinfo/asia				1.1.1.60 via patch
src/share/zoneinfo/australasia			1.32 via patch
src/share/zoneinfo/europe			1.1.1.50 via patch
src/share/zoneinfo/iso3166.tab			1.1.1.21 via patch
src/share/zoneinfo/southamerica			1.1.1.55 via patch
src/share/zoneinfo/zone.tab			1.1.1.45 via patch

	Import tzdata2013d.
	Changes for Morocco, Israel, Antarctica, metadata and documentation.
	[apb, ticket #915]

sys/dev/pci/if_wm.c				1.259-1.262
sys/dev/pci/if_wmreg.h				1.54

	Various fixes to wm(4):
	  Fix "MDIC write error" bug for 82574 and 82583.
	  Sync some functions with FreeBSD to make IPMI/ASF stable.
	  Move EEPROM-related calls to after identifying the EEPPROM.
	  Fix another NVM bank detect problem.
	[msaitoh, ticket #918]

sys/common/pmap/tlb/pmap_tlb.c			patch

	Add missing "))". This patch fixes PR#46371.
	[msaitoh, ticket #920]

sys/net/if_mpls.c				1.9

	Stop abusing kmem during softint context to prevent panic.
	[kefren, ticket #921]

tests/lib/libc/sys/t_msgrcv.c			1.3
lib/libc/sys/msgrcv.2				1.21-1.22
lib/libc/sys/msgsnd.2				1.19-1.20

	Fix msgsz confusion.
	[skrll, ticket #922]

lib/libperfuse/ops.c				1.61-1.62

	One more explicit error log, and two bug fixes
	1) with recent FUSE, when lookup returns a null ino, it means ENOENT
	2) odd corner case that caused a bug on dd if=test of=test conv=notrunc
	   This caused the file to be open first ro, then rw. A logic bug in
	   perfuse_node_open caused it to skip the second operation, whereas
	   it should open for writing, and store the write FH without touching
	   the read FH.
	Catch open without FREAD|FWRITE (it should not happen)
	[manu, ticket #923]

lib/libc/nameser/ns_samedomain.c		1.7-1.8
lib/libresolv/Makefile 				1.12
lib/libresolv/dst_api.c				1.1-1.3
lib/libresolv/dst_internal.h			1.1-1.2
lib/libresolv/hmac_link.c			1.1-1.2
lib/libresolv/ns_date.c				1.1
lib/libresolv/ns_sign.c				1.1
lib/libresolv/ns_verify.c			1.1-1.2
lib/libresolv/res_findzonecut.c			1.1
lib/libresolv/res_mkupdate.c			1.1-1.2
lib/libresolv/res_mkupdate.h			1.1
lib/libresolv/res_private.h			1.1
lib/libresolv/res_sendsigned.c			1.1
lib/libresolv/res_update.c			1.1
lib/libresolv/support.c				1.1
include/res_update.h				1.8

	Restore libresolv missing bits, including NS updates.
	[manu, ticket #887]

sys/kern/uipc_socket.c				1.216
	Fix an inversion in checking for authorization to drop TCP connections
	found (and the obvious fix suggested) by Sander Bos.
	[spz, ticket #927]

sys/dev/pci/pcireg.h		1.74-1.82 and 1.84 via patch
sys/dev/pci/pci_subr.c		1.92-1.102, 1.104-1.105 via patch

	Add some PCI(e) register and bit definitions in pcireg.h.
	Fix the definition of PCI_PCIE_SLCAP_PSN.
	Fix a bug that IRQ(MSI) bits in PCIe capability register is incorrectly
	decoded.
	Print more registers in "pcictl dump".
	Fix bug in comment.
	[msaitoh, ticket #928]

sys/netinet6/nd6_rtr.c				1.86

	Avoid crash destroying tap0 after deleting its link-local address.
	PR/47576.
	[msaitoh, ticket #926]

