# $NetBSD: CHANGES-6.1.6,v 1.1.2.11 2014/12/02 22:23:44 snj Exp $

A complete list of changes from the NetBSD 6.1.5 release to the NetBSD 6.1.6
release:

doc/LAST_MINUTE					patched by hand
doc/README.files				patched by hand
gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 6.1.5_PATCH.
	[snj]

sys/compat/freebsd/freebsd_sysctl.c		1.17

	Do not access a userland pointer from kernel space directly, use
	copyin() instead, avoiding a crash.
	[maxv, ticket #1168]

crypto/external/bsd/openssl/dist/CHANGES	patch
crypto/external/bsd/openssl/dist/Configure	patch
crypto/external/bsd/openssl/dist/Makefile	patch
crypto/external/bsd/openssl/dist/NEWS		patch
crypto/external/bsd/openssl/dist/README		patch
crypto/external/bsd/openssl/dist/e_os.h		patch
crypto/external/bsd/openssl/dist/makevms.com	patch
crypto/external/bsd/openssl/dist/openssl.spec	patch
crypto/external/bsd/openssl/dist/apps/makeapps.com patch
crypto/external/bsd/openssl/dist/apps/s_client.c patch
crypto/external/bsd/openssl/dist/crypto/LPdir_vms.c patch
crypto/external/bsd/openssl/dist/crypto/LPdir_win.c patch
crypto/external/bsd/openssl/dist/crypto/Makefile patch
crypto/external/bsd/openssl/dist/crypto/crypto-lib.com patch
crypto/external/bsd/openssl/dist/crypto/ebcdic.h patch
crypto/external/bsd/openssl/dist/crypto/install-crypto.com patch
crypto/external/bsd/openssl/dist/crypto/opensslconf.h patch
crypto/external/bsd/openssl/dist/crypto/opensslv.h patch
crypto/external/bsd/openssl/dist/crypto/ossl_typ.h patch
crypto/external/bsd/openssl/dist/crypto/aes/asm/aesni-x86_64.pl patch
crypto/external/bsd/openssl/dist/crypto/asn1/a_strex.c patch
crypto/external/bsd/openssl/dist/crypto/bn/bn_exp.c patch
crypto/external/bsd/openssl/dist/crypto/bn/bn_nist.c patch
crypto/external/bsd/openssl/dist/crypto/bn/exptest.c patch
crypto/external/bsd/openssl/dist/crypto/bn/asm/x86_64-gcc.c patch
crypto/external/bsd/openssl/dist/crypto/dsa/dsa_ameth.c patch
crypto/external/bsd/openssl/dist/crypto/ec/ec.h	patch
crypto/external/bsd/openssl/dist/crypto/ec/ec2_smpl.c patch
crypto/external/bsd/openssl/dist/crypto/ec/ec_ameth.c patch
crypto/external/bsd/openssl/dist/crypto/ec/ec_asn1.c patch
crypto/external/bsd/openssl/dist/crypto/ec/ecp_mont.c patch
crypto/external/bsd/openssl/dist/crypto/ec/ecp_nist.c patch
crypto/external/bsd/openssl/dist/crypto/ec/ecp_smpl.c patch
crypto/external/bsd/openssl/dist/crypto/ec/ectest.c patch
crypto/external/bsd/openssl/dist/crypto/err/openssl.ec patch
crypto/external/bsd/openssl/dist/crypto/evp/Makefile patch
crypto/external/bsd/openssl/dist/crypto/evp/e_aes.c patch
crypto/external/bsd/openssl/dist/crypto/evp/evp_enc.c patch
crypto/external/bsd/openssl/dist/crypto/md5/asm/md5-x86_64.pl patch
crypto/external/bsd/openssl/dist/crypto/modes/modes.h patch
crypto/external/bsd/openssl/dist/crypto/ocsp/ocsp_vfy.c patch
crypto/external/bsd/openssl/dist/crypto/pkcs7/pkcs7.h patch
crypto/external/bsd/openssl/dist/crypto/pqueue/pqueue.h patch
crypto/external/bsd/openssl/dist/crypto/rsa/Makefile patch
crypto/external/bsd/openssl/dist/crypto/rsa/rsa.h patch
crypto/external/bsd/openssl/dist/crypto/rsa/rsa_err.c patch
crypto/external/bsd/openssl/dist/crypto/rsa/rsa_oaep.c patch
crypto/external/bsd/openssl/dist/crypto/rsa/rsa_pk1.c patch
crypto/external/bsd/openssl/dist/crypto/rsa/rsa_sign.c patch
crypto/external/bsd/openssl/dist/crypto/stack/safestack.h patch
crypto/external/bsd/openssl/dist/doc/apps/dgst.pod patch
crypto/external/bsd/openssl/dist/doc/crypto/BIO_s_accept.pod patch
crypto/external/bsd/openssl/dist/doc/crypto/EVP_DigestInit.pod patch
crypto/external/bsd/openssl/dist/doc/crypto/EVP_DigestVerifyInit.pod patch
crypto/external/bsd/openssl/dist/doc/crypto/EVP_EncryptInit.pod patch
crypto/external/bsd/openssl/dist/doc/crypto/EVP_PKEY_set1_RSA.pod patch
crypto/external/bsd/openssl/dist/doc/crypto/EVP_PKEY_sign.pod patch
crypto/external/bsd/openssl/dist/doc/ssl/SSL_CTX_set_tmp_dh_callback.pod patch
crypto/external/bsd/openssl/dist/engines/makeengines.com patch
crypto/external/bsd/openssl/dist/ssl/Makefile	patch
crypto/external/bsd/openssl/dist/ssl/d1_both.c	patch
crypto/external/bsd/openssl/dist/ssl/d1_lib.c	patch
crypto/external/bsd/openssl/dist/ssl/d1_srtp.c	patch
crypto/external/bsd/openssl/dist/ssl/dtls1.h	patch
crypto/external/bsd/openssl/dist/ssl/s23_clnt.c	patch
crypto/external/bsd/openssl/dist/ssl/s23_srvr.c	patch
crypto/external/bsd/openssl/dist/ssl/s2_lib.c	patch
crypto/external/bsd/openssl/dist/ssl/s3_cbc.c	patch
crypto/external/bsd/openssl/dist/ssl/s3_clnt.c	patch
crypto/external/bsd/openssl/dist/ssl/s3_enc.c	patch
crypto/external/bsd/openssl/dist/ssl/s3_lib.c	patch
crypto/external/bsd/openssl/dist/ssl/s3_pkt.c	patch
crypto/external/bsd/openssl/dist/ssl/s3_srvr.c	patch
crypto/external/bsd/openssl/dist/ssl/srtp.h	patch
crypto/external/bsd/openssl/dist/ssl/ssl-lib.com patch
crypto/external/bsd/openssl/dist/ssl/ssl.h	patch
crypto/external/bsd/openssl/dist/ssl/ssl3.h	patch
crypto/external/bsd/openssl/dist/ssl/ssl_err.c	patch
crypto/external/bsd/openssl/dist/ssl/ssl_lib.c	patch
crypto/external/bsd/openssl/dist/ssl/t1_enc.c	patch
crypto/external/bsd/openssl/dist/ssl/t1_lib.c	patch
crypto/external/bsd/openssl/dist/ssl/tls1.h	patch
crypto/external/bsd/openssl/dist/test/Makefile	patch
crypto/external/bsd/openssl/dist/test/maketests.com patch
crypto/external/bsd/openssl/dist/test/tests.com	patch
crypto/external/bsd/openssl/dist/test/testssl	patch
crypto/external/bsd/openssl/dist/util/mk1mf.pl	patch
crypto/external/bsd/openssl/dist/util/mkdef.pl	patch
crypto/external/bsd/openssl/dist/util/ssleay.num patch

	Update OpenSSL to 1.0.1j.  Changes:
	  o Fix for CVE-2014-3513
	  o Fix for CVE-2014-3567
	  o Mitigation for CVE-2014-3566 (SSL protocol vulnerability)
	  o Fix for CVE-2014-3568
	[spz, ticket #1170]

usr.bin/ftp/fetch.c				1.206 via patch

	Don't pay attention to special characters if they don't come
	from the command line.
	[christos, ticket #1175]

usr.bin/ftp/version.h				1.85

	Change the version that ftp announces to 20141026. It can be a
	useful method to determine if CVE-2014-8517 is fixed.
	[lukem, ticket #1180]

sys/altq/altq_jobs.c				1.7
sys/dev/ic/oosiop.c				1.14
sys/dev/qbus/if_qe.c				1.73
sys/dev/rasops/rasops.c				1.72
sys/dev/vme/if_ie_vme.c				1.31
sys/net/if_gre.c				1.160

	Fix resource leask in miscellaneous error branches noted by maxv@.
	[riastradh, ticket #1117]

sys/kern/kern_rndpool.c				1.7
sys/kern/kern_rndq.c				1.27

	"buf" and "done" is not guaranteed to be aligned; don't *(uint32_t *)
	it.
	[riastradh, ticket #1118]

sys/arch/sparc/dev/fd.c				1.155
sys/arch/sparc64/dev/fdc.c			1.42
sys/arch/sun3/dev/fd.c				1.78

	Fix unexpected memory corruption on opening fd(4).
	[tsutsui, ticket #1139]

crypto/external/bsd/openssh/dist/auth.c		1.9

	For consistency use options.use_dns when getting the canonical
	hostname. [we do the same below for hosts.allow and deny]
	Reported by rudolf.
	[christos, ticket #1169]

sys/netinet/tcp_output.c			1.178

	Avoid stack overflow when SACK and TCP_SIGNATURE are both present.
	Pointed out by Jonathan Looney.
	[christos, ticket #1174]

sys/fs/msdosfs/msdosfs_vfsops.c			1.110 via patch

	- Perform sanity checks not just for GEMDOSFS, but for all FAT devices.
	  This also fixes a division-by-zero bug that could crash the system.
	- Define GEMDOSFS_BSIZE instead of a hard-coded 512 value, and remove
	  'bsize'.
	- Rename 'tmp' to 'BlkPerSec'.
	- Remove 'secsize==0' and added 'secsize<DEV_BSIZE'
	[maxv, ticket #1171]

sys/arch/sparc64/sparc64/machdep.c		1.274 and 1.280

	- avoid sync and unmount after panic.
	- remove vfs_shutdown, we call vfs_sync_all and vfs_unmount* instead.
	- resurrect doshutdownhooks since some drivers still use it
          (eg. sab(4)).
	[nakayama, ticket #1176]

sys/compat/netbsd32/netbsd32_compat_50.c	1.28

	fix multiple mistakes:
	- error from copyout was ignored
	- the wrong size was specified in copyin
	- missing locking.
	[maxv, ticket #1179]

xsrc/external/mit/libXt/dist/src/ResConfig.c	patch

	Fix DEBUG build of libXt.  From Sandro Millien in PR xsrc/48863.
	[snj, ticket #1181]

sys/dev/pci/if_bge.c				1.260 (via patch)

	Set maximum read byte count to 2048 for PCI-X BCM5703/5704 devices.
	For PCI-X BCM5704, set maximum outstanding split transactions to 0.
	This change fixes a serious stability problem on those chips.
	[msaitoh, #1200]

sys/dev/raidframe/raidframevar.h		1.17
sys/dev/raidframe/rf_netbsdkintf.c		1.316
sys/dev/raidframe/rf_reconstruct.c		1.121

	Fix a long-standing bug related to rebooting while a
	reconstruct-to-spare is underway but not yet complete.
	Fixes PR kern/49244.
	[oster, ticket #1194]

doc/3RDPARTY                                    patch
distrib/sets/lists/base/mi                      patch
share/zoneinfo/NEWS                             patch
share/zoneinfo/africa                           patch
share/zoneinfo/asia                             patch
share/zoneinfo/australasia                      patch
share/zoneinfo/backzone                         patch
share/zoneinfo/europe                           patch
share/zoneinfo/leapseconds                      patch
share/zoneinfo/leapseconds.awk                  patch
share/zoneinfo/northamerica                     patch
share/zoneinfo/southamerica                     patch
share/zoneinfo/zone.tab                         patch
share/zoneinfo/zone1970.tab                     patch

        Update tzdata from 2014g to 2014j.  Some of the changes are:
        * A new Zone Pacific/Bougainville, for the part of Papua New Guinea
          that plans to switch from UTC+10 to UTC+11 on 2014-12-28 at 02:00.
        * Changes for Fiji, Belarus, and Turks & Caicos that take effect
          at various times in 2014.
        * Changes to historical data.
        [apb, ticket #1195]

