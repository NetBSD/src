# $NetBSD: CHANGES-5.2.1,v 1.1.2.23 2015/09/15 00:03:37 riz Exp $

A complete list of changes from the NetBSD 5.2 release to the NetBSD 5.2.1
release:

gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 5.2.0_PATCH.
	[riz]

sys/dev/lockstat.c				1.16

	Fix off by one.
	[msaitoh, ticket #1826]

sys/dev/raidframe/rf_driver.c			1.131

	Fix off by one read.
	[msaitoh, ticket #1827]

sys/external/isc/atheros_hal/dist/ah_eeprom_v14.c		patch

	Fix off by one read.
	[msaitoh, ticket #1828]

sys/dev/usb/ubsa_common.c			1.9

	Fix off by one read error.
	[msaitoh, ticket #1830]

sys/external/bsd/drm/dist/shared-core/i915_suspend.c 1.6

	Fix wrong reference to dev_priv->saveSWF1. It was clearly wrong.
	[msaitoh, ticket #1831]

sbin/fsck_ffs/pass1.c				1.50

	Show pass1 SIGINFO output on stderr like other passes, not on stdout.
	[riastradh, ticket #1837]

etc/namedb/root.cache				1.17

	D.ROOT-SERVERS.NET changes IPv4 address.
	[taca, ticket #1839]

gnu/dist/grep/lib/getopt.c			1.2
gnu/dist/grep/lib/regex.c			1.2
gnu/dist/grep/src/ansi2knr.c			1.2
gnu/dist/grep/src/dfa.c				1.3
gnu/dist/grep/src/grep.c			1.14
gnu/dist/grep/src/search.c			1.4

	Change several int variables to size_t, ssize_t, or ptrdiff_t.
	This should fix the bug described in CVE-2012-5667 when an input
	line is so long that its length cannot be stored in an int
	variable.

	[apb, ticket #1838]

sys/external/bsd/ipf/netinet/ip_fil_netbsd.c	1.4 via patch

	Fix off-by-one read error.
	[msaitoh, ticket #1840]

doc/3RDPARTY					patch
share/zoneinfo/africa				patch
share/zoneinfo/antarctica			patch
share/zoneinfo/asia				patch
share/zoneinfo/australasia			patch
share/zoneinfo/europe				patch
share/zoneinfo/northamerica			patch
share/zoneinfo/southamerica			patch
share/zoneinfo/zone.tab				patch
distrib/sets/lists/base/mi			patch

	Merge tzdata2013a and tzdata2013b from
	ftp://ftp.iana.org/tz/releases/tzdata2013a.tar.gz and
	ftp://ftp.iana.org/tz/releases/tzdata2013b.tar.gz .
	Important changes from tzdata2012j to tzdata2013a:
	 Chile's 2013 rules, and we guess rules for 2014 and later, will be
	 the same as 2012, namely Apr Sun>=23 03:00 UTC to
	 Sep Sun>=2 04:00 UTC.
	 New Zones Asia/Khandyga, Asia/Ust-Nera, Europe/Busingen.
	 Many changes affect historical time stamps before 1940.
	Important changes from tzdata2013a to tzdata2013b:
	 Haiti uses US daylight-saving rules this year, and presumably
	 future years.
	 Paraguay will end DST on March 24 this year.
	 Morocco does not observe DST during Ramadan;
	 try to predict Ramadan in Morocco as best we can. 
	[apb, ticket #1854]

share/zoneinfo/antarctica			patch
share/zoneinfo/asia				patch
share/zoneinfo/australasia			patch
share/zoneinfo/southamerica			patch
share/zoneinfo/zone.tab				patch

	Merge tzdata2013c from
	ftp://ftp.iana.org/tz/releases/tzdata2013c.tar.gz
	[apb, ticket #1860]

distrib/utils/sysinst/menus.mi		1.35, 1.43

	Some v6 dns server are outdated, so replace them with google's
	public servers.
	[msaitoh, ticket #1846]

xsrc/external/mit/MesaLib/dist/src/glx/x11/XF86dri.c	patch
xsrc/external/mit/libFS/dist/src/FSOpenServ.c		patch
xsrc/external/mit/libX11/dist/modules/im/ximcp/imLcPrs.c patch
xsrc/external/mit/libX11/dist/modules/im/ximcp/imTrX.c	patch
xsrc/external/mit/libX11/dist/src/AllCells.c		patch
xsrc/external/mit/libX11/dist/src/Font.c		patch
xsrc/external/mit/libX11/dist/src/FontInfo.c		patch
xsrc/external/mit/libX11/dist/src/FontNames.c		patch
xsrc/external/mit/libX11/dist/src/GetFPath.c		patch
xsrc/external/mit/libX11/dist/src/GetImage.c		patch
xsrc/external/mit/libX11/dist/src/GetMoEv.c		patch
xsrc/external/mit/libX11/dist/src/GetPntMap.c		patch
xsrc/external/mit/libX11/dist/src/GetProp.c		patch
xsrc/external/mit/libX11/dist/src/LiHosts.c		patch
xsrc/external/mit/libX11/dist/src/ListExt.c		patch
xsrc/external/mit/libX11/dist/src/ModMap.c		patch
xsrc/external/mit/libX11/dist/src/Xrm.c			patch
xsrc/external/mit/libX11/dist/src/xcms/cmsColNm.c	patch
xsrc/external/mit/libX11/dist/src/xkb/XKBExtDev.c	patch
xsrc/external/mit/libX11/dist/src/xkb/XKBGeom.c		patch
xsrc/external/mit/libX11/dist/src/xkb/XKBGetMap.c	patch
xsrc/external/mit/libX11/dist/src/xkb/XKBNames.c	patch
xsrc/external/mit/libXcursor/dist/src/file.c		patch
xsrc/external/mit/libXext/dist/src/XEVI.c		patch
xsrc/external/mit/libXext/dist/src/XShape.c		patch
xsrc/external/mit/libXext/dist/src/XSync.c		patch
xsrc/external/mit/libXext/dist/src/Xcup.c		patch
xsrc/external/mit/libXext/dist/src/Xdbe.c		patch
xsrc/external/mit/libXfixes/dist/src/Cursor.c		patch
xsrc/external/mit/libXi/dist/src/XGMotion.c		patch
xsrc/external/mit/libXi/dist/src/XGetBMap.c		patch
xsrc/external/mit/libXi/dist/src/XGetDCtl.c		patch
xsrc/external/mit/libXi/dist/src/XGetDProp.c		patch
xsrc/external/mit/libXi/dist/src/XGetFCtl.c		patch
xsrc/external/mit/libXi/dist/src/XGetProp.c		patch
xsrc/external/mit/libXi/dist/src/XListDev.c		patch
xsrc/external/mit/libXi/dist/src/XQueryDv.c		patch
xsrc/external/mit/libXinerama/dist/src/Xinerama.c	patch
xsrc/external/mit/libXrandr/dist/src/XrrProperty.c	patch
xsrc/external/mit/libXrender/dist/src/Filter.c		patch
xsrc/external/mit/libXrender/dist/src/Xrender.c		patch
xsrc/external/mit/libXres/dist/src/XRes.c		patch
xsrc/external/mit/libXt/dist/src/ResConfig.c		patch
xsrc/external/mit/libXt/dist/src/Selection.c		patch
xsrc/external/mit/libXv/dist/src/Xv.c			patch
xsrc/external/mit/libXvMC/dist/src/XvMC.c		patch
xsrc/external/mit/libXxf86dga/dist/src/XF86DGA2.c	patch
xsrc/external/mit/libXxf86vm/dist/src/XF86VMode.c	patch

	Fix protocol handling issues in X client libraries.
	[mrg, ticket #1865]

external/mit/xorg/lib/fontconfig/src/Makefile		patch
external/mit/xorg/lib/libX11/Makefile.libx11		patch
external/mit/xorg/lib/libXi/Makefile			patch

	Silence gcc 4.1 warnings from ticket #1865.
	[mrg, ticket #1866]

etc/MAKEDEV.tmpl				1.161

	The console major number is not always 0.
	[apb, ticket #1848]

sys/dev/fss.c					1.84

	Don't crash when running multiple dump -X. PR#47514.
	[gdt, ticket #1853]
share/man/man4/options.4			1.420

	Fix typo
	[msaitoh, ticket #1862]

external/bsd/bind/dist/lib/dns/rdata/generic/keydata_65533.c	patch

	Fix for bind CVE-2013-4854.
	[spz, ticket #1871]

usr.bin/netstat/inet.c				1.102-1.03
usr.bin/netstat/inet6.c				1.61-1.62
usr.bin/netstat/main.c				1.86
usr.bin/netstat/netstat.h			1.47

	Don't use -P as a kmem printer, verify that the address points to a
	pcb first!
	Not all pointers are 64bit - use uintptr_t instead of uint64_t.
	[christos, ticket #1868]
doc/3RDPARTY							patch
share/zoneinfo/africa						patch
share/zoneinfo/asia						patch
share/zoneinfo/australasia					patch
share/zoneinfo/europe						patch
share/zoneinfo/iso3166.tab					patch
share/zoneinfo/southamerica					patch
share/zoneinfo/zone.tab						patch

	Import tzdata2013d from
	    ftp://ftp.iana.org/tz/releases/tzdata2013d.tar.gz
	Summary of changes from tzdata2013c to tzdata2013d:
	   Changes affecting current and future time stamps:
	     Morocco's midsummer transitions this year are July 7 and August 10,
	     not July 9 and August 8.  (Thanks to Andrew Paprocki.)

	     Israel now falls back on the last Sunday of October.
	     (Thanks to Ephraim Silverberg.)

	   Changes affecting past time stamps:
	     Specify Jerusalem's location more precisely; this changes the
	     pre-1880 times by 2 s.

	   Changing affecting metadata only:
	     Fix typos in the entries for country codes BQ and SX.

	   Changes affecting documentation and commentary:
	     Deemphasize the significance of national borders.

	     Update the zdump man page.

	     Remove obsolete NOID comment (thanks to Denis Excoffier).

	     Update several URLs and comments in the web pages.

	     Spelling fixes (thanks to Kevin Lyda and Jonathan Leffler).

	     Update URL for CLDR Zone->Tzid table (thanks to Yoshito Umaoka).
	[apb, ticket #1870]

sys/net/bpf.c					1.176 via patch

	Avoid kernel panic caused by setting a very small bpf buffer size.
	Fixes PR/48198 reported by Peter Bex.
	[spz, ticket #1874]

sys/netinet6/in6.c				1.167 via patch

	Include BRDADDR and NETMASK to the v4 ioctls we ban for v6; from
	FreeBSD.
	[spz, ticket #1876]

xsrc/external/mit/libX11/dist/src/xkb/XKBNames.c	patch
xsrc/external/mit/libX11/dist/src/xkb/XKBGetMap.c	patch

	The size of the arrays is max_key_code + 1. This makes these functions
	consistent with the other checks added for CVE-2013-1997.
	Check the XkbGetNames reply when names->keys was just allocated
	Should fix PR lib/48170.
	[riz, ticket #1877]

etc/ssh/ssh_known_hosts				1.7-1.8

	Update for project hosts whose keys changed.
	[spz, ticket #1878]

sbin/raidctl/raidctl.8				1.65

	Note that NetBSD/amd64 can boot off RAID volumes.
	[tron, ticket #1879]

share/zoneinfo/australasia			1.33

	Merge the Fiji-related change from tzdata2013e.
	This year Fiji will start DST on October 27, not October 20.
	[apb, ticket #1880]

distrib/notes/common/main                       patched by hand
doc/LAST_MINUTE                                 patched by hand
doc/README.files                                patched by hand
gnu/usr.bin/groff/tmac/mdoc.local               patched by hand
sys/sys/param.h                                 patched by hand

        Welcome to 5.2.1!
        [riz]
