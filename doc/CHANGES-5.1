# $NetBSD: CHANGES-5.1,v 1.1.2.53 2009/07/28 22:29:57 snj Exp $

A complete list of changes from the NetBSD 5.0 release to the NetBSD 5.1
release:

gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 5.0_STABLE.
	[snj]

sys/arch/i386/conf/ALL				1.187
sys/arch/i386/conf/GENERIC			1.922
sys/dev/pci/files.pci				1.309
sys/dev/pci/gcscaudio.c				1.1
sys/dev/pci/gcscaudioreg.h			1.1

	Add AMD Geode CS5536 audio driver; written by SHIMIZU Ryo.
	[jmcneill, ticket #260]

distrib/sets/lists/man/mi			1.1117
share/man/man4/Makefile				1.485
share/man/man4/gcscaudio.4			1.1

	Add man page for the gcscaudio driver.
	[jmcneill, ticket #261]

sys/dev/mii/inphy.c				1.51
sys/dev/mii/iophy.c				1.35
sys/dev/mii/nsphy.c				1.56
sys/dev/mii/rlphy.c				1.25
sys/dev/mii/ukphy_subr.c			1.11
sys/dev/pci/if_txp.c				1.28

	Our drivers give 100BASE-T4 a higher priority than 100BASE-TX
	full duplex.  Fix this.
	[cegger, ticket #474]

sys/arch/i386/acpi/npx_acpi.c			1.18
sys/arch/i386/acpi/spic_acpi.c			1.21
sys/dev/acpi/acpi_ec.c				1.53
sys/dev/acpi/acpi_resource.c			1.27
sys/dev/acpi/atppc_acpi.c			1.16
sys/dev/acpi/attimer_acpi.c			1.12
sys/dev/acpi/com_acpi.c				1.28
sys/dev/acpi/fdc_acpi.c				1.35
sys/dev/acpi/hpet_acpi.c			1.4
sys/dev/acpi/joy_acpi.c				1.9
sys/dev/acpi/lpt_acpi.c				1.18
sys/dev/acpi/mpu_acpi.c				1.9
sys/dev/acpi/pckbc_acpi.c			1.31
sys/dev/acpi/pcppi_acpi.c			1.11
sys/dev/acpi/ug_acpi.c				1.5
sys/dev/acpi/wss_acpi.c				1.20
sys/dev/acpi/ym_acpi.c				1.6

	Cut the amount of spam from acpi devices in roughly half by
	printing resources on the same line as autoconf messages.
	[jmcneill, ticket #498]

sys/dev/acpi/acpi_ec.c				1.54

	Change a confusing attach message.
	[jmcneill, ticket #535]

distrib/sets/lists/base/mi			1.797 via patch
sys/dev/microcode/zyd/Makefile			1.2
sys/dev/microcode/zyd/zd1211-licence		delete
sys/dev/microcode/zyd/zd1211-license		1.1

	- Rename filename of license.
	- Correct filename in license (add missing prefix).
	[hira, ticket #538]

sys/dev/ic/hme.c				1.69, 1.70, 1.73
sys/dev/ic/gem.c				1.83

	hme.c rev 1.69: tcp4csum-rx and udp4csum is not enabled
	properly due to lack of "else" statement.
	hme.c rev 1.70: local ether_cmp() funcion has a wrong return
	value, so multicast is not set properly.
	hme.c rev 1.71, gem.c rev 1.83: These chips are configured to
	calculate RX packet checksum from offset ETHER_HDR_LEN +
	sizeof(struct ip), so if RX packets has IP options headers the
	drivers have to deduct the sum of the IP options header part.
	But there is a bug in the deduction calculation, so if
	tcp4csum-rx or udp4csum-rx are enabled all RX TCP/UDP packets
	with IP option headers will be discarded.
	[tsutsui, ticket #595]

sys/dev/ic/rtl8169.c				1.109-1.113
sys/dev/ic/rtl81x9var.h				1.43-1.45
sys/dev/ic/rtl81x9reg.h				1.34, 1.35

	Add hardware checksum support for newer 8168/8111/8102 chips.
	[tsutsui, ticket #597]

sys/dev/raidframe/rf_dagfuncs.c			1.30
sys/dev/raidframe/rf_diskqueue.c		1.52
sys/dev/raidframe/rf_diskqueue.h		1.23

	Rework/simplify the disk queuing code.  A bunch of this was
	still holdovers from the simulator and would never be seen/used
	in-kernel.
	[oster, ticket #607]

sys/kern/sys_module.c				1.9

	copyin the modctl_load_t for the non-x86 world. Fixes PR/41294.
	[skrll, ticket #729]

lib/libc/net/getifaddrs.3			1.10
lib/libc/net/getifaddrs.c			1.12
sbin/ifconfig/af_link.c				1.4 - 1.6
sbin/ifconfig/ifconfig.c			1.216 - 1.218
sbin/ifconfig/util.c				1.10, 1.11
sbin/ifconfig/util.h				1.7

	address in the 'address: ' field
	For non-AF_LINK ifaddrs, ifa_data is NULL.  AFAICT, this has always
	been so.  Say so in the documentation.
	Bring getifaddrs(3) behavior in line with the documentation: the
	ifa_data member of every AF_LINK struct ifaddrs points at the
	corresponding struct if_data.  In ifconfig(8), do not try to suppress
	duplicate AF_LINK ifaddrs by checking for a NULL ifa_data.
	Don't copy out two AF_LINK struct ifaddrs for each active link-layer
	address. getifaddrs(3) used to copy out one ifaddrs for the kernel's
	RTM_IFINFO message, and one more for the kernel's RTM_NEWADDR message.
	I suppress the first duplicate with a highly conservative change that
	wastes a little bit of ifaddrs storage.  The storage is not leaked.
	[dyoung, ticket #730]

sys/kern/uipc_socket.c				1.189

	PR kern/41311: Mutex error: mutex_vector_enter: locking against myself
	[ad, ticket #731]

sys/kern/vfs_dirhash.c				1.10

	port-vax/41315: fix off by one error
	Previous code ususally works since compiler won't put gap between
	those struct members but there is no reason to rely on that.
	[martin, ticket #732]

sys/netinet6/ip6_input.c			1.127

	Add missing paranthesis - from Kurt Lidl in PR port-vax/41316
	[martin, ticket #733]

sys/dev/ic/ncr53c9x.c				1.138

	Add missing braces - patch from Kurt Lidl in PR port-vax/41314.
	[martin, ticket #734]

common/dist/zlib/zlib.h				1.3
sys/lib/libkern/Makefile			patch
sys/lib/libkern/crc32.c				1.1-1.4
sys/lib/libkern/crc32.h				1.1
sys/lib/libkern/libkern.h			1.89, 1.90 via patch
sys/lib/libkern/arch/i386/Makefile.inc		1.28
sys/lib/libsa/cread.c				1.23
sys/lib/libz/Makefile				1.16
sys/net/zlib.h					1.14 via patch
sys/opencrypto/crypto.c				1.33
sys/opencrypto/cryptodev.c			1.46
sys/opencrypto/cryptodev.h			1.16
sys/opencrypto/cryptosoft.c			1.24
sys/opencrypto/cryptosoft.h			1.6
sys/opencrypto/deflate.h			1.6
sys/opencrypto/cryptosoft_xform.c		1.12
sys/opencrypto/deflate.c			1.13
sys/opencrypto/files.opencrypto			1.20
sys/opencrypto/ocryptodev.c			1.1
sys/opencrypto/ocryptodev.h			1.1
sys/opencrypto/xform.c				1.18
sys/opencrypto/xform.h				1.10

	Extend the Opencrypto API to allow the destination buffer
	size to be specified when it is not the same size as the input
	buffer (i.e., for operations like compress and decompress).
	The crypto_op and crypt_n_op structures gain a u_int dst_len
	field.  The session_op structure gains a comp_alg field to
	specify a compression algorithm.
	Moved four ioctls to new ids; CIOCGSESSION, CIOCNGSESSION,
	CIOCCRYPT, and CIOCNCRYPTM.  Added four backward compatible
	ioctls; OCIOCGSESSION, OCIOCNGSESSION, OCIOCCRYPT, and
	OCIOCNCRYPTM.
	Backward compatibility is maintained in ocryptodev.h and
	ocryptodev.c which implement the original ioctls and set
	dst_len and comp_alg to 0.
	Add user-space access to compression features.
	Add software gzip support (CRYPTO_GZIP_COMP).
	Add the fast version of crc32 from zlib to libkern. This should
	be generally useful and provide a place to start normalizing
	the various crc32 routines in the kernel.  The crc32 routine is
	used in this patch to support GZIP.
	Fixes PR kern/41069 and PR kern/41070.
	[tls, ticket #611]

sys/dev/pci/if_wm.c:                            1.168, 1.169 via patch
sys/dev/pci/if_wmreg.h:                         1.26 via patch

        On i82563, the em driver says that the ready bit in the MDIC
        register may be incorrectly set. Insert delay(200) like the
        em driver.
        Examine the management mode and mark DRV_LOAD (for
        ICH{8,9,10},80003, 8257{1,2,3,4}).  Add some error printf()s.
        Make the bank detect routine into the function.
        [spz, ticket #621]

sys/dev/pci/if_wm.c				1.171, 1.172

	Enable hardware VLAN support.
	[tls, ticket #627]

sys/dev/pci/if_wm.c				1.170

	Add workaround for 82543GC: We need to force speed and duplex
	on the MAC equal to what the PHY speed and duplex configuration
	is. Fixes PR#36430.
	[msaitoh, ticket #630]

sys/net/if_vlan.c				1.63

	Also inherit the parent's TCP segmentation offload capability.
	Note the vlan interface does not see updates to the parents
	capabilities so if, for example, TSO is on in both, then turned
	off in the parent it will remain on in the vlan interface.
	[darran, ticket #644]

sbin/ping/ping.c				1.88

	PR/41111: Ed Ravin: ping -R gives misleading error when remote
	side doesn't support record route.
	Deal with source route and record route specially giving a
	meaningful error message.
	[christos, ticket #636]

sbin/drvctl/drvctl.8				1.6
sbin/drvctl/drvctl.c				1.8 via patch
sys/kern/kern_drvctl.c				1.24

	Allow querying for root devices in the tree by specifying
	an empty device name. Ensure that l_devname is NUL-terminated
	and fail otherwise.  If drvctl -l is used without argument, print
	the root device nodes.
	[joerg, ticket #675]

lib/libedit/common.c				1.23

	Fix mis-evaluating whether a char is digit or not.
	[msaitoh, ticket #703]

sys/dev/mii/miidevs				1.81-1.83
sys/dev/mii/miidevs.h				regen
sys/dev/mii/miidevs_data.h			regen

	Add ATHEROS F1 and F2 PHYs.  Add ATTANSIC and their L1/L2 PHYs.
	Add a comment explaining how to regenerate miidevs.h and
	miidevs_data.h.
	[sborrill, ticket #721]

sys/dev/pci/pcidevs				1.973
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen

	Add Attansic L1E Gigabit Ethernet Adapter.
	[sborrill, ticket #722]

sys/dev/pci/if_age.c				1.1-1.28
sys/dev/pci/if_agereg.h				1.1-1.2
sys/dev/pci/if_ale.c				1.1-1.3
sys/dev/pci/if_alereg.h				1.1-1.2
sys/dev/pci/files.pci				1.310-1.313
sys/dev/mii/atphy.c				1.1-1.5
sys/dev/mii/files.mii				1.42
share/man/man4/age.4				1.1-1.3
share/man/man4/ale.4				1.1-1.2
share/man/man4/atphy.4				1.1-1.2
share/man/man4/Makefile				1.486, 1.489
strib/sets/lists/man/mi				1.1118, 1.1132
sys/arch/i386/conf/GENERIC			1.928, 1.933
sys/arch/i386/conf/XEN2_DOM0			1.57, 1.60
sys/arch/amd64/conf/GENERIC			1.239, 1.241
sys/arch/amd64/conf/XEN3_DOM0			1.38, 1.42

	Add the age(4) and ale(4) drivers for Attansic L1 and Atheros
	AR8121/AR8113/AR8114 devices respectively.
	[cegger, ticket #735]

sys/arch/x86/pci/pchb.c				1.15 - 1.17
sys/dev/pci/agp.c				1.63 - 1.65
sys/dev/pci/agp_i810.c				1.57 - 1.64
sys/dev/pci/agpreg.h				1.20
sys/dev/pci/pcidevs				1.965, 1.967 via patch
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen

	Add AGP support for Intel G35, G45, and Q45
	[snj, ticket #737]

gnu/dist/binutils/bfd/elf32-vax.c		1.9

	Allocate relocation section using bfd_zalloc() to ensure no garbage
	relocations when not all the entries are used.
	Fixes PR port-vax/39182.
	[mhitch, ticket #738]

sys/ufs/ffs/ffs_alloc.c				1.123 via patch

	Fix random 'filesystem full' messages by trapping a couple of
	32-bit overflow areas missed in rev 1.110 and switching cgbase().
	[sborrill, ticket #726]

share/man/man4/age.4				1.4
share/man/man4/ale.4				1.3

	age(4) and ale(4) will first appear in 5.1, not 6.0.
	[cegger, ticket #739]

usr.sbin/racoonctl/Makefile			1.5 via patch

	Adjust the ADMINPORTDIR to match that of racoon (with which it'll
	want to talk).  Fixes PR 41376.
	[spz, ticket #740]

sys/arch/hp700/include/intr.h			1.14

	Add __insn_barrier after updating cpl in splraise. PR/41369.
	[skrll, ticket #741]

sys/arch/m68k/include/psl.h			1.14

	Add memory clobber to the instructions that change the IPL in the
	status register.  See also kern/38637.
	[mhitch, ticket #743]

sys/arch/hp700/dev/pdc.c			1.27

	Pass proper timeval args to pdc_call() to save TOD with
	PDC_TOD_WRITE.
	[skrll, ticket #744]

sys/netinet/in_pcb.c				patch

	Fix compilation with IPNOPRIVPORTS option.
	[sborrill, ticket #745]

share/man/man8/afterboot.8			1.39

	Fix typo, from Shannon -jj Behrens in PR 41375.
	[dholland, ticket #746]

distrib/sets/lists/etc/mi			1.209
doc/3RDPARTY					1.691
doc/CHANGES					1.1220
etc/defaults/rc.conf				1.103
etc/rc.d/Makefile				1.78 via patch
etc/rc.d/dhcpcd					1.1
external/bsd/dhcpcd/dist/README			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/arp.c			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/arp.h			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/bind.c			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/bind.h			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/bpf-filter.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/bpf.c			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/client.c		removed
external/bsd/dhcpcd/dist/client.h		removed
external/bsd/dhcpcd/dist/common.c		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/common.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/config.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/configure.c		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/configure.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/control.c		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/control.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcp.c			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcp.h			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd-run-hooks.8.in	dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd-run-hooks.in	dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd.8.in		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd.c		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd.conf		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd.conf.5.in	dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/duid.c			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/duid.h			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/eloop.c		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/eloop.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/if-bsd.c		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/if-options.c		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/if-options.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/if-pref.c		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/if-pref.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/ipv4ll.c		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/ipv4ll.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/logger.c		removed            
external/bsd/dhcpcd/dist/logger.h		removed
external/bsd/dhcpcd/dist/net.c			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/net.h			dhcpcd-5-0-1
external/bsd/dhcpcd/dist/signals.c		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/signals.h		dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd-hooks/01-test	dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd-hooks/10-mtu	dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd-hooks/20-resolv.conf dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd-hooks/29-lookup-hostname dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd-hooks/30-hostname dhcpcd-5-0-1
external/bsd/dhcpcd/dist/dhcpcd-hooks/50-ntp.conf dhcpcd-5-0-1
external/bsd/dhcpcd/sbin/dhcpcd/Makefile	1.4

	Update dhcpcd to 5.0.1.
	[roy, ticket #534]

BUILDING					1.83
doc/BUILDING.mdoc				1.72
external/mit/xorg/lib/freetype/Makefile		1.5

	Introduce MKSUBPIXEL, which allows enabling subpixel rendering code
	in FreeType.
	[snj, ticket #742]

gnu/usr.bin/groff/tmac/mdoc.local		1.51 via patch

	Add an entry for 5.1.
	[snj, ticket #747]

sys/dist/ipf/netinet/ip_fil_netbsd.c		1.50

	Don't call callout_stop() without callout_init()
	Fixes PR/41364
	[kefren, ticket #748]

sys/dev/md.c					1.58

	Check the RAMdisk size in mdattach() and not nothing if it's 0.
	This allows mdattach() to be called twice, once from config_finalize()
	and once from tftproot_getfile(). Fix options TFTPROOT.
	[manu, ticket #749]

sys/arch/sparc/include/math.h			1.5
sys/arch/sparc64/include/math.h			1.7

	merge these two files, makes sparc64 sparc/libc work again.
	only provide __HAVE_LONG_DOUBLE if _LP64.
	[mrg, ticket #750]

sys/dev/pci/if_wm.c				patch
	Remove extra printf().
	[msaitoh, ticket #751]

sys/arch/amd64/amd64/lock_stubs.S		1.22, 1.23
sys/arch/i386/i386/lock_stubs.S			1.23
sys/arch/x86/include/mutex.h			1.6
sys/arch/x86/x86/patch.c			1.18
sys/kern/kern_rwlock.c				1.30

	Add a workaround for a bug with some Opteron revisions where
	locked operations sometimes do not serve as memory barriers,
	allowing memory references to bleed outside of critical sections.
	[ad, ticket #725]

usr.sbin/postinstall/postinstall		1.95

	Teach postinstall about /etc/dhcpcd.conf.
	[jnemeth, ticket #752]

usr.sbin/postinstall/postinstall		1.96 via patch

	Teach postinstall about /etc/rc.d/dhcpcd.
	[jnemeth, ticket #753]

sys/arch/xen/xen/if_xennet_xenbus.c		1.35

	Do not forget to detach rnd(4) device when removing a xennet
	device.
	[jym, ticket #754]

usr.sbin/postinstall/postinstall		1.97

	Fetch /etc/dhcpcd.conf from the correct place when building
	the system from source.
	[jnemeth, ticket #756]

etc/rc.d/network				1.58

	Only start dhcpcd per interface if not running the full dhcpcd daemon.
	Only stop dhcpcd pre interface if it's running for the interface.
	Fixes PR bin/40320
	[roy, ticket #757]

distrib/utils/sysinst/arch/i386/md.c		1.122
distrib/utils/sysinst/bsddisklabel.c		1.52
distrib/utils/sysinst/defs.h			1.143
distrib/utils/sysinst/disks.c			1.105
distrib/utils/sysinst/mbr.c			1.80
distrib/utils/sysinst/mbr.h			1.23
distrib/utils/sysinst/msg.mi.de			1.49
distrib/utils/sysinst/msg.mi.en			1.155
distrib/utils/sysinst/msg.mi.es			1.26
distrib/utils/sysinst/msg.mi.fr			1.106
distrib/utils/sysinst/msg.mi.pl			1.65
distrib/utils/sysinst/savenewlabel.c		1.6

	Support drives over 1TB in size in sysinst.
	Error if drive is over 2TB in size (and thus over the disklabel limit).
	[sborrill, ticket #758]

sys/dev/pci/if_bnx.c				1.21

	Protect against spurious "bnx0: Double mbuf allocation failure!"
	panics.
	[kefren, ticket #760]

sys/arch/x86/include/cacheinfo.h		1.11, 1.12
usr.sbin/cpuctl/arch/i386.c			1.18, 1.19 via patch

	Extend CPU probe of Intel processors to handle extended-models:
	new Intel 45nm processors, Core i7, Atom, and the 45nm Xeon MP.
	Properly decode several new Intel cache descriptors, as listed in the
	most recent (March 2009) edition of Intel's Application Note 485.
	Addresses PR bin/41289 and bin/41290
	[pgoyette, ticket #761]

sys/kern/sys_mqueue.c				1.17

	sys_mq_open: remove broken access flag check.
	Noted by Stathis Kamperis.
	[rmind, ticket #762]

usr.sbin/schedctl/schedctl.c			1.14

	Skip LSIDL and LSZOMB threads when retrieving info.
	[rmind, ticket #763]

sys/arch/sparc/include/psl.h                    1.45

        Add memory clobbers to the inline assembler modifying/testing the %psr
	register, to avoid the compiler reordering instructions out of critical
	sections. Should fix PR port-sparc/41372.
	[martin, ticket #764]

share/man/man7/sysctl.7				1.22 via patch

	Document PROC_PID_LIMIT_SBSIZE.  From Greg A. Woods in PR lib/36463.
	Wording is taken from getrlimit(2).
	[snj, ticket #765]

usr.bin/paste/paste.c				1.15

	Null-terminate the delimiter list string after processing escapes
	(which can shorten it) because the code that issues delimiters depends
	on it being null-terminated. This caused e.g. paste -d '\0' a b to
	print a '0' at the beginning of each line. Closes PR 41159.
	[dholland, ticket #766]

dist/wpa/src/drivers/driver_bsd.c		1.6

	Use new way of associating, which fixes wpa with ral(4)
	[roy, ticket #755]

external/bsd/dhcpcd/dist/README				patch
external/bsd/dhcpcd/dist/bind.c				patch
external/bsd/dhcpcd/dist/config.h			patch
external/bsd/dhcpcd/dist/dhcpcd.c			patch
external/bsd/dhcpcd/dist/dhcpcd.conf			patch
external/bsd/dhcpcd/dist/net.c				patch
external/bsd/dhcpcd/dist/dhcpcd-hooks/10-mtu		patch
external/bsd/dhcpcd/dist/dhcpcd-hooks/20-resolv.conf	patch
external/bsd/dhcpcd/dist/dhcpcd-hooks/50-ntp.conf	patch
	
	Update dhcpcd to 5.0.4:
	* ServerID requirement in DHCP messages can be toggled in dhcpcd.conf
	* If MTU is requested, don't apply if less than 576
	* Enforce a minimum lease time of 20 seconds
	* -n option now starts dhcpcd if not already started
	* 29-lookup-hostname hook installed by default, but skipped in
	  dhcpcd.conf
	* Fix warning about missing dirs if we don't have any existing state
	[roy, ticket #759]

sys/arch/vax/include/mtpr.h			1.21, 1.22

	Add "memory" clobber to mtpr for barrier.  See also kern/38637.
	[mhitch, ticket #767]

sys/dev/pci/pcidevs				1.975, 1.981, 1.982 via patch
sys/dev/pci/pcidevs.h				regen
sys/dev/pci/pcidevs_data.h			regen
sys/dev/pci/if_wm.c				1.164, 1.167, 1.173, 1.174 via patch
sys/dev/pci/if_wmreg.h				1.25, 1.27 via patch

	Sync wm(4) driver with HEAD, adding support for more devices and
	fixing some bugs (including a NULL pointer dereference).
	[bouyer, ticket #771]

distrib/utils/sysinst/arch/arc/md.c		1.32
distrib/utils/sysinst/arch/bebox/md.c		1.52
distrib/utils/sysinst/arch/cobalt/md.c		1.3
distrib/utils/sysinst/arch/evbmips/md.c		1.5
distrib/utils/sysinst/arch/evbppc/md.c		1.28
distrib/utils/sysinst/arch/hpcarm/md.c		1.6
distrib/utils/sysinst/arch/hpcmips/md.c		1.44
distrib/utils/sysinst/arch/landisk/md.c		1.6
distrib/utils/sysinst/arch/ofppc/md.c		1.5
distrib/utils/sysinst/arch/playstation2/md.c	1.23
distrib/utils/sysinst/arch/prep/md.c		1.30
distrib/utils/sysinst/arch/sandpoint/md.c	1.29
distrib/utils/sysinst/arch/zaurus/md.c		1.4

	Catch up with ticket 755.
	[sborrill, ticket #773]

dist/ntp/ntpd/ntp_crypto.c			1.15

	Fix CVE-2009-1252: Buffer overflow in ntpd crypto code. A remote
	attacker can send a specially constructed request packet that
	would overflow the sprintf()'ed buffer causing ntpd to crash.
	[dholland, ticket #777]

sys/arch/sparc64/sparc64/vm_machdep.c           1.88

	When preparing the initial trap frame for a new forked lwp,         
	explicitly clear condition code. Otherwise we might catch a signal
	(handlers are inherited from the parent) before we ever return to
	userland. The current trapframe is converted into a ucontext and
	after the signal handler returns, the lwp stays in userland and
	directly uses the ucontext to return to the fork call.
	Fixes PR 41302.
	[martin, ticket #774]

distrib/utils/sysinst/arch/mac68k/md.c		1.54

	Fix build by explicitly narrowing dlsize to an unsigned 32-bit
	quantity as supported by disklabel.  Fixes fallout from ticket
	755.
	[sborrill, ticket #778]

sys/kern/sys_mqueue.c				1.18

	- Slightly rework the way permissions are checked. Neither
	mq_receive() nor mq_send() should fail due to permissions.
	- Check for empty message queue name (POSIX does not allow this
	for regular files, and it's weird), check for DTYPE_MQUEUE, fix
	permission check in mq_unlink(), clean up.
	[rmind, ticket #779]

sys/kern/kern_physio.c				1.91

	Remove a race where physio_done() may use memory already
	freed.  Fixes PR kern/39536.
	[hannken, ticket #781]

src/external/bsd/fetch/dist/libfetch/common.c	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/common.h	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/errlist.sh	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/fetch.3	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/fetch.c	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/fetch.cat3	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/fetch.h	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/file.c	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/ftp.c	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/ftp.errors	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/http.c	libfetch-2-23
src/external/bsd/fetch/dist/libfetch/http.errors libfetch-2-23
        
	Pull up libfetch-2.23:
	- if-not-modified support               
	- document that struct URL is not part of the ABI
	- fetchRestartCalls cleanup for signal handlers
	- allow HTTP basic auth to be specified in the URL, allow : as part of
	  the cleartext password
	- fix a file descriptor leak in the file:// iteration code
	[joerg, ticket #670]

UPDATING					patch
distrib/sets/lists/base/mi			patch
distrib/sets/lists/etc/mi			patch
distrib/sets/lists/man/mi			patch
external/bsd/pkg_install/Makefile.inc		patch
external/bsd/pkg_install/prepare-import.sh	patch
external/bsd/pkg_install/dist/add/add.h		pkg_install-20090528
external/bsd/pkg_install/dist/add/main.c	pkg_install-20090528
external/bsd/pkg_install/dist/add/perform.c	pkg_install-20090528
external/bsd/pkg_install/dist/add/pkg_add.1	pkg_install-20090528
external/bsd/pkg_install/dist/admin/admin.h	pkg_install-20090528
external/bsd/pkg_install/dist/admin/audit.c	pkg_install-20090528
external/bsd/pkg_install/dist/admin/check.c	pkg_install-20090528
external/bsd/pkg_install/dist/admin/main.c	pkg_install-20090528
external/bsd/pkg_install/dist/admin/pkg_admin.1	pkg_install-20090528
external/bsd/pkg_install/dist/bpm/bpm.1		pkg_install-20090528
external/bsd/pkg_install/dist/create/build.c	pkg_install-20090528
external/bsd/pkg_install/dist/create/create.h	pkg_install-20090528
external/bsd/pkg_install/dist/create/main.c	pkg_install-20090528
external/bsd/pkg_install/dist/create/perform.c	pkg_install-20090528
external/bsd/pkg_install/dist/create/pkg_create.1 pkg_install-20090528
external/bsd/pkg_install/dist/create/pl.c	pkg_install-20090528
external/bsd/pkg_install/dist/create/util.c	pkg_install-20090528
external/bsd/pkg_install/dist/delete/pkg_delete.1 pkg_install-20090528
external/bsd/pkg_install/dist/info/info.h	pkg_install-20090528
external/bsd/pkg_install/dist/info/main.c	pkg_install-20090528
external/bsd/pkg_install/dist/info/perform.c	pkg_install-20090528
external/bsd/pkg_install/dist/info/pkg_info.1	pkg_install-20090528
external/bsd/pkg_install/dist/info/show.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/automatic.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/config.h.in	pkg_install-20090528
external/bsd/pkg_install/dist/lib/conflicts.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/decompress.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/dewey.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/fexec.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/file.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/global.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/iterate.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/lib.h		pkg_install-20090528
external/bsd/pkg_install/dist/lib/lpkg.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/opattern.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/pkg_io.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/pkg_summary.5	pkg_install-20090528
external/bsd/pkg_install/dist/lib/pkgdb.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/plist.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/str.c		pkg_install-20090528
external/bsd/pkg_install/dist/lib/var.c		pkg_install-20090528
external/bsd/pkg_install/dist/lib/version.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/version.h	pkg_install-20090528
external/bsd/pkg_install/dist/lib/vulnerabilities-file.c pkg_install-20090528
external/bsd/pkg_install/dist/admin/audit-packages.sh.in pkg_install-20090528
external/bsd/pkg_install/dist/admin/download-vulnerability-list.sh.in pkg_install-20090528
external/bsd/pkg_install/dist/delete/pkg_delete.c pkg_install-20090528
external/bsd/pkg_install/dist/lib/gpgsig.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/license.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/parse-config.c pkg_install-20090528
external/bsd/pkg_install/dist/lib/pkcs7.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/pkg_install.conf.5.in pkg_install-20090528
external/bsd/pkg_install/dist/lib/pkg_signature.c: pkg_install-20090528
external/bsd/pkg_install/dist/lib/remove.c	pkg_install-20090528
external/bsd/pkg_install/dist/lib/xwrapper.c	pkg_install-20090528
external/bsd/pkg_install/dist/x509/pkgsrc.cnf	pkg_install-20090528
external/bsd/pkg_install/dist/x509/pkgsrc.sh	pkg_install-20090528
external/bsd/pkg_install/dist/x509/signing.txt	pkg_install-20090528
external/bsd/pkg_install/lib/Makefile		patch
external/bsd/pkg_install/sbin/Makefile		patch
external/bsd/pkg_install/sbin/Makefile.inc	patch
external/bsd/pkg_install/sbin/pkg_add/Makefile	patch
external/bsd/pkg_install/sbin/pkg_admin/Makefile patch
external/bsd/pkg_install/sbin/pkg_create/Makefile patch
external/bsd/pkg_install/sbin/pkg_delete/Makefile patch
external/bsd/pkg_install/sbin/pkg_info/Makefile	patch
external/bsd/pkg_install/dist/add/extract.c	removed
external/bsd/pkg_install/dist/add/futil.c	removed
external/bsd/pkg_install/dist/add/verify.c	removed
external/bsd/pkg_install/dist/add/verify.h	removed
external/bsd/pkg_install/dist/admin/config.c	removed
external/bsd/pkg_install/dist/audit-packages/AUTHORS removed
external/bsd/pkg_install/dist/audit-packages/COPYING removed
external/bsd/pkg_install/dist/audit-packages/README removed
external/bsd/pkg_install/dist/audit-packages/audit-packages.1.in removed
external/bsd/pkg_install/dist/audit-packages/audit-packages.c removed
external/bsd/pkg_install/dist/audit-packages/audit-packages.conf.5.in removed
external/bsd/pkg_install/dist/audit-packages/audit-packages.conf.in removed
external/bsd/pkg_install/dist/audit-packages/download-vulnerability-list.1.in removed
external/bsd/pkg_install/dist/audit-packages/download-vulnerability-list.sh.in removed
external/bsd/pkg_install/dist/delete/delete.h	removed
external/bsd/pkg_install/dist/delete/main.c	removed
external/bsd/pkg_install/dist/delete/perform.c	removed
external/bsd/pkg_install/dist/lib/ftpio.c	removed
external/bsd/pkg_install/dist/lib/path.c	removed
external/bsd/pkg_install/dist/lib/path.h	removed
external/bsd/pkg_install/dist/lib/pen.c		removed
external/bsd/pkg_install/dist/lib/pexec.c	removed
external/bsd/pkg_install/dist/view/linkfarm.1	removed
external/bsd/pkg_install/dist/view/linkfarm.sh.in removed
external/bsd/pkg_install/dist/view/pkg_view.1	removed
external/bsd/pkg_install/dist/view/pkg_view.sh.in removed
external/bsd/pkg_install/sbin/audit-packages/Makefile removed
external/bsd/pkg_install/sbin/pkg_view/Makefile	removed

	Merge pkg_install-20090528 from HEAD.
	[joerg, ticket #784]

usr.sbin/puffs/mount_sysctlfs/sysctlfs.c	1.11

	Fix a crash while trying to read nodes on amd64, reported in
	PR/41494.
	[njoly, ticket #783]

sys/arch/sparc/sparc/autoconf.c			1.233 via patch
sys/arch/sparc/sparc/cpu.c			1.213 via patch
sys/arch/sparc/sparc/cpuvar.h			1.76 via patch
sys/arch/sparc/sparc/db_interface.c		1.83 via patch
sys/arch/sparc/sparc/intr.c			1.102 via patch
sys/arch/sparc/sparc/pmap.c			1.325 via patch
sys/arch/sparc/sparc/timer_sun4m.c		1.17 via patch

	Work in progress fixes for sparc SMP support.  Makes
	non-MULTIPROCESSOR kernels work with LOCKDEBUG.  Rearange
	cpu_info access and hide the actual implementation of the
	mapping from all parts of the code that do not directly deal
	with it. Do the mapping early in pmap_bootstrap, so that
	post-vmlocking2 kernels have a chance to work.
	[mrg, ticket #776]

sys/fs/udf/udf_strat_direct.c			1.10
sys/fs/udf/udf_strat_rmw.c			1.19
sys/fs/udf/udf_strat_sequential.c		1.10
sys/fs/udf/udf_subr.c				1.90
sys/fs/udf/udf_subr.c				1.91

	Descriptor version is 16 bit and not 8 so use udf_rw16() to access
	them.  UniqueID was written in the logical volume integrity without
	byteswapping for big endian machines.

	Retire IN_CALLBACK_ULK flagging since its not used anymore and the
	old assertions on it would trigger without cause.
	[reinoud, ticket #772]

sys/netinet/ip_carp.c				1.37

	PR/38260: Improve carp logging.
	[christos, ticket #785]

sys/arch/sparc64/include/cpu.h			1.86
sys/arch/sparc64/sparc64/locore.s		1.291
sys/arch/sparc64/sparc64/vm_machdep.c		1.89

	cpu_setfunc() can not use lwp_trampoline, as that has additional
	lwp startup semantics. Use a simpler setfunc_trampoline instead.
	[martin, ticket #786]

sys/arch/m68k/include/m68k.h			1.14
sys/arch/m68k/m68k/switch_subr.s		1.22
sys/arch/m68k/m68k/vm_machdep.c			1.28

	Do not use lwp_trampoline for cpu_setfunc, we do not want to call
	lwp_startup() after a setfunc. Grow a simplified setfunc_trampoline
	instead.
	[martin, ticket #787]

sys/dev/pci/if_wm.c				1.175 via patch
sys/net/agr/ieee8023ad_lacp.c			1.9 via patch
sys/net/agr/if_agr.c				1.23 via patch
sys/net/agr/if_agrether.c			1.7 via patch
sys/net/agr/if_agrvar_impl.h			1.8 via patch
sys/net/if_ethersubr.c				1.172 via patch

	Add vlan support and hardware offload capabilities to agr.
	These changes allow vlans to be layered above agr, with the attach
	and detach propogated to the member ports in the aggregation.
	Note the agr interface must be up before the vlan is attached.

	Adds SIOCSIFADDR support to the wm driver for setting the AF_LINK
	address, necessary for agr to be able to set the mac addresses of
	each port to the agr address (i.e. so it can receive all intended
	traffic at the hardware level).

	Adds support for disabling the LACP protocol by setting LINK1 on
	the agr interface (e.g. ifconfig agr0 link1).
	[darran, ticket #792]

sys/arch/hp700/hp700/locore.S			1.35
sys/arch/hp700/include/cpu.h			1.34
sys/arch/hppa/hppa/vm_machdep.c			1.36

	Do not use lwp_trampoline for cpu_setfunc, but a simplified
	setfunc_trampoline that does not call lwp_startup().
	[skrll, ticket #793]

sbin/drvctl/drvctl.8				1.7 - 1.10
sbin/drvctl/drvctl.c				1.7, 1.9, 1.10 via patch

	fix sign-compare issues
	Add flag -n to suppress the first column of drvctl -l output.
	[dyoung, ticket #736]

sys/fs/udf/ecma167-udf.h			1.12

	Make ecma167 header file compilable by pcc
	[reinoud, ticket #769]

sbin/newfs_udf/udf_create.c			1.16
sys/fs/udf/udf_allocation.c			1.22, 1.23
sys/fs/udf/udf_bswap.h				1.6, 1.7
sys/fs/udf/udf_subr.c				1.88, 1.89

	Various fixes for big endian machines.
	[reinoud, ticket #770]

distrib/common/parselist.awk			1.16
distrib/sets/maketars				1.66
share/dict/Makefile				1.17
share/mk/bsd.README				1.249
share/mk/bsd.hostprog.mk			1.55
share/mk/bsd.kmodule.mk				1.19
share/mk/bsd.lib.mk				1.298
share/mk/bsd.links.mk				1.34
share/mk/bsd.man.mk				1.100
share/mk/bsd.prog.mk				1.241
share/zoneinfo/Makefile				1.43
usr.bin/xinstall/xinstall.c			1.106 - 1.108 via patch

	Various METALOG fixes, including entries sorting to
	fix inconsistent shared sets among builds as seen in
	/pub/NetBSD-daily/netbsd-5/200904010000Z/shared/ and
	/pub/NetBSD-daily/netbsd-5/200904010002Z/shared/ dirs.
	Should fix PR 24457 and PR 41155.
	[snj, ticket #790]

sys/kern/sched_4bsd.c				1.25

	sched_pstats_hook: fix estcpu decay.
	this makes my desktop usable when running "make -j4".
	[rmind, ticket #791]

sbin/atactl/atactl.c				1.54

	make space for a trailing \0 in model,revision and serial buffers.
	[mlelstv, ticket #794]

external/mit/xorg/server/drivers/xf86-video-s3/Makefile patch
 
	Add missing object file to build a properly working s3 module.
	Fixes PR xsrc/41206.
	[ahoka, ticket #795]

sys/netinet/ip_carp.c				1.38

	Make ip_carp.c compile, fixing usage of CARP_LOG().
	[taca, ticket #796]

bin/df/df.c					1.86

	Block numbers are measured in f_frsize units. Make -P option
	use this instead of f_bsize. Also account for reserved blocks
	like normal non-P output.
	Fixes PR bin/41541.
	[mlelstv, ticket #797]

sys/arch/alpha/alpha/locore.s			1.114
sys/arch/alpha/alpha/vm_machdep.c		1.100
sys/arch/alpha/include/alpha.h			1.24

	Do not use lwp_trampoline for cpu_setfunc, but a simplified
	setfunc_trampoline that does not call lwp_startup() instead.
	[martin, ticket #798]

sys/arch/mips/include/locore.h			1.79
sys/arch/mips/mips/locore_mips1.S		1.65
sys/arch/mips/mips/mipsX_subr.S			1.28
sys/arch/mips/mips/mips_machdep.c		1.211
sys/arch/mips/mips/vm_machdep.c			1.123

	Do not use the same trampoline for cpu_lwp_fork and
	cpu_setfunc - only the former needs to call lwp_startup().
	[martin, ticket #799]

sys/arch/sparc/dev/zs.c				1.116

	Properly initialize child attach args to zero - we could end
	up with various devices having different ideas about being
	console otherwise.
	[martin, ticket #800]

sys/arch/powerpc/powerpc/locore_subr.S		1.38
sys/arch/powerpc/powerpc/vm_machdep.c		1.77

	Do not use the same trampoline for cpu_setfunc and
	cpu_lwp_fork, the latter does a lot more work.
	[martin, ticket #801]

sys/arch/sh3/sh3/locore_subr.S			1.52

	Fix logic error in copyinstr() when deciding whether to return EFAULT
	or ENAMETOOLONG.
	[uwe, ticket #802]

sbin/newfs/newfs.c				1.103

	Issue a better error message if attempting to create a file system
	on a block device.  Inspired by PR kern/41127.
	[snj, ticket #803]

sys/arch/x86/conf/files.x86			1.52 via patch
sys/arch/x86/include/cpu.h			1.17
sys/arch/x86/x86/cpu_topology.c			1.1
sys/arch/x86/x86/identcpu.c			1.16 via patch
sys/arch/xen/conf/files.xen			1.99 via patch

	Move x86 CPU topology detection code into the separate file.
	[rmind, ticket #782]

sys/arch/x86/include/specialreg.h		1.36
sys/arch/x86/x86/cpu_topology.c			1.2

	Add CPU topology detection support for AMD processors.
	Tested on the following AMD CPUs:
	- Family 15, model 65
	- Family 15, model 67
	- Family 15, model 75
	- Family 16, model 2
	- Family 17, model 3
	[rmind, ticket #789]

distrib/sets/lists/xbase/mi			1.76
external/mit/xorg/bin/xvidtune/Makefile		1.2

	fix xsrc/41577: install the Xvidtune app-defaults file, after the
	necessary preprocessing and sed processing it needs.
	[mrg, ticket #805]

sys/compat/linux/common/linux_socket.c		1.100

	In sendmsg(2), do copy the msghdr structure before trying to use it.
	[njoly, ticket #806]

sys/kern/tty_pty.c				1.117

	Writes on the controlling tty were not being awoken from blocks,
	use the correct condvar to make this happen.
	this fixes PR/41566
	[plunky, ticket #807]

external/bsd/am-utils/lib/libamu/mkconf		1.2

	PR/41580: Hauke Fath: am-utils uses "netbsd${OSVER}" selector, still.
	Changed to "netbsd"
	[christos, ticket #808]

sys/kern/subr_kobj.c				1.35

	Fix a crash observed when trying to load a corrupted ELF kernel module.
	[rmind, ticket #809]

sys/netinet/tcp_usrreq.c			1.155

	sysctl_inpcblist: fix a lock leak in error path
	[rmind, ticket #812]

usr.bin/window/ttgeneric.c			1.11

	PR/41581: Der mouse: window SEGV with certain terminals.
	does strcmp first and then checks for null pointer for
	underline and bold.
	[christos, ticket #813]

sys/dev/pci/ehci_pci.c				1.45

	Apply hw workaround required for all SB600 revisions and SB700
	revisions A12 and A13 to avoid USB subsystem hang symptom.
	The USB subsystem hang symptom is observed when the system has
	multiple USB devices connected to it or one USB device is often
	re-connected.
	[cegger, ticket #814]

lib/libpam/modules/pam_unix/pam_unix.c		1.13

	Restore the good old UNIX behavior of root password changing:
	only root may change the root password.
	[tonnerre, ticket #817]

sys/kern/sys_generic.c				1.122 via patch

	Updates to f_flag need to be made with atomics.
	[rmind, ticket #811]

sys/arch/amd64/conf/files.amd64			1.68
sys/arch/i386/conf/files.i386			1.350
sys/arch/x86/include/rtc.h			1.1
sys/arch/x86/isa/clock.c			1.33
sys/arch/x86/isa/rtc.c				1.1
sys/arch/xen/conf/files.xen			1.100
sys/arch/xen/xen/clock.c			1.50 via patch

	Split mc146818-related functions from clock.c into rtc.c.
	Call rtc_set_ymdhms() from xen/xen/clock.c:xen_rtc_set() for
	xen3 dom0 kernels as the Xen3 hypervisor doesn't write the new
	date/time to the CMOS by itself.  Now a XEN3_DOM0 kernel
	properly updates the CMOS time.
	[bouyer, ticket #816]

sys/dev/sbus/if_le_ledma.c			1.31

	Don't immediately switch UTP/AUI ports on lost carrier.
	It may take a while for modern switches to set 10baseT media.
	[tsutsui, ticket #818]

sys/arch/amd64/amd64/mainbus.c			1.28 via patch
sys/arch/i386/i386/mainbus.c			1.85 via patch
sys/arch/x86/x86/mpacpi.c			patch
sys/arch/x86/x86/mpbios.c			patch

	- Make MP SCANPCI function for ACPI_SCANPCI and MPBIOS_SCANPCI
	  return a number of attached PCI busses
	- If no valid PCI busses are attached in the MP SCANPCI function,
	  try to probe and attach pci0 at mainbus as well as kernels
	  with no SCANPCI options
	Fixes PR port-i386/38729 (ACPI kernel booted under qemu cannot
	detect devices).
	[tsutsui, ticket #819]

distrib/hp300/miniroot/install.md		1.14

	Make hp300's install.md script probe cd(4) devices properly.
	[tsutsui, ticket #820]

sys/compat/linux/common/linux_sched.c		1.59

	In linux_sys_sched_getaffinity(), do not leak memory on error.
	[njoly, ticket #822]

sys/dev/ic/rtl8169.c				1.107, 1.114-1.119, 1.121
sys/dev/ic/rtl81x9reg.h				1.36-1.39
sys/dev/ic/rtl81x9var.h				1.47
sys/dev/mii/rgephy.c				1.27 via patch
sys/dev/pci/if_re_pci.c				1.36

	- detect RTL8169CP, RTL8168D/8111D, and RTL8103E variants
	- fix rgephy(4) problem on RTL8111D reported on current-users:
	http://mail-index.NetBSD.org/current-users/2009/04/12/msg008977.html
	http://mail-index.NetBSD.org/current-users/2009/04/19/msg009096.html
	- pull more quirk handling from FreeBSD
	- remove "B" suffix from RTL8168 device names in attach message
	- fix RX hwcksum for DESCV2 chips for PR kern/40605
	[tsutsui, ticket #821]

sys/external/bsd/drm/dist/Makefile.am		patch
sys/external/bsd/drm/dist/README		patch
sys/external/bsd/drm/dist/bsd-core/Makefile	patch
sys/external/bsd/drm/dist/bsd-core/ati_pcigart.c patch
sys/external/bsd/drm/dist/bsd-core/drm/Makefile	patch
sys/external/bsd/drm/dist/bsd-core/drmP.h	patch
sys/external/bsd/drm/dist/bsd-core/drm_agpsupport.c patch
sys/external/bsd/drm/dist/bsd-core/drm_atomic.h	patch
sys/external/bsd/drm/dist/bsd-core/drm_auth.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_bufs.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_context.c patch
sys/external/bsd/drm/dist/bsd-core/drm_dma.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_drawable.c patch
sys/external/bsd/drm/dist/bsd-core/drm_drv.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_fops.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_ioctl.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_irq.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_linux_list.h patch
sys/external/bsd/drm/dist/bsd-core/drm_lock.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_memory.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_pci.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_pciids.h	patch
sys/external/bsd/drm/dist/bsd-core/drm_scatter.c patch
sys/external/bsd/drm/dist/bsd-core/drm_sysctl.c	patch
sys/external/bsd/drm/dist/bsd-core/drm_vm.c	patch
sys/external/bsd/drm/dist/bsd-core/i915/Makefile patch
sys/external/bsd/drm/dist/bsd-core/i915_drv.c	patch
sys/external/bsd/drm/dist/bsd-core/mach64/Makefile patch
sys/external/bsd/drm/dist/bsd-core/mach64_drv.c	patch
sys/external/bsd/drm/dist/bsd-core/mga/Makefile	patch
sys/external/bsd/drm/dist/bsd-core/mga_drv.c	patch
sys/external/bsd/drm/dist/bsd-core/nouveau/Makefile patch
sys/external/bsd/drm/dist/bsd-core/nouveau_drv.c patch
sys/external/bsd/drm/dist/bsd-core/nouveau_sgdma.c patch
sys/external/bsd/drm/dist/bsd-core/r128/Makefile patch
sys/external/bsd/drm/dist/bsd-core/r128_drv.c	patch
sys/external/bsd/drm/dist/bsd-core/radeon/Makefile patch
sys/external/bsd/drm/dist/bsd-core/radeon_drv.c	patch
sys/external/bsd/drm/dist/bsd-core/savage/Makefile patch
sys/external/bsd/drm/dist/bsd-core/savage_drv.c	patch
sys/external/bsd/drm/dist/bsd-core/sis/Makefile	patch
sys/external/bsd/drm/dist/bsd-core/sis_drv.c	patch
sys/external/bsd/drm/dist/bsd-core/tdfx/Makefile patch
sys/external/bsd/drm/dist/bsd-core/tdfx_drv.c	patch
sys/external/bsd/drm/dist/bsd-core/via/Makefile	patch
sys/external/bsd/drm/dist/bsd-core/via_drv.c	patch
sys/external/bsd/drm/dist/configure.ac		patch
sys/external/bsd/drm/dist/libdrm/Makefile.am	patch
sys/external/bsd/drm/dist/libdrm/intel/Makefile.am patch
sys/external/bsd/drm/dist/libdrm/intel/intel_bufmgr.c patch
sys/external/bsd/drm/dist/libdrm/intel/intel_bufmgr.h patch
sys/external/bsd/drm/dist/libdrm/intel/intel_bufmgr_fake.c patch
sys/external/bsd/drm/dist/libdrm/intel/intel_bufmgr_gem.c patch
sys/external/bsd/drm/dist/libdrm/intel/intel_bufmgr_priv.h patch
sys/external/bsd/drm/dist/libdrm/intel/intel_chipset.h patch
sys/external/bsd/drm/dist/libdrm/intel/mm.c	patch
sys/external/bsd/drm/dist/libdrm/intel/mm.h	patch
sys/external/bsd/drm/dist/libdrm/libdrm_lists.h	patch
sys/external/bsd/drm/dist/libdrm/nouveau/Makefile.am patch
sys/external/bsd/drm/dist/libdrm/nouveau/libdrm_nouveau.pc.in patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_bo.c patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_bo.h patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_channel.c patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_channel.h patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_class.h patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_device.c patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_device.h patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_dma.c patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_dma.h patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_drmif.h patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_fence.c patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_grobj.c patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_grobj.h patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_notifier.c patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_notifier.h patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_private.h patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_pushbuf.c patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_pushbuf.h patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_resource.c patch
sys/external/bsd/drm/dist/libdrm/nouveau/nouveau_resource.h patch
sys/external/bsd/drm/dist/libdrm/xf86drm.c	patch
sys/external/bsd/drm/dist/libdrm/xf86drm.h	patch
sys/external/bsd/drm/dist/libdrm/xf86drmMode.c	patch
sys/external/bsd/drm/dist/libdrm/xf86drmMode.h	patch
sys/external/bsd/drm/dist/libdrm/xf86mm.h	patch
sys/external/bsd/drm/dist/libdrm_intel.pc.in	patch
sys/external/bsd/drm/dist/scripts/create_lk_gpu.sh patch
sys/external/bsd/drm/dist/shared-core/Makefile.am patch
sys/external/bsd/drm/dist/shared-core/drm.h	patch
sys/external/bsd/drm/dist/shared-core/drm_mode.h patch
sys/external/bsd/drm/dist/shared-core/drm_pciids.txt patch
sys/external/bsd/drm/dist/shared-core/i915_dma.c patch
sys/external/bsd/drm/dist/shared-core/i915_drm.h patch
sys/external/bsd/drm/dist/shared-core/i915_drv.h patch
sys/external/bsd/drm/dist/shared-core/i915_irq.c patch
sys/external/bsd/drm/dist/shared-core/i915_reg.h patch
sys/external/bsd/drm/dist/shared-core/i915_suspend.c patch
sys/external/bsd/drm/dist/shared-core/mach64_dma.c patch
sys/external/bsd/drm/dist/shared-core/mach64_drv.h patch
sys/external/bsd/drm/dist/shared-core/mach64_irq.c patch
sys/external/bsd/drm/dist/shared-core/mga_dma.c	patch
sys/external/bsd/drm/dist/shared-core/mga_irq.c	patch
sys/external/bsd/drm/dist/shared-core/nouveau_dma.c patch
sys/external/bsd/drm/dist/shared-core/nouveau_drm.h patch
sys/external/bsd/drm/dist/shared-core/nouveau_drv.h patch
sys/external/bsd/drm/dist/shared-core/nouveau_fifo.c patch
sys/external/bsd/drm/dist/shared-core/nouveau_irq.c patch
sys/external/bsd/drm/dist/shared-core/nouveau_mem.c patch
sys/external/bsd/drm/dist/shared-core/nouveau_object.c patch
sys/external/bsd/drm/dist/shared-core/nouveau_reg.h patch
sys/external/bsd/drm/dist/shared-core/nouveau_state.c patch
sys/external/bsd/drm/dist/shared-core/nv04_fifo.c patch
sys/external/bsd/drm/dist/shared-core/nv04_instmem.c patch
sys/external/bsd/drm/dist/shared-core/nv20_graph.c patch
sys/external/bsd/drm/dist/shared-core/nv40_graph.c patch
sys/external/bsd/drm/dist/shared-core/nv40_mc.c	patch
sys/external/bsd/drm/dist/shared-core/nv50_fifo.c patch
sys/external/bsd/drm/dist/shared-core/nv50_graph.c patch
sys/external/bsd/drm/dist/shared-core/nv50_grctx.h patch
sys/external/bsd/drm/dist/shared-core/nv50_instmem.c patch
sys/external/bsd/drm/dist/shared-core/nv_drv.h	removed
sys/external/bsd/drm/dist/shared-core/r128_drv.h patch
sys/external/bsd/drm/dist/shared-core/r128_irq.c patch
sys/external/bsd/drm/dist/shared-core/r300_cmdbuf.c patch
sys/external/bsd/drm/dist/shared-core/r600_cp.c	patch
sys/external/bsd/drm/dist/shared-core/r600_microcode.h patch
sys/external/bsd/drm/dist/shared-core/radeon_cp.c patch
sys/external/bsd/drm/dist/shared-core/radeon_drm.h patch
sys/external/bsd/drm/dist/shared-core/radeon_drv.h patch
sys/external/bsd/drm/dist/shared-core/radeon_irq.c patch
sys/external/bsd/drm/dist/shared-core/radeon_state.c patch
sys/external/bsd/drm/dist/shared-core/savage_bci.c patch
sys/external/bsd/drm/dist/shared-core/savage_state.c patch
sys/external/bsd/drm/dist/shared-core/sis_ds.c	patch
sys/external/bsd/drm/dist/shared-core/via_irq.c	patch
sys/external/bsd/drm/dist/shared-core/via_map.c	patch
sys/external/bsd/drm/dist/tests/Makefile.am	patch
sys/external/bsd/drm/dist/tests/dristat.c	patch
sys/external/bsd/drm/dist/tests/drmtest.c	patch
sys/external/bsd/drm/dist/tests/drmtest.h	patch
sys/external/bsd/drm/dist/tests/gem_basic.c	patch
sys/external/bsd/drm/dist/tests/gem_flink.c	patch
sys/external/bsd/drm/dist/tests/gem_mmap.c	patch
sys/external/bsd/drm/dist/tests/gem_readwrite.c	patch
sys/external/bsd/drm/dist/tests/getversion.c	patch
sys/external/bsd/drm/dist/tests/modeprint/Makefile.am patch
sys/external/bsd/drm/dist/tests/modeprint/modeprint.c patch
sys/external/bsd/drm/dist/tests/modetest/Makefile.am patch
sys/external/bsd/drm/dist/tests/modetest/modetest.c patch
sys/external/bsd/drm/dist/tests/setversion.c	patch
sys/external/bsd/drm/dist/tests/updatedraw.c	patch

	Sync external drm with HEAD.
	[mrg, ticket #823]

usr.bin/ktruss/dump.c				1.34, 1.35

	PR/41338: Michael van Elst: ktruss mixes filename arguments
	Restore call to dumppendq.  make flushpendq drop only entries
	for the current thread.
	[mlelstv, ticket #824]

external/bsd/pkg_install/dist/admin/pkg_admin.1:	1.1.1.7
external/bsd/pkg_install/dist/lib/license.c: 		1.1.1.3
external/bsd/pkg_install/dist/lib/version.h:		1.1.1.16

	Merge pkg_install-20090610 from HEAD
	[joerg, ticket #815]

usr.bin/audio/common/libaudio.h			1.16
usr.bin/audio/common/wav.c			1.9

	- add extended WAVE header support
	- attempt to play a bunch more WAV files
	[mrg, ticket #825]

sys/sys/conf.h					1.135
sys/uvm/uvm_device.c				1.56

	Add a workaround for drm:
	For device mmap()'s, if the D_NEGOFFSAFE flag is set, do not
	check if the offset is negative.
	[mrg, ticket #826]

sys/dev/drm/files.drm				patch
sys/dev/pci/drm/files.pcidrm			patch

	Default to the new drm code.
	[mrg, ticket #827]

share/man/man4/drm.4				patch

	Sync drm man page with reality.
	[mrg, ticket #828]

sys/modules/drm/Makefile			1.3
sys/modules/i915drm/Makefile			1.4, 1.5
sys/modules/radeondrm/Makefile			1.6, 1.7

	Fix modules build after update of drm(4).
	[mrg, ticket #829]

sys/external/bsd/drm/dist/bsd-core/mach64_drv.c	1.4
sys/external/bsd/drm/dist/bsd-core/mga_drv.c	1.5
sys/external/bsd/drm/dist/bsd-core/r128_drv.c	1.4
sys/external/bsd/drm/dist/bsd-core/savage_drv.c	1.4
sys/external/bsd/drm/dist/bsd-core/sis_drv.c	1.4
sys/external/bsd/drm/dist/bsd-core/tdfx_drv.c	1.4
sys/external/bsd/drm/dist/shared-core/mach64_dma.c 1.2
sys/external/bsd/drm/dist/shared-core/mach64_drv.h 1.4
sys/external/bsd/drm/dist/shared-core/savage_bci.c 1.4
sys/external/bsd/drm/dist/shared-core/savage_state.c 1.4
sys/external/bsd/drm/dist/shared-core/sis_ds.c	1.4

	Add a bunch of fixes mostly from rafal@. Use pci_find_device()
	to kill the one XXX rafal left.
	[mrg, ticket #830]

sys/external/bsd/drm/dist/bsd-core/mga_drv.c	1.6

	Don't include pcidevs_data.h.  Fixes build of mga_drv.
	[mrg, ticket #832]

doc/3RDPARTY					1.704-1.705 via patch
gnu/dist/postfix/HISTORY			patch
gnu/dist/postfix/conf/postfix-files		patch
gnu/dist/postfix/conf/transport			patch
gnu/dist/postfix/html/oqmgr.8.html		patch
gnu/dist/postfix/html/pcre_table.5.html		patch
gnu/dist/postfix/html/pickup.8.html		patch
gnu/dist/postfix/html/postconf.5.html		patch
gnu/dist/postfix/html/qmgr.8.html		patch
gnu/dist/postfix/html/transport.5.html		patch
gnu/dist/postfix/man/man5/pcre_table.5		patch
gnu/dist/postfix/man/man5/transport.5		patch
gnu/dist/postfix/man/man8/oqmgr.8		patch
gnu/dist/postfix/man/man8/pickup.8		patch
gnu/dist/postfix/man/man8/qmgr.8		patch
gnu/dist/postfix/mantools/postlink		patch
gnu/dist/postfix/proto/pcre_table		patch
gnu/dist/postfix/proto/transport		patch
gnu/dist/postfix/src/global/mail_params.h	patch
gnu/dist/postfix/src/global/mail_version.h	patch
gnu/dist/postfix/src/oqmgr/qmgr.c		patch
gnu/dist/postfix/src/oqmgr/qmgr_transport.c	patch
gnu/dist/postfix/src/pickup/pickup.c		patch
gnu/dist/postfix/src/postdrop/postdrop.c	patch
gnu/dist/postfix/src/postsuper/postsuper.c	patch
gnu/dist/postfix/src/qmgr/qmgr.c		patch
gnu/dist/postfix/src/qmgr/qmgr.h		patch
gnu/dist/postfix/src/qmgr/qmgr_entry.c		patch
gnu/dist/postfix/src/qmgr/qmgr_job.c		patch
gnu/dist/postfix/src/qmgr/qmgr_queue.c		patch
gnu/dist/postfix/src/qmgr/qmgr_transport.c	patch
gnu/dist/postfix/src/smtp/smtp_proto.c		patch
gnu/dist/postfix/src/smtp/smtp_reuse.c		patch
gnu/dist/postfix/src/smtpd/smtpd.c		patch
gnu/dist/postfix/src/smtpd/smtpd_proxy.c	patch
gnu/dist/postfix/src/util/events.c		patch

	Update Postfix to version 2.5.7.
	[tron, ticket #831]

games/hunt/huntd/answer.c			1.10

	Fix possible remote DoS of a running hunt game, and prevent
	a possible theoretical attack involving >= 1 billion ammo.
	[dholland, ticket #834]

crypto/dist/ssh/cipher.c			1.22
crypto/dist/ssh/cipher.h			1.3
crypto/dist/ssh/packet.c			1.32

	Add special handling for CBC cipher modes to make them appear
	less favorable than CTR modes. Also, in order to avoid creating
	oracles unnecessarily, change behavior in various situations
	from "Drop connection" to "Ignore packets up to 256kB". This
	affects CBC mode ciphers only.
	[tonnerre, ticket #843]

games/hack/extern.h				1.11
games/hack/hack.do_name.c			1.9, 1.10
games/hack/hack.eat.c				1.8
games/hack/hack.end.c				1.12 via patch
games/hack/hack.fight.c				1.10
games/hack/hack.h				1.13 via patch
games/hack/hack.invent.c			1.12, 1.13
games/hack/hack.main.c				1.12, 1.13
games/hack/hack.objnam.c			1.9
games/hack/hack.options.c			1.9
games/hack/hack.pri.c				1.11
games/hack/hack.rip.c				1.10, 1.11
games/hack/hack.shk.c				1.10
games/hack/hack.topl.c				1.10, 1.11
games/hack/hack.unix.c				1.12, 1.13

	sprintf -> snprintf, plus some use of strlcpy/strlcat where
	appropriate.
	Fix two serious string-handling bugs (one exploitable, one
	probably exploitable) and also add proper checking/paranoia in
	several other places.
	[dholland, ticket #844]

sys/kern/init_sysctl.c				1.161

	sysctl_doeproc: fix a bug in rev.1.135.  Don't forget to mark
	our marker process PK_MARKER.  This fixes crashes in
	sched_pstats, etc.
	[rmind, ticket #835]

sys/kern/kern_exit.c				1.221

	exit1: fix a race with do_sys_wait/proc_free.
	[rmind, ticket #836]

sys/kern/kern_rwlock.c				1.31

	lockdebug fixes for rw_tryupgrade/rw_downgrade.
	[rmind, ticket #837]

sys/kern/init_sysctl.c				1.162
sys/kern/vfs_trans.c				1.25

	Don't forget to skip marker processes.
	[rmind, ticket #838]

sys/kern/init_sysctl.c				1.163

	sysctl_doeproc:
	        - simplify.
	        - KERN_PROC: fix possible stale proc pointer dereference.
	        - KERN_PROC: don't do copyout with proc_lock held.
	[rmind, ticket #839]

sys/kern/vfs_lockf.c				1.70

	lf_split: cv_destroy a condvar before clobbering it.
	[rmind, ticket #840]

sys/kern/vfs_syscalls.c				1.392

	do_sys_utimes: fix a bug introduced by rev.1.367.
	VA_UTIMES_NULL is in va_vaflags, not va_flags.
	[rmind, ticket #841]

sys/kern/vfs_lockf.c				1.71

	Don't make F_GETLK or the common case of F_UNLCK fail for
	per-user limit.
	[rmind, ticket #842]

lib/libc/sys/getrlimit.2			1.31, 1.32

	Document RLIMIT_AS.  Fixes PR#41517.
	[mrg, ticket #846]

external/mit/xorg/server/drivers/xf86-video-savage/Makefile 1.5

	Add files needed for DRI.
	[mrg, ticket #845]

xsrc/external/mit/freetype/dist/src/cff/cffload.c 1.2
xsrc/external/mit/freetype/dist/src/lzw/ftzopen.c 1.2
xsrc/external/mit/freetype/dist/src/sfnt/ttcmap.c 1.2
xsrc/external/mit/freetype/dist/src/smooth/ftsmooth.c 1.2

	Apply fixes from CVE-2009-0946.
	[mrg, ticket #848]

crypto/dist/openssl/crypto/pqueue/pqueue.c	1.2
crypto/dist/openssl/crypto/pqueue/pqueue.h	1.2
crypto/dist/openssl/ssl/d1_both.c		1.4
crypto/dist/openssl/ssl/d1_pkt.c		1.2
crypto/dist/openssl/ssl/s3_pkt.c		1.10
crypto/dist/openssl/ssl/ssl.h			1.19
crypto/dist/openssl/ssl/ssl_err.c		1.13

	Fix various vulnerabilities in OpenSSL which have not previously
	been addressed: CVE-2009-1377, CVE-2009-1378, CVE-2009-1379,
	CVE-2009-1386 and CVE-2009-1387.
	[tonnerre, ticket #850]

crypto/dist/openssl/ssl/d1_both.c		1.5

	Fix build problem from ticket 850 on non-64bit systems.
	[spz, ticket #851]

sys/netinet/ip_output.c				1.203

	Fix PR kern/41659: add missing splx() in FAST_IPSEC code.
	[martin, ticket #847]

external/mit/xorg/server/drivers/xf86-video-mga/Makefile 1.6

	Enable EXA and XAA support in xf86-video-mga.
	[mrg, ticket #849]

sys/fs/udf/udf.h				patch
sys/fs/udf/udf_allocation.c			patch
sys/fs/udf/udf_osta.c				patch
sys/fs/udf/udf_readwrite.c			patch
sys/fs/udf/udf_strat_bootstrap.c		patch
sys/fs/udf/udf_strat_direct.c			patch
sys/fs/udf/udf_strat_rmw.c			patch
sys/fs/udf/udf_strat_sequential.c		patch
sys/fs/udf/udf_subr.c				patch
sys/fs/udf/udf_subr.h				patch
sys/fs/udf/udf_vfsops.c				patch
sys/fs/udf/udf_vnops.c				patch

	Numerous UDF improvements:
	- a much saner rmw backend
	- free space management done right
	- the high system time usage when encountering huge numbers
	  of nodes are a thing of the past due to refactoring
	- various small fixes
	[reinoud, ticket #852]

sys/fs/udf/udf_strat_rmw.c			1.22

	Fix alternating oddity in RMW strategy. Even when in the reading
	state it would push out elements to fillup-read only when the
	time had come for them.  This could then trickle feed the read
	queue slowly, but fast enough to prevent it from switching state.
	[reinoud, ticket #853]

common/lib/libc/hash/sha2/sha2.c		1.8-1.18 via patch
crypto/dist/openssl/crypto/evp/m_sha1.c		1.2-1.3 via patch
distrib/sets/lists/base/md.amd64		1.51 via patch
distrib/sets/lists/base/md.sparc64		1.46 via patch
distrib/sets/lists/base/shl.mi			1.474 via patch
distrib/sets/lists/comp/mi			1.1263 via patch
lib/libc/hash/sha2/Makefile.inc			1.4 via patch
lib/libc/hash/sha2/sha2.3			1.5 via patch
lib/libc/hash/sha2/sha224hl.c			1.1 via patch
lib/libc/include/namespace.h			1.138 via patch
lib/libc/shlib_version				patch
lib/libcrypto/libc-sha256.c			1.1 via patch
lib/libcrypto/libc-sha512.c			1.1 via patch
lib/libcrypto/sha.inc				1.10 via patch
lib/libcrypto/shlib_version			patch
sys/sys/sha2.h					1.3 via patch

	Add SHA224 implementation to libc.
	Make libcrypto use the SHA2 implementation of libc.
	Bump minor versions of libc and libcrypto.
	[joerg, ticket #855]

dist/dhcp/client/dhclient.c			1.20

	Limit the length of the address mask before we copy it.
	Fixes CVE-2009-0692.
	[tonnerre, ticket #856]

dist/dhcp/server/dhcp.c				1.11

	Fix behavior of dhcpd in the case where clientid and hardware
	ethernet definitions are mixed. Fixes a refcount assertion.
	[tonnerre, ticket #860]

sys/netinet/tcp_input.c				1.296

	Follow exactly the recommendation of
	draft-ietf-tcpm-tcpsecure-11.txt: Don't check gainst the last
	ack received, but the expected sequence number.  This makes RST
	handling independent of delayed ACK.
	[is, ticket #859]

sys/kern/sys_mqueue.c				1.21 via patch

	mq_send/mq_receive: while permission may allow that, return EBADF
	if sending to read-only queue, or receiving from write-only queue.
	[rmind, ticket #857]

sys/kern/vfs_subr.c				1.379
sys/sys/vnode.h					1.207

	Put a flag bit into v_usecount to prevent vtryget during
	getcleanvnode.  Fixes PR/41374.
	[rmind, ticket #863]

sys/arch/amd64/amd64/trap.c			1.56, 1.57

	Handle protection fault properly.
	[rmind, ticket #865]

sys/dev/ic/ciss.c				1.15
sys/dev/ic/tcic2.c				1.31
sys/dev/isa/if_ntwoc_isa.c			1.18
sys/dev/isa/isadma.c				1.59
sys/dev/pci/if_sk.c				1.57
sys/dev/pcmcia/if_cnw.c				1.46
sys/dev/usb/ulpt.c				1.82

	printf format fixes.
	[dholland, ticket #874]

lib/libc/sys/intro.2				1.53, 1.54

	Mention, along with the behavior of succeeding system calls, the
	normal behavior of succeeding library functions regarding errno.
	(That is, they may leave arbitrary nonzero values in errno.)
	[dholland, ticket #867]

lib/libc/stdlib/strtol.3			1.25, 1.26
lib/libc/stdlib/strtoul.3			1.22, 1.23

	Clarify the description of the errno behavior, based on the recent
	thread in tech-userlevel.
	[dholland, ticket #868]

sys/arch/pmax/pmax/machdep.c			1.233

	Fix an #ifdef botch in rev 1.214 that causes
	[ Kernel symbol table invalid! ] message at boot,
	which means no ksyms(4) support even on GENERIC kernel.
	[tsutsui, ticket #869]

lib/libc/sys/intro.2				1.50 via patch

	PR/40060 - Bug Hunting -- grammar fix
	[dholland, ticket #872]

sbin/wsconsctl/wsconsctl.8			1.26

	PR/40059 - Bug Hunting -- add Xref to wscons.conf(5)
	[dholland, ticket #873]

external/bsd/pkg_install/dist/info/perform.c	pkg_install-20090724
external/bsd/pkg_install/dist/lib/license.c	pkg_install-20090724
external/bsd/pkg_install/dist/lib/pkg_install.conf.5.in pkg_install-20090724
external/bsd/pkg_install/dist/lib/version.h	pkg_install-20090724

	Import pkg_install-20070724:
	- license handling: accept upper case letters. Keep license checks
	 case-sensitive as done in the older pkgsrc logic. Document this.
	- pkg_info:
	 - fix handling of non-packages, that are valid archives
	 - invert order of pkg_info -r to better match the expectations of
	   make update.
	[joerg, #877]

dist/bind/bin/named/update.c			patch

	Fix CVE-2009-0696.
	[christos, ticket #881]

