# $NetBSD: CHANGES-6.0.1,v 1.1.2.35 2012/12/16 19:13:03 riz Exp $

A complete list of changes from the NetBSD 6.0 release to the NetBSD 6.0.1
release:

gnu/usr.bin/groff/tmac/mdoc.local		patched by hand
sys/sys/param.h					patched by hand

	Welcome to 6.0.0_PATCH.
	[riz]

lib/libc/cdb/cdbr.c				1.4

	Don't refuse to open databases without entries or keys.
	[joerg, ticket #577]

sys/arch/x86/include/lock.h			1.26

	Work around a possible gcc bug.  Fixes PR#45673.
	[apb, ticket #606]

doc/CHANGES					patch

	Typo fix: OpenSSL, not OpenSSH.
	[khorben, ticket #608]

doc/3RDPARTY				patch
share/zoneinfo/asia			patch
share/zoneinfo/australasia		patch

	Update timezone definitions to tzdata2012g from
	ftp://ftp.iana.org/tz/releases/tzdata2012g.tar.gz
	Changes from tzdata2012f to tzdata2012g:
	Samoa fall 2012 and later.  (Thanks to Nicholas Pereira
	and Robert Elz.)
	Palestine fall 2012.  (Thanks to Steffen Thorsen.)
	[apb, ticket #627]

usr.bin/calendar/calendars/calendar.netbsd	1.22

	Note the date of the NetBSD 6.0 release.
	[jnemeth, ticket #611]

share/misc/bsd-family-tree			1.45 via patch

	Update the family tree to include the latest releases.
	[jnemeth, ticket #630]

sys/netinet6/frag6.c				1.54

	Fix "atomic fragments" for IPv6.
	[christos, ticket #637]

share/misc/bsd-family-tree			1.46-1.47

	Re-add a line from NetBSD 0.8 to FreeBSD 1.0.
	Add some missing NetBSD releases:  4.0.1, 5.0.1, 5.0.2 and
	5.1.2.
	[riz, ticket #641]

sys/arch/xen/xen/xengnt.c			1.25

	Prevent a memory corruption issue that locks up a Xen DomU,
	and con potentially cause file system corruption.
	PR#47056, PR#47057.
	[royger, ticket #640]

doc/3RDPARTY					patch
share/zoneinfo/asia				patch
share/zoneinfo/southamerica			patch

	Import tzdata2012h from
	ftp://ftp.iana.org/tz/releases/tzdata2012h.tar.gz
	Changes from tzdata2012g to tzdata2012h:
   	   Bahia no longer has DST.  (Thanks to Kelley Cook.)
	   Tocantins has DST.  (Thanks to Rodrigo Severo.)
	   Israel has new DST rules next year.  (Thanks to Ephraim Silverberg.)
	   Jordan stays on DST this winter.  (Thanks to Steffen Thorsen.)
	[apb, ticket #657]

distrib/utils/sysinst/arch/i386/msg.md.de	1.24
distrib/utils/sysinst/arch/i386/msg.md.en	1.64
distrib/utils/sysinst/arch/i386/msg.md.es	1.15
distrib/utils/sysinst/arch/i386/msg.md.fr	1.52
distrib/utils/sysinst/arch/i386/msg.md.pl	1.37

	Remove useless md_may_remove_boot_medium messages.  PR/47039
	[tsutsui, ticket #648]

distrib/utils/sysinst/arch/amd64/Makefile	1.8
distrib/utils/sysinst/arch/i386/Makefile	1.18
distrib/utils/sysinst/msg.mi.de			1.71
distrib/utils/sysinst/msg.mi.en			1.176
distrib/utils/sysinst/msg.mi.es			1.48
distrib/utils/sysinst/msg.mi.fr			1.130
distrib/utils/sysinst/msg.mi.pl			1.87
distrib/utils/sysinst/util.c			1.180

	Make default installation source use the sets in the default file
	system if the root file system is not md(4) - for example,
	on memstick images.
	[tsutsui, ticket #649]

dist/ipf/ipmon.h				patch
dist/ipf/tools/ipmon.c				patch
dist/ipf/tools/ipmon_y.y			patch

	Fix alignment issues in ipmon.  PR#47101.
	[nakayama, ticket #651]

lib/libnpf/npf.c				1.14 via patch

	Fix for npfctl show.
	[rmind, ticket #653]

sys/kern/kern_exec.c				1.358

	Fix posix_spawn()ed processes with attributes.
	[christos, ticket #670]

xsrc/external/mit/xorg-server/dist/exa/exa_priv.h	1.2
xsrc/external/mit/xorg-server/dist/exa/exa_unaccel.c	1.2

	Address graphics corruption using recent Cairo, manifested most
	commonly by certain rendered text sections appearing as solid
	rectangular blocks of colour.
	[abs, ticket #673]

doc/3RDPARTY					patch
share/zoneinfo/africa				patch
share/zoneinfo/asia				patch
share/zoneinfo/australasia			patch
share/zoneinfo/europe				patch
share/zoneinfo/northamerica			patch
share/zoneinfo/southamerica			patch

	Import tzdata2012j from
	ftp://ftp.iana.org/tz/releases/tzdata2012j.tar.gz
	Changes from tzdata2012h to tzdata2012i:
        Changes from tzdata2012h to tzdata2012i:
		Cuba switches from DST on 4 Nov 2012 at 01:00. (Thanks to Steffen
		Thorsen.) 
	Changes from tzdata2012i to tzdata2012j:
		Libya moved to CET this weekend, but with DST planned next year.
		(Thanks to Even Scharning, Steffen Thorsen, and Tim Parenti.)
   	Various fixes to documentation and commentary.
	[apb, ticket #677]

sys/dev/ic/ciss.c				1.28

	ciss(4): don't try to handle sensors if there aren't any.
	[chs, ticket #687]

sys/kern/vfs_vnode.c				1.17
sys/kern/vfs_vnops.c				1.186

	Resolve races between vget() and vrelel() resulting in vget()
	resulting in vget() returning dead vnodes.
	It is impossible to resolve these races in vn_lock().
	[hannken, ticket #692]

sys/dev/usb/if_urndis.c				1.4

	Don't match on idVendor=0x0000 && idProduct=0x0000. Fixes the
	keyboard on a number of HP and possibly other vendors' machines.
	[joerg, ticket #700]

src/lib/libc/softfloat/Makefile.inc		1.11-1.12 via patch
src/doc/HACKS					1.124 via patch
	For arm, add -fno-tree-vrp to COPTS when compiling softfloat.c.
	Without -fno-tree-vrp, -INF + -INF returns 0 by adddf3.  PR#46953.
	[msaitoh, ticket #703]

distrib/notes/common/postinstall			1.75
	Update install note for packages removal.
	[tsutsui, ticket #710]

sbin/mount_msdos/mount_msdos.8				1.35,1.36
	Remove the bit about empty DOS file systems assumed to have short
	names by default.  Note mount_msdos -G option also allows mounting
	X680x0's Human68k floppies.
	[tsutsui, ticket #711]

src/external/mit/expat/dist/lib/expat.h			1.1.1.2 via patch
src/external/mit/expat/dist/lib/xmlparse.c		1.1.1.2 via patch
src/external/mit/expat/dist/xmlwf/readfilemap.c		1.1.1.2 via patch

	Fix CVE-2012-1147, CVE-2012-1148 and CVE-2012-0876 (other security
	issues have been previously fixed in our tree)
	[spz, ticket #715]

sys/kern/kern_event.c					1.79
sys/kern/kern_descrip.c					1.219
lib/libc/sys/kqueue.2					1.33
tests/lib/libc/sys/t_kevent.c				1.2-1.5
	Prevent kernel crash when unsupported fd's are used.
	Mention that kevent returns now EOPNOTSUPP.
	Add a test for adding an event to an unsupported fd.
	[christos, ticket #716]

distrib/emips/miniroot/Makefile.inc		1.3
distrib/hp300/miniroot/Makefile.inc		1.13
distrib/hpcarm/miniroot/Makefile.inc		1.7
distrib/hpcmips/miniroot/Makefile.inc		1.20
distrib/hpcsh/miniroot/Makefile.inc		1.8
distrib/mvme68k/miniroot/Makefile.inc		1.13
distrib/pmax/miniroot/Makefile.inc		1.24
distrib/vax/miniroot/Makefile.inc		1.23

	Add "ipty" to MAKEDEVTARGETS in miniroot/Makefile.inc since
	"MAKEDEV all" no longer creates /dev/pty* device nodes and miniroot
	doesn't mount ptyfs. Fix PR install/47123.
	[tsutsui, ticket #650]

distrib/utils/sysinst/disks.c			1.127
	Don't show a disk which is mounted as root partition in the
	"Available disks" list during sysinst procedure to prevent
	users from shooting their foot in case of installation using
	install-image on a USB stick.  PR#47195.
	[tsutsui, ticket #706]

sys/fs/smbfs/smbfs_smb.c			1.43
sys/netsmb/smb_smb.c				1.33

	Make smbfs actually works on big-endian ports.
	[nakayama, ticket #725]

sys/arch/xen/xenbus/xenbus_xs.c			1.23

	Xen Dom0 NetBSD kernel can crash by adding duplicate xenwatches.
	[royger, ticket #728]

lib/libterminfo/tparm.c				1.9

	Fix off by one error.
	[msaitoh, ticket #734]

external/bsd/bind/dist/CHANGES				patch
external/bsd/bind/dist/version				patch
external/bsd/bind/dist/bin/named/query.c		patch

	Address CVE-2012-5688: Named could die on specific queries with dns64
	enabled.
	[spz, ticket #740]

sys/arch/x86/acpi/acpi_cpu_md.c			1.72

	Disable C1E on AMD K8 CPUs, to prevent freeze during boot. PR#47224.
	[jruoho, ticket #741]

usr.sbin/npf/npfctl/npf.conf.5			1.25 via patch

	Fix the example config.
	[rmind, ticket #744]

sys/net/npf/npf.h				1.23
sys/net/npf/npf_inet.c				1.18
sys/net/npf/npf_mbuf.c				1.8

	npf_rwrcksum: handle delayed checksums in the network stack; also fix
	non-NPF_NAT_PORTS case and add some comments.  PR/47235.
	[rmind, ticket #746]

sys/fs/v7fs/v7fs_file.c				1.5

	Fix off by one error.
	[msaitoh, ticket #748]

sys/arch/i386/i386/multiboot.c			1.22

	Fix off by one error.
	[msaitoh, ticket #749]

