#	$NetBSD: CHANGES-1.6.2,v 1.1.2.138 2003/09/07 13:11:18 tron Exp $

A complete list of changes from NetBSD 1.6.1 to NetBSD 1.6.2:

File						Revision(s)
----						--------

sys/conf/osrelease.sh				patch
share/tmac/doc-common				patch

	Mark this as 1.6.1_STABLE.

sys/dev/ata/ata_wdc.c				1.39
sys/dev/ic/wdcvar.h				1.36
sys/dev/pci/pciide.c				1.191
sys/dev/pci/pciide_pdc202xx_reg.h		1.9

	Make DMA mode works on Promise Ultra66/100 with 48-bit LBA drives.
	Ok'ed by bouyer in tech-kern@netbsd.org.
	[nakayama, ticket #1275]

usr.sbin/etcupdate/etcupdate			1.10

	Use md5 instead of sum (bin/20196).
	[martti, ticket #1146]

sys/dev/pci/if_rtk_pci.c			1.18

	Set RTK_ENABLE flag when it attached. This fixed multicast problem.
	Found by FUKAUMI Naoki <naoki@fukaumi.org>.
	[kanaoka, ticket #1134]

sys/netinet/in.h				1.59

	C++ does not permit static a data member to have the same name as its
	class, so in a C++ environment rename the ip_opts member to Ip_opts as
	observed in several other implementations; from Jon Olsson in
	PR toolchain/19880.
	[kleink, ticket #1119]

etc/services					1.63

	Add ms-sql-{s,m}, currently quite popular in packet filter logs
	worldwide.
	[ross, ticket #1132]

usr.bin/tftp/tftp.c				1.16

	Fix sendto return value check (incomplete change in 1.14).
	Noted by Brian Ginsbach in PR 19842.
	[wiz, ticket #1139]

sys/netiso/clnp_er.c				1.13

	Keep pkthdr when prepending new mbuf in front of a given chain.
	This keeps us from panic()ing in the interface output routine.
	[is, ticket #1295]

sys/kern/init_main.c				1.215
usr.bin/login/login.c				1.72

	Update copyright notice.
	[fair, ticket #1303]

etc/mrouted.conf				1.5
share/man/man4/ntwoc.4				1.4
	Fix typos.
	[keihan, ticket #1135]

sys/dev/scsipi/scsiconf.c			1.199

	Add PQUIRK_NOLUNS entry for "NEC     ", "CD-ROM DRIVE:502".
	Fixes PR kern/18479
	[bouyer, ticket #1140]

sys/dev/pci/pcidevs				1.503
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate

	Add SiS 651 host bridge.
	[bouyer, ticket #1143]

sys/dev/scsipi/scsiconf.c			1.198

	Remove revision in quirk entry for TOSHIBA XM-4101TASUNSLCD.
	The same drive with a newer revision also fails, so assume all
	revisions are bad until proven otherwise.
	[bouyer, ticket #1155]

sys/kern/kern_malloc.c				1.73
sys/uvm/uvm_amap.c				1.45
sys/uvm/uvm_amap.h				1.18
sys/uvm/uvm_extern.h				1.72
sys/uvm/uvm_km.c				1.58
sys/uvm/uvm_map.c				1.119

	Add a new km flag UVM_KMF_CANFAIL, which causes uvm_km_kmemalloc() to
	return failure if swap is full and there are no free physical pages.
	have malloc() use this flag if M_CANFAIL is passed to it.
	use M_CANFAIL to allow amap_extend() to fail when memory is scarce.
	this should prevent most of the remaining hangs in low-memory
	situations.
	[skrll, ticket #1156]

usr.bin/progress/progress.c			1.7

	Use an even more elaborate wait loop; it turns out we have a
	child before we even start when run from sysinst.
	[ross, ticket #1167]

usr.bin/cdplay/cdplay.c				1.22

	Fix PR 18444 and a few other corner cases in cdplay.c.
	[is, ticket #1172]

sys/arch/mac68k/dev/akbdmap.h			1.4
sys/arch/macppc/dev/akbdmap.h			1.5

	Merged mac68k and macppc keyboards, since they are the
	same. The file could move to <arch/mac> if one day we create
	it.

	Added a french keyboard layout.
	Fixed french keymap: option was not mapped correctly, thus making
	impossible to use |{}[] (tested).
	Added jp keymap from PR/15438, and sf, sv, de and uk keymaps from
	OpenBSD. (all untested).
	[manu, ticket #1183]

sys/net/if_ethersubr.c				1.105

	Ignore multicast PPPoE packets ASAP.
	This improves performance a lot on slow machines behind a cable modem.
	Protect it with PPPOE_SERVER as a reminder that this will have to be
	changed if we add PPPoE server code in the kernel one day.
	[aymeric, ticket #1188]

share/misc/style				1.23

	Return value style update (no parentheses)
	[mason, ticket #1191]

lib/libc/citrus/citrus_ctype_template.h		1.15-1.20
lib/libc/citrus/citrus_none.c			1.6-1.7

	mbsrtowcs_priv template:
        	n == 0 is not an error. it's a valid input.
	_citrus_NONE_ctype_mbsrtowcs:
		fix a typo that causes SEGV.
	while i'm here, make them similar each other.
	when s==0, wctomb should initialize its internal state and return if
	encodings have state dependency or not. Fix part of PR 18269.
	In _RESTART_BEGIN macro, don't use external variable directly.
	- add missing _CEI_TO_EI/_TO_CEI.
	- add missing _STATE_NEEDS_EXPLICIT_INIT checks.
	- more comment.
	- add missing _CEI_TO_EI/_TO_CEI.
	- don't use 'cl' before assert it's non NULL.
	- handle s==NULL case of wcrtomb.
	- add a comment about it.
	Fix rest of PR 18269 by wurlitzer.
	[yamt, ticket #1202]

sbin/fdisk/fdisk.c				1.55

	Add partition type 0xaf for Apple HFS.
	[jdarrow, ticket #1205]

sbin/fdisk/fdisk.c				1.56

	Make the -l flage more useful, by actually printing the systype number
	alongside the sysid string (instead of just the array index of the
	struct part_type they are found in).
	Now fdisk -l shows the familiar 169 for NetBSD, 165 for FreeBSD or
	386BSD or old NetBSD, and other possibly-familiar (131 for Linux
	native,	015 for Ext. Partition - LBA) values in with their correct
	numbers.
	[jdarrow, ticket #1206]

sys/uvm/uvm_bio.c				1.27

	For PMAP_CACHE_VIVT platforms, make UBC_RELEASE_UNMAP evaluate to TRUE,
	and add a comment explaining why.
	[thorpej, ticket #1207]

usr.sbin/rtadvd/rtadvd.c			1.27-1.28

	Add missing ND option length validation.  from kame
	correct use of sizeof
	[itojun, ticket #1212]

share/misc/style				1.23

	Return value style update (no parentheses)
	[mason, ticket #1191]

sys/dev/pci/if_sip.c				1.78

	Add a work-around for the "short cable problem" that some DP83815
	revisions have, as discussed on the soekris-tech mailing list a
	while ago, whereby one can experience excessive recieve erros when
	using < 30m cables.  The patch detects overflow in a DSP filter
	parameter, and corrects it by writing a known good value.
	[thorpej, ticket #1228]

crypto/dist/ssh/auth.c				1.18

	Add missing
		hp = strtok(NULL, ",");
	to end of while loop which parses "host.allow" from login.conf(5).
	Otherwise, sshd(8) would just infinite loop unless there was a
	(positive or negative) match in the first word of the "host.allow"
	list...
	[lukem, ticket #1231]

libexec/lfs_cleanerd/cleanerd.c			1.40

	For -b, use ssize instead of segshift.
	Segshift is invalid for v2 filesystems.
	[toshii, ticket #1232]

usr.bin/mail/popen.c				1.15

	Fix a bug introduced by Christos Zoulas in version 1.4.
	He accidently moved the call to block the SIGCHLD to the wrong side of
	the call to findchild().
	Caused a coredump in one in every N thousand invocations of mail,
	which I have been hunting for literally years.
	Fixes PR 19696 from Mason Loring Bliss, too.
	[perry, ticket #1236]

share/man/man8/man8.amiga/boot.8		1.8
share/man/man8/man8.amiga/installboot.8		1.19

	Fix typos reported by Igor Sobrado (PR port-amiga/20950).
	[is, ticket #1238]

sys/uvm/uvm.h					1.32

	Protect "struct uvm" with _KERNEL.
	[cjep, ticket #1240]

sys/netinet6/in6_pcb.c				1.53

	Include opt_inet.h -- found by David Laight
	[itojun, ticket #1241]

etc/rc.d/bootconf.sh				1.7

	Variable substitution happens at trap installation time, not at trap
	execution time - so it used to print "Using default configuration of
	/etc/passwd".
	[is, ticket #1242]

bin/csh/csh.1					1.37

	Additional text & formatting for the csh "limit" command;
	hopefully this satisfies PR 11658
	[fair, ticket #1243]

libexec/talkd/talkd.c				1.16

	verify strvis() buffer length is enough.  make sure string termination
	before use.  remove extra ntohs() which is not needed.  from Charles
	Blundell
	[itojun, ticket #1001]

sys/dev/scsipi/ses.c				1.19-1.20

	The Double-Semi-Colon Police.

	kern/20231- pass the correct argument (arg_addr) on thru to
	scsipi_do_ioctl, not the locally dereferenced fetch.
	[mjacob, ticket #1162]

sys/dev/pci/agp.c				1.26

	Don't match a PCI graphics card in a system which supports an AGP.
	Patch supplied by Quentin Garnier in PR kern/19256.
	[tron, ticket #1181]

sys/sys/agpio.h					1.2

	From FreeBSD: Fix an off-by-bit error in the AGP_MODE_[GS]ET_RATE()
	macros.

	This fixes PR kern/20480 by Quentin Garnier.
	[tron, ticket #1182]

include/vis.h					1.13

	this needs <sys/types.h>
	[klienk, ticket #1210]

usr.bin/menuc/menuc.1				1.12

	Replace some \n with \en for correct display. Closes PR 18539.
	[manu, ticket #1226]

sys/dev/pci/if_bge.c				1.38

	Don't print a kernel message like "bge0: gigabit link up" when a
	Gigabit link is detected. No other ethernet driver does this and this
	driver doesn't do it for other modes.
	[tron, ticket #1230]

lib/libcurses/curses_private.h			1.30 (via patch)
lib/libcurses/getch.c				1.40 (via patch)
lib/libcurses/screen.c				1.13 (via patch)
lib/libcurses/tty.c				1.32 (via patch)

	Keep the cr->nl translation state in a separate variable, so that we
	can do the translation ourselves (if the tty didn't do it for us).
	Add debugging to track functions that change tty state.
	[jdc, ticket #1244]

usr.bin/chpass/Makefile				1.13

	Build custom getpwent.o only if USE_YP==no. Otherwise, chpass will not
	get the current passwd entry from NIS. Problem reported by Stephen M.
	Jone on tech-net.
	[bouyer, ticket #1245]

sys/dev/pci/if_bge.c				1.34
sys/dev/pci/if_bgereg.h				1.7

	FreeBSD fix for problems reported (to FreeBSD) with 16-bit accesses
	to 32-bit device registers. Add (untested) NetBSD fix for big-endian
	hosts.  From FreeBSD versions:
		if_bge.c:	1.26 and 1.27
		if_bgereg.h: 1.12

	FreeBSD (MFC) comment:

	MFC:  Avoid 16-bit accesses to device memory.  Use volatile where
	appropriate in referencing device memory.  Parenthesize BGE_HOSTADDR
	define properly.
	[tron, ticket #1249]

sys/dev/pci/if_bge.c				1.35
sys/dev/pci/if_bgereg.h				1.8

	Commit the FreeBSD alternative of a private patch to check NIC internal
	ram for using TBI, versus MII/GMII.

	FreeBSD commit log and versions:
	   Obtain the media type from the shared memory and only use the eeprom
	   as a fallback.

	   if_bge.c:	rev 1.30
	   if_bgereg.h:	rev 1.13

	Thanks to Paul Saab @mu.org.
	[tron, ticket #1250]

usr.bin/window/wwiomux.c			1.8

	Fix a bug where window(1) would (appear to) miss a character when two
	characters are typed fast one after the other (<10 ms).
	The visual effect under vi(1) was even more impressive. ;-)
	This bug was actually introduced inadvertantly in 1995 in rev 1.4.
	[aymeric, ticket #1252]

lib/libkvm/kvm.c				1.65.4.2

	Set the close-on-exec bit on all file descriptors we open. Inspired
	by a FreeBSD security advisory.
	[david, ticket #1255]

sys/dev/pci/if_wm.c				1.36

	Pullup short mbuf in wm_tx_cksum() instead of dropping it which fixes
	PR kern/21190 by myself. Jason R. Thorpe code reviewed the changes.
	[tron, ticket #1256]

sys/netinet/ip_icmp.c				1.73

	Clear hardware checksum flags before reusing a mbuf for an ICMP reply
	as suggested by Enami Tsugutomo. This fixes PR kern/21203 by myself.
	[tron, ticket #1260]

sys/arch/amiga/dev/grf_et.c			1.20-1.21

	iszthreepa() takes a physical address, not a virtual address.
	This fixes PR 19175, reported and heavily debugged by Pawel
	Chwalowski.
 
	fix fatal typo
	[is, ticket #1266]

share/man/man4/scc.4				1.3-1.5

	Add MAKEDEV(8) to the SEE ALSO list.
	Clean up nroff problems.

	Change the serial port file names in the FILES section to ttyB0,
	etc. to match current reality, per PR 19572

	Add some paragraph breaks to make the text more readable, and to
	more clearly separate the topics covered.

	Sprinkle Tn macros liberally. Update the man page date.

	Gaaaaaah! I should have double checked that pmax had been changed
	to match alpha, and they're different - alpha: ttyB0, pmax: ttya

	So, change the FILES section again to differentiate between alpha
	and pmax, plus add a clear statement in the first paragraph as to
	which computers listed are supported by which port.

	Hopefully this will properly answer PR 19752
	[fair, ticket #1271]

sbin/dump/rcache.c				1.20

	The sysctl returning the amount of memory in the system returns "int",
	which is silly.  Luckily, it really does return the correct result if
	interpreted as an unsigned int.  This change lets dump work on 32-bit
	systems that have more than 2GB of RAM.
	[rafal, ticket #1272]

sys/dev/wscons/wsemul_vt100.c			1.13
sys/dev/wscons/wsemul_vt100_subr.c		1.24 (via patch)
sys/dev/wscons/wsemul_vt100var.h		1.7

	fix crash due to wrong argument in the (almost useless)
	DECRQUPSS escape sequence

	PR/17738: Matthias Drochner, PR/21230: Onno van der Linden: vt100
	wscons crashes restoring cursor. Fixed by adding a flag as suggested.
	[drochner, ticket #1277]

sys/dev/pci/pcidevs				1.511-1.512 (via patch)
sys/dev/pci/pcidevs.h				Regenerate
sys/dev/pci/pcidevs_data.h			Regenerate
sys/dev/pci/pciide.c				1.182 (via patch)
sys/dev/pci/pciide_sis_reg.h			1.10 (via patch)
sys/dev/pci/pciidevar.h				1.9 (via patch)

	Rework SiS support: more controller supported (up to Ultra/133) and
	better support for the older ones.

	Information for this work extracted from Soeren Schmidt's FreeBSD
	driver.

	Sync with the latest diff I made available, and also include changes
	from kern/18015 which is much better than the hack I've done.
	[bouyer, ticket #1234]

share/misc/na.phone				1.16-1.18 (via patch)

	Fix comment about format.
	Fixes PR misc/17722 from David MacKenzie.

	Add new numbers, remove some stars, and mildly sort it so that it's
	actually in numeric order.

	re-gen with new machinery. Finally up-to-date.
	[jhawk, #1189]

share/man/man8/man8.sun2/boot.8			1.1-1.4 (new)
share/man/man8/man8.sun2/Makefile		1.2
distrib/sets/lists/man/mi			1.573

	Added a boot(8) man page for sun2.

	Use more mdoc macros; comment out reference to non-existing crash(8)
	from SEE ALSO.

	Added a SYNOPSIS section, added content about boot device
	selection, and added the man page to the set lists.

	New sentence, new line; drop trailing spaces.
	[fredette, ticket #1278]

crypto/dist/kame/racoon/crypto_openssl.c	1.6

	fix "round up to 8" code.  from kame
	[itojun, ticket #1270]

sys/arch/newsmips/newsmips/cpu_cons.c		1.7

	Fix unexpected fallthrough in switch statement.

	This should fix boot failure of the INSTALL kernel
	on news3400 with serial console.
	[tsutsui, ticket #1276]

sys/netinet6/ip6_mroute.c			1.47

	don't try to forward multicast packet to mif that went away.
	[itojun, ticket #1317]

sys/arch/mac68k/dev/if_mc.c			1.21
sys/arch/macppc/dev/am79c950.c			1.14

	Don't bring down mc(4) interfaces when they underflow.
	Fixes PR#12088. [bjh21, ticket #1314]

sys/netinet/tcp_input.c				1.168

	Inherit IPV6_V6ONLY from listening socket. Fixes PR#21713.
	[itojun, ticket #1304]

sys/dev/pci/if_ste.c				1.17

	Add a missed htole32() for DMA txdescs.
	[tsutsui, ticket #1315]

sys/dev/ic/i82557.c				1.74 (via patch)

	Fix of possible null pointer dereferences.
	[yamt, ticket #1296]

etc/services					1.65

	Add "kamanda" 10081/udp for Amanda with Kerberos. Fixes PR#21756.
	[fair, ticket #1312]

sys/net/route.h					1.32
sys/net/route.c					1.55
sys/netinet/ip_input.c				1.163 (via patch)

	Remove all entries in rt timer queue on ip_mtudisc change, instead
	of destroying the queue.
	[itojun, ticket #984]

sbin/mount_union/mount_union.8			1.14

	Add some mdoc macros. Add text from PR 13878, modified.
	[fair, ticket #1283]

usr.bin/du/du.c					1.21 (via patch)

	If no files are specified on the command line, put { ".", NULL } in
	it's own little array instead of writing over argv.  Fixes problems
	where du shows up in ps as ". fts_open `%s'" (and shorter or longer
	combinations of that depending in what argc was).
	[simonb, ticket #1284]

distrib/sets/lists/base/shl.mi			1.211 (via patch)
lib/libc/arch/powerpc/net/Makefile.inc		1.2
lib/libc/shlib_version				1.131 (via patch)

	Build {h,n}to{n,h}{l,s}() into object code; addresses PR
	port-macppc/21541 from Tsuyoshi MOMOSE.

	Bump to libc.so.12.83.2, due to addition of {h,n}to{n,h}{l,s}() on
	PowerPC.
	[kleink, ticket #1288]

dist/dhcp/common/discover.c			1.6

	Skip !IFF_BROADCAST interfaces (such as strip). After discussion
	with Ted Lemon leave in checks for IFF_LOOPBACK and IFF_POINTTOPOINT
	in case an OS incorrectly marks them with IFF_BROADCAST.
	Patch submitted back to dhcp-server@isc.org
	[abs, ticket #1292]

distrib/notes/macppc/prep			1.37

	Fix broken link. Pointed out by Ray Phillips on www@.
	http://asu.info.apple.com/ has been replaced by
	http://www.info.apple.com/support/downloads.html.
	[yyamano, ticket #1297]

lib/libc/stdio/vfscanf.c			1.34

	Fix handing of -ve hexadecimal numbers in the %i format.  Fixes
	PR lib/21691.  Patch from Simon Burge.
	[thorpej, ticket #1298]

sys/sys/shm.h					1.33

	Include <sys/unistd.h> for the definition of _SC_PAGESIZE, which is
	required for run-time retrieval of SHMLBA.  While this does make
	visible additional symbols which are not in the underscore-prefixed
	implementation-reserved namespace, its impact should be negligible (and
	most applications supposedly include <unistd.h> as well), and there is
	verify strvis() buffer length is enough.  make sure string termination
	before use.  remove extra ntohs() which is not needed.  from Charles
	Blundell
	[kleink, ticket #1301]

distrib/notes/macppc/hardware			1.31-1.34

	- Add mention of experimental MP support in -current
	- Apple's official name for recent iBooks is actually (16VRAM).
	- D'oh -- PowerComputing PowerBase models are actually Open Firmware
	  2.0.

	- misc small typos and wording cleanup
	- PowerBase is actually Open Firmware 2.0.x
	- add iBook (16VRAM) and iBook (Summer2002) as supported models
	- mention next release of NetBSD will support multiple CPUs
	- mention that some L3 caches on CPU upgrades may not be enabled by
	  default
	- PowerMacintosh G4 (FW 800) model is reported to work with 1.6.1
	- macppc uses gem driver instead of gm ethernet driver now
	- macppc uses tlp driver instead of de ethernet driver now
	- AirPort Extreme is unsupported
	- full wscons capabilities not supported (virtual terminals and color)
	- keyboard problems with iMac and B&W G3 seem to have been cleared up
	[mbw, ticket #1305]

distrib/notes/macppc/install			1.26

	misc small typos and wording cleanup
	fix links to newly updated Partitioning HOW-TO and mention use of pdisk
	can't view files on official ISO image or floppy from Open Firmware
	keyboard problems with iMac and B&W G3 seem to have been cleared up
	[mbw, ticket #1306]

distrib/notes/macppc/prep			1.38

	misc small typos and wording cleanup
	fix links to newly updated Partitioning HOW-TO
	OF 3 firmware update 4.1.7, mention that it's not much of a problem
	anymore
	point to ZTerm home page
	redo partitioning section
	update now that there's a pair of boot floppies
	change MS-DOS floppy section to be Zip disk
	[mbw, ticket #1307]

distrib/notes/common/contents			1.90

	mention macppc has two floppies now
	[mbw, ticket #1308]

distrib/notes/common/netboot			1.15

	detab a few lines, and in general try to make it better for 80 column
	printout
	[mbw, ticket #1310]

distrib/notes/common/sysinst			1.63

	fix a macppc TOC heading to be a little shorter
	[mbw, ticket #1311]

sys/netatalk/at_control.c			1.8

	Make "ifconfig $interface" display phase 1 addresses also.
	[is, ticket #1313]

sys/arch/sparc64/sparc64/intr.c			1.43

	Fix yet another inverted comparison.
	[martin, ticket #1318]

usr.bin/vi/vi/v_txt.c				1.11

	When an error occurs in v_txt(), leave input mode too.
	Otherwise, (among other things) db_get() thinks it can re-use the TEXT
	buffers when it's not true, leading to a crash because that TEXT buffer
	will be released just before it is actually used to create a new one.
	This fixes PR#21797.
	[aymeric, ticket #1320]

sys/net/if.c					1.118 (via patch)

	AF_LINK sockaddr has to be attached to ifp->if_addrlist until the end,
	as many of the code assumes that TAILQ_FIRST(ifp->if_addrlist) is
	non-null.
	[itojun, ticket #1290]

sys/netatalk/aarp.c				1.13
sys/netatalk/ddp_output.c			1.7 (via patch)

	- don't use M_WAIT within splnet.
	- retain m_pkthdr for mbuf passed down to ifp->if_output.
	  pointed out by is@netbsd
	[itojun, ticket #1316]

sys/arch/macppc/conf/GENERIC			1.157
sys/arch/macppc/conf/files.macppc		1.58
sys/arch/macppc/dev/kauai.c			1.1, patch (new)
sys/arch/macppc/dev/obio.c			1.18
sys/dev/pci/pcidevs				1.516
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate

	Support the PowerBook G4 12-inch (and maybe 17-inch).
	  Kauai ATA, new obio chip, and Japanese keymap for
	  WSDISPLAY_COMPAT_RAWKBD

	Add new Apple devices.
	[hamajima, ticket #1323]

sys/arch/macppc/conf/GENERIC			1.140
sys/arch/macppc/dev/akbd.c			1.26-1.27
sys/arch/macppc/dev/akbdvar.h			1.6-1.7
sys/arch/macppc/include/keyboard.h		1.4

	akbd's now have a raw mode, and implement the WSKBDIO_SETMODE ioctl.
	Adapted from OpenBSD.

	Remove the key repeating feature.
	It is asking for trouble and is useless for the X server.
	We can add it back later if need be.

	add (commented out) option WSDISPLAY_COMPAT_RAWKBD
	[aymeric, ticket #1324]

sys/dev/pci/yds.c				1.17
sys/dev/pci/ydsreg.h				1.3-1.4

	Typo.
	Register value symbols YDS_PCI_EX_LEGACY_SBMOD_* ->
	YDS_PCI_EX_LEGACY_SMOD_*.

	Disable ISA DMA emulation for SoundBlaster module explicitly.
	This fixes the floppy access problem on some hardware.
	Problem reported by Miroslav Kure via Jason Wright <jason [at]
	thought [dot] net> of OpenBSD. Thanks.

	Fix from ALSA driver; although this setting is undocumented but
	according to Jaroslav Kysela <perex [at] suse [dot] cz> of ALSA,
	there's no error reported so far.
	[hubertf, ticket #1322]

sys/arch/newsmips/conf/GENERIC			1.57

	Enable options NTP, DDB and SCSIVERBOSE.
	[tsutsui, ticket #1285]

sys/arch/newsmips/conf/GENERIC			1.59
sys/arch/newsmips/conf/INSTALL			1.17

	Use wildcard for scsibus at sc0.
	[tsutsui, ticket #1287]

sys/dev/sbus/stp4020.c				patch

	Make it compilable.
	[martin, ticket #1319]

etc/rc.d/ipnat					1.9

	Change behaviour of 'reload' to only reload the NAT rules and NOT flush
	the state table, making it much more useful.
	[grant, ticket #1321]

sys/dev/pci/if_wmreg.h				1.5

	Fix to recognize the PHY on i83543 correctly.
	[thorpej, ticket #1299]

distrib/sets/checkflist				1.18
distrib/sets/lists/xbase/md.macppc		1.6
distrib/sets/lists/xbase/mi			1.25
distrib/sets/lists/xbase/md.i386		1.11
distrib/sets/lists/xbase3/mi			1.2
distrib/sets/lists/xbase4/md.i386		1.2
distrib/sets/lists/xbase4/mi			1.3-1.7
distrib/sets/lists/xbase4/obsolete.mi		1.1 (new)
distrib/sets/lists/xbase4/shl.elf		1.2
distrib/sets/lists/xbase4/shl.mi		1.2
distrib/sets/lists/xcomp/mi			1.11
distrib/sets/lists/xcomp3/mi			1.2
distrib/sets/lists/xcomp4/mi			1.3
distrib/sets/lists/xcomp4/obsolete.mi		1.1 (new)
distrib/sets/lists/xfont4/mi			1.2-1.4
distrib/sets/lists/xserver4/md.i386		1.2
distrib/sets/lists/xserver4/md.macppc		1.5

	Update X11 sets for XFree86 4.3.0.
	[tron, ticket #1326]

sys/net/if_ethersubr.c				1.109 (via patch)
sys/net/if_ieee1394subr.c			1.23
sys/net/if_spppsubr.c				1.66
sys/net/if_tokensubr.c				1.22

	don't call if_free_sadl() until very end of if_detach() logic.  many
	of routing table manipulation code assumes the presense of AF_LINK
	sockaddr.  should fix PR 21581
	[itojun, ticket #1325]

distrib/notes/macppc/hardware			1.36

	iBook (14.1 LCD 32 VRAM) is reported to work by David Friggens
	PowerBook G4 (12-inch) and PowerBook G4 (17-inch) supported thanks to
	HAMAJIMA Katsuomi
	[mbw, ticket #1327]

sys/arch/macppc/dev/wdc_obio.c			1.25

	Fix wdc_obio_dma_init() confused WDC_DMA_LBA48 with WDC_DMA_READ.
	This was tested by jtb@netbsd.org.
	[hamajima, ticket #1328]

sys/arch/sparc64/conf/files/files.sparc64	1.74
sys/arch/sparc64/include/cpu.h			1.35 (via patch)
sys/arch/sparc64/include/cpu_counter.h		1.1 (new)
sys/arch/sparc64/sparc64/clock.c		1.55
sys/arch/sparc64/sparc64/cpu.c			1.28 (via patch)
sys/arch/sparc64/sparc64/locore.s		1.169
sys/kern/kern_microtime.c			1.1 (new)

	Switch to use cycle counter (%tick) based microtime().

	This is derived from alpha/microtime.c and i386/tsc_microtime.c,
	and will share with both ports.
	[nakayama, ticket #1329]

sys/arch/sparc64/sparc64/locore.s		1.173

	Divide `set' instruction in delay slot (from OpenBSD change to rev
	1.30).
	[nakayama, ticket #1330]

sys/arch/sparc64/sparc64/process_machdep.c	1.12 (via patch)

	Wrap a 64-bit mode case with #ifdef __arch64__ for 32-bit kernels,
	and fix typo in comment.
	[nakayama, ticket #1331]

sys/dev/audio.c					1.161

	fix unitialized variable. from simonb. OI
	[nakayama, ticket #1332]

sys/ufs/ffs/ffs_inode.c				1.52

	Move a brace that is in the wrong position when changes from FreeBSD
	were added in rev 1.51.  This may fix the "N lost blocks" problem some
	people have noticed.
	Reviewed by fvdl.
	[nakayama, ticket #1333]

sys/dev/usb/uaudio.c				1.61

	Correct test for busy-ness when setting parameters.
	[nakayama, ticket #1334]

sys/net/rtsock.c				1.61

	recover code that requires exact match on rtm_change/lock (lost in
	1.16). without it "route change X" would change less-specific route by
	mistake.  reported by jinmei@kame
	[itojun, ticket #1336]

sys/arch/newsmips/dev/zs_hb.c			1.14

	Call zshard() twice in zshard_hb() interrupt handler for workaround
	otherwise news3400 sometimes losts zs interrupts.

	This should fix "serial console hiccups on sysinst" problem
	reported by Mauricio <raub at kudria.com> on port-newsmips.
	[tsutsui, ticket #1286]

sys/arch/macppc/dev/ofb.c			1.29-1.30, 1.33

	Update OFB_ENABLE_CACHE to search for a empty bat that does not
	conflict the USER_SR or one of the kernel SRs.

	for ofb_enable_cache, turn on the BAT_M bit as well to prevent
	the framebuffer from getting scrambled on MP systems.

	Initialize the framebuffer BAT with BAT_G, too.  This marks the region
	as (G)uarded, protecting it from the processor being too aggressive in
	reordering and prefetching.  This allows OFB_ENABLE_CACHE to work on my
	Powerbook G4.
	[briggs, ticket #1274]

share/mk/bsd.info.mk				1.28

	Fix "clean" rule to honor "CLEANFILES" variable.
	[tron, ticket #1337]

sys/arch/macppc/include/keyboard.h		1.5

	This change supports Japanese layout keyboard for
	WSDISPLAY_COMPAT_RAWKBD on macppc.
	[hamajima, ticket #1338]

etc/rc.subr					1.57

	run_rc_command(): when checking if ${command} exists before
	executing it, be sure to check under ${name_chroot} (if set).
	Fix from Ed Ravin in [bin/18523]
	[lukem, ticket #1346]

usr.bin/mkdep/mkdep.c				1.16

	catch SIGPIPE, too.
	[msaitoh, ticket #1339]

sys/netinet/igmp.c				1.34
sys/netinet/igmp_var.h				1.16
sys/netinet/in.c				1.87

	purge rti structure (in igmp.c) for removed ifp on if_detach().
	[itojun, ticket #1341]

sys/netinet/in.c				1.89
sys/netinet/ip_mroute.c				1.72
sys/netinet/ip_mroute.h				1.21

	cleanup multicast routing stuff on if_detach().
	[itojun, ticket #1342]

sys/netinet/ip_mroute.c				1.73

	expire mrt if mrt_stall goes empty.  ono@kame
	[itojun, ticket #1345]

usr.sbin/rpc.lockd/lockd_lock.c			1.19 (via patch)

	We can't keep a reference to the value returned by svc_getrpccaller().
	Instead malloc() some memory and copy the sockaddr returned there.
	Fix a bug where after a blocked lock gets granted, the grant message
	would be sent to the wrong machine (or possibly to a completely bogus
	address).

	While there, add a NULL check for the return value of another malloc().
	[bouyer, ticket #1347]

sys/dev/pci/if_fxp_pci.c			1.32-1.33 (via patch)
sys/dev/pci/pcidevs				1.506 (via patch)
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate

	add Intel PRO/100M.

	apparently this driver works fine for Intel PRO/100 VM with 82562EM/EX
	PHY, so make driver match it
	while here, also make the driver match 'Intel PRO/100 VM with
	82562EM/EX (CNR) PHY', with anticipation it would work fine too
	activate the resume and dynamic standby bug workaround for these;
	might not be necessary (not confirmed to be needed), but better safe
	than sorry
	[drochner, ticket #1343]

distrib/utils/sysinst/arch/sgimips/md.c		1.4

	Use the real size of the disk, not cyl*head*sect.
	Handle the "use existing" option for partitions (but keep d as the
	boot partition).
	While I'm there use get_real_geom() instead of custom code to get the
	existing disklabel.
	[bouyer, ticket #1348]

share/man/man4/vlan.4				1.21

	Add tl(4), while I'm there add a few others adapters that are known to
	support ETHERCAP_VLAN_MTU.
	[bouyer, ticket #1349]

sys/dev/pci/if_tl.c				1.57

	tl(4) supports ETHERCAP_VLAN_MTU.
	[bouyer, ticket #1350]

sys/dev/pcmcia/if_xi.c				1.28

	The driver puts the adapter in promisc mode to receive multicast
	addresses.  At last set the IFF_PROMISC flag so that the upper layer
	filters frames that are not for us.
	[bouyer, ticket #1351]

sys/arch/alpha/conf/files.alpha			1.160

	As pceb pulls in sio.c and sio_pci.c, is also needs the
	alpha_shared_intr attribute.
	[bouyer, ticket #1352]

sys/dev/ata/ata.c				1.18

	Bump WDCC_IDENTIFY timeout to 3 seconds, as required by some drives.
	Reported by Karl Janmar <karlj@mdstud.chalmers.se> on tech-kern.
	[bouyer, ticket #1353]

sys/dev/ata/wd.c				1.248-1.250 (via patch)
sys/dev/ic/wdcreg.h				1.27

	Add support for the getcache/setcache ioctls.

	Acceptable cache operations are r and rw, not none and w
	Properly initialise the timeout value.

	Fix typo.

	Rename WDSF_EN_WR_CACHE to WDSF_WRITE_CACHE_EN for consistency with
	other subcommands.
	[bouyer, ticket #1354]

sbin/brconfig/brconfig.8			1.9-1.10 (via patch)
sbin/brconfig/brconfig.c			1.5 (via patch)
sys/net/if_bridge.c				1.11 (via patch)
sys/net/if_bridgevar.h				1.3 (via patch)

	Fix 2 bugs:
	- initialise stp when the bridge is turned up, without this stp will
	  keep all interfaces disabled in a sequence like:
	  brconfig bridge0 add if0 add if1 stp if0 stp if1 up
	- s/BRDGSPRI/BRDGSIFPRIO in brconfig.c:cmd_ifpriority()

	add a command (ifpathcost) to change the stp path cost of the STP path
	cost of an interface. Display the interface path cost with the others
	STP parameters.
	[bouyer, ticket #1355]

sys/net/if_ether.h				1.30
sys/net/if_ethersubr.c				1.106

	Make promiscous mode work on vlans: introduce a new link-layer m_flag
	M_PROMISC. In ether_input(), flag packets comming from an interface in
	promiscous mode which are not for us M_PROMISC instead of droping them.
	Drop M_PROMISC packets which are not passed to vlan_input(). M_PROMISC
	packets passed to vlan_input() will be looped back to ether_input()
	the M_PROMISC flag will be handled appropriately.
	Clear M_PROMISC before giving the packet to bridge, as bridge has its
	own checks for local MAC addresses.
	This also makes bridges on vlan working.
	[bouyer, ticket #1356]

sys/arch/amiga/amiga/amiga_init.c		1.86

	Do not use RELOC() after the MMU is enabled.
	Move the two assignments that were made after the MMU is on, before.

	From Gunther Nikl on port-amiga@. Thanks!
	[aymeric, ticket #1357]

sys/netinet/ip_output.c				1.106-1.107

	after pfil_run_hooks, need to fix hlen as well

	freebsd code somehow crept in
	[itojun, ticket #1358]

sys/netinet/igmp.c				patch

	Make it compilable.
	[itojun, ticket #1360]

sys/netinet/in.c				patch

	Make it compilable.
	[itojun, ticket #1361]

sys/nfs/nfs_serv.c				1.80

	nfsrv_commit(): return success and don't do anything for requests
	which starts past the end of the file. This can happen when two
	clients are writting to the same file.
	Close PR 21696 by myself, discussed on tech-net in 2003/05 and 2003/06.
	Issue raised by Chuck Silvers (commit and truncate ops needs to be
	serialised) still unadressed.
	[bouyer, ticket #1373]

sys/net/if_spppsubr.c				1.67 (via patch)

	We should use IFQ_DEQUEUE to get packets from the send queue, not
	IF_DEQUEUE. Hopefully this will fix ALTQ for ISDN and PPPoE interfaces.
	[martin, ticket #1374]

sys/netinet6/esp_input.c			1.30

	Fix missing check for taillen against pkthdr.len.
	[itojun, ticket #1364]

sys/dev/pci/pcidevs				1.542
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate

	Add some intel devices, from Quentin Garnier in private mail.
	[bouyer, ticket #1365]

sys/netinet/ip_mroute.c				1.75 (via patch)

	Better ip_mrouter_detach().
	[itojun, ticket #1363]

sbin/scsictl/extern.h				1.4
sbin/scsictl/scsi_subr.c			1.6-1.7
sbin/scsictl/scsictl.8				1.14-1.16
sbin/scsictl/scsictl.c				1.16-1.18

	Several changes/updates to scsictl:
	 o Allow specification of logical blocksize
	 o Add 'getcache' and 'setcache' commands
	 o Add 'tur', 'reserve', 'release', 'start', and 'stop' functions
	 o Add an 'immediate' option to do formatting in the background
	 o Fix bug in scsi_command -- value in resets is an int not a
	   bitmask
	 o Fix usage of errx() / warnx() and remove unneeded trailing \n
	[thorpej, ticket #764]

sys/dev/ic/tulip.c				1.116,1.119
sys/dev/ic/tulipvar.h				1.48

	Add a missing DELAY() in the initial GPIO setup for the 21140.
	For the 21142/21143 internal Nway, only advertise/resolve media for
	which we have SROM blocks.  Fixes panic on DEC PWS, which only has
	built-in 10BaseT media.
	[thorpej, ticket #845]

sys/dev/ic/mlx.c				1.18-1.19, 1.21
sys/dev/ic/mlxreg.h				1.4
sys/dev/ic/mlxio.h				1.2-1.3
sys/dev/ic/ld_mlx.c				1.4
sys/dev/ic/mlxvar.h				1.6-1.7
sys/dev/pci/mlx_pci.c				1.7-1.8
sys/dev/eisa/mlx_eisa.c 			1.7-1.8

	Improve stability of the mlx driver.
	 o Better handling of old firmware
	 o Use correct mailbox length, fixes PR#14266
	[ad, ticket #1128]

usr.sbin/mlxctl/cmds.c				1.6
usr.sbin/mlxctl/config.c			1.2
usr.sbin/mlxctl/extern.h			1.3
usr.sbin/mlxctl/main.c				1.5
usr.sbin/mlxctl/mlxctl.8			1.5

	Improve stability of the mlx driver.
	 o Get some info from kernel, not the board
	 o Don't try to do things the firmware can't handle
	[ad, ticket #1129]

sys/dev/ic/dpt.c				1.37
sys.dev.ic/dptreg.h				1.13

	Also save status info in the user command packet.
	[ad, ticket #1130]

usr.bin/pkill/pkill.c				1.5

	Add missing ``-u euid'' option to optstring.  Fixes PR#18827.
	[ad, ticket #1131]

sys/nfs/nfs_node.c				patch

	Apply a stopgap fix preventing a panic for non-NQNFS when
	nfs_reclaim is called on a vnode of an unmounted NFS file
	system.
	[christos, ticket #1171]

sys/dev/pci/if_wi_pci.c				1.21,1.23 (via patch)

	Support the so-called ``PLX'' bridge for wi(4).
	[grant, ticket #1281]

lib/libc/gen/getcwd.c				1.29

	fix off-by-one error in realpath()
	[itojun, ticket #1394]

sys/dev/ic/dpt.c				1.38

	Fix printf format warnings in previous.
	[jmc, ticket #1403]

build.sh					1.113 (via patch)
distrib/cats/instkernel/Makefile		patch
distrib/shark/instkernel/instkernel/Makefile	patch
distrib/walnut/md-kernel/Makefile		patch
sys/arch/cats/conf/Makefile.cats.inc		patch
sys/arch/walnut/conf/Makefile.walnut.inc	patch
tools/host-mkdep/Makefile			1.8 (via patch)

	Fix 2 remaining places items are depending on execute permissions
	coming out from a cvs checkout on scripts.
	[jmc, ticket #1404]

usr.sbin/sup/source/supcmeat.c			1.28
usr.sbin/sup/source/supfilesrv.c		1.26

	Debian bug id "sup 1.8-8, bug #175327" - temporary file symlink race
	[itojun, ticket #1391]

sys/arch/i386/include/param.h			1.55 (via patch)

	Allow redefiniton of KERNBASE.  Because the type of this constant is
	different for locore.S and the rest of the kernel, if you redefine
	it from the default value, you must also define KERNBASE_LOCORE -- this
	is ugly, but so is having the same constant with two different types
	depending where in the kernel it's used...
	[tls, ticket #1387]

sys/arch/i386/i386/pmap.c			1.144

	Fix a sign extension bug that caused pmap_growkernel() to fail with
	>2GB KVA.
	Symptom observed and verified fixed by tls.
	[tls, ticket #1388]

dist/ipf/fils.c					1.22

	Fix IPv6 accounting (PR#18839 by FUKAUMI Naoki).
	[martti, ticket #1410]

sys/netinet/ip_fil.c				1.94

	Fix return-rst for IPv6 (PR#22157 by Peter Postma).
	[martti, ticket #1411]

sys/dev/pci/pci.c				1.81
sys/dev/pci/pci_quirks.c			1.3
sys/dev/pci/pcivar.h				1.59

	- check HDRTYPE early, and ignore if it is not supported (n > 2).
	- defer access to interrupt configuration register, as its existence
	  depends on HDRTYPE.
	- add "skip particular funtion in multifunction device" functionality
	  to quirk table.
	- add GEODE/NS SC1100 quirk (now boots on soekris Net4801).
	[itojun, ticket #1412]

sys/dev/pci/if_sip.c				1.79
sys/dev/pci/if_sipreg.h				1.12

	Accept 1518-byte frames (needed for vlan).  Valtteri Vuorikoski
	[itojun, ticket #1413]

sys/dev/pci/pcidevs				1.563-1.564
sys/dev/pci/pcidevs.h				regenerate
sys/dev/pci/pcidevs_data.h			regenerate

	Add National Semiconductors SC1100 (GEODE) PCI devices.
	[itojun, ticket #1414]

sys/dev/microcode/siop/esiop.ss			1.15
sys/dev/microcode/siop/esiop.out		regenerate

	Properly handle messages that we get at reconnect time (other than
	SIMPLE_Q_TAG). Some drives start sync/wide negotiation at reconnect
	time. Problem reported and fix tested by Andreas Wrede.
	[bouyer, ticket #1399]

sys/dev/pci/if_fxp_pci.c			1.34 (via patch)

	Add support for another Intel Pro/100 variant. From Quentin Garnier in
	private mail.
	[bouyer, ticket #1368]

sys/dev/ata/wd.c				1.256

	Don't use LBA48 if we don't have to (that is, if the request is inside
	the first 128GB). Tested by Andreas Johansson.
	[bouyer, ticket #1370]

sys/dev/pci/pciide.c				1.193 (via patch)

	Add support for ICH5, from Quentin Garnier in private mail.
	[bouyer, ticket #1367]

sys/dev/pci/pciide.c				1.194
sys/dev/pci/pciide_pdc202xx_reg.h		1.10

	Correct setup of General Purpose Register for PDC20265 (Ultra/100) and
	newer. From Andreas Johansson in private mail.
	[bouyer, ticket #1369]

distrib/notes/i386/hardware			1.112 (via patch)
share/man/man4/pciide.4				1.49 (via patch)

	Note ICH5 support.
	[bouyer, ticket #1371]

sys/arch/i386/i386/machdep.c			1.529

	Fix stack location for VM86 processes in the !sigaltstack case.
	I doubt it makes much sense to use the VM's stack for this, but the
	old code was doubtless wrong because it potentially overwrote random
	user memory.
	(It might be a good idea to use the process' pre-vm86()-call stack,
	but atm the infrastructure for this is missing.)
	[drochner, ticket #1415]

sys/arch/sparc/sparc/pmap.c			1.259 (via patch)

	Make sure to flush any user register windows when stealing PMEGs in
	me_alloc() (and SMEGs in region_alloc()). Should fix PR#14180.
	[pk, ticket #1362]

lib/libc/sys/mmap.2				1.32
sys/sys/mman.h					1.32
sys/uvm/uvm_mmap.c				1.72

	PR/21948: Todd Vierling: Implement MAP_TRYFIXED for linux emulation.
	[tv, ticket #1420]

sys/compat/linux/common/linux_ioctl.c		1.33

	PR/21936: Todd Vierling: compat/linux: ioctl 'r' misinterpreted
	[tv, ticket #1421]

sys/compat/ossaudio/ossaudio.c			1.43

	Fix missing call to FILE_UNUSE.  From kern/21946, from Todd Vierling.
	[tv, ticket #1422]

sys/kern/exec_conf.c				1.80
sys/kern/exec_script.c				1.33
sys/sys/exec_script.h				1.8
sys/sys/param.h					1.163

	grow #! line length -- patch from cgd, fixes PR kern/20112 from
	Todd Vierling
	[tv, tickets #1423, #1424]

share/man/man5/dir.5				1.10-1.16

	Bring up to date with getdents(2) reality.
	s/file format/format/
	Nit.
	Don't back-reference getdirentries(3).
	And make that getdents(_2_).
	Remove duplicate defines.
	Use
	.In header.h
	instead of
	.Fd #include \*[Lt]header.h\*[Gt]
	Much easier to read and write, and supported by groff for ages.
	Okayed by ross.
	[wiz, ticket #1372]

distrib/utils/sysinst/run.c			patch

	Stop sysinst from dumping core randomly. This fixes PR install/17223.
	[dsl, ticket #1393]

gnu/dist/postfix/src/trivial-rewrite/resolve.c	patch

	Fix remote DoS vulnerability described in CAN-2003-0540.
	[taca, ticket #1396]

sys/dev/pci/ahc_pci.c				1.43 (via patch)

	Make ahc(4) to recognize Adaptec 2915LP Ultra160 SCSI adapter.
	[taca, ticket #1430]

sys/kern/kern_sysctl.c				1.142 (via patch)

	make proc.curproc.* check more strict.  atatat
	[itojun, ticket #1435]

sys/netinet6/esp_core.c				1.30
sys/netkey/key.c				1.83

	Clear scheduled key before freeing, for safety.
	[itojun, ticket #1383]

sys/netkey/key.c				1.84

	Clear enc/auth key before freeing for safety.
	[itojun, ticket #1384]

distrib/utils/sysinst/target.c			1.40

	Fix realpath vuln, just like SA2003-011.
	[itojun, ticket #1400]

sys/dev/ic/aic7xxx.c				1.103 (via patch)
sys/miscfs/genfs/genfs_vnops.c			1.76
sys/ufs/ufs/ufs_bmap.c				1.22
sys/uvm/uvm_io.c				1.18
sys/uvm/uvm_pager.c				1.60
sys/uvm/uvm_pdaemon.c				1.51

	Correct use of MAXBSIZE where MAXPHYS was intended. This is a necessary
	first step towards per-device MAXPHYS, and has the beneficial side
	effect of allowing clustering to MAXPHYS even on systems that need to
	run with a reduced MAXBSIZE to get more metadata buffers.
	[tls, ticket #1434]

sys/kern/kern_sysctl.c				1.143 (via patch)

	Use pfind() in proc_sysctl() to find the target process instead of a
	home-grown routine.  Remove defcorenamelen, since it's not used
	anywhere.
	[atatat, ticket #1437]

sys/net/if_pppoe.c				1.45

	When trying to (re-)establish a session cope with intermediate output
	failures of the underlying ethernet interface - just keep trying.
	[martin, ticket #1438]

crypto/dist/kame/racoon/crypto_openssl.c	1.10 (via patch)

	xx_keylen has to return bits, not bytes.  KAME-PR-488
	[itojun, ticket #1439]

sys/kern/kern_sysctl.c				1.141

	Avoid oldlenp mixup (in-kernel pointer and userland pointer).
	[itojun, ticket #1441]

etc/rc.d/ipnat					1.10

	ipnat needs to be before SERVERS - one may need NAT for servers to work
	(eg, ntpdate).
	[martti, ticket #1442]

distrib/notes/sparc/whatis			1.15

	pk posted that a longstanding MMU problem with sun4c systems has been
	fixed. Benefits primarily stability and SS1, SS1+, and IPC system
	speed.
	[mbw, ticket #1377]

bin/df/df.c					1.48

	Bump ifree/iused field width.
	[simonb, ticket #1378]

sys/arch/alpha/conf/GENERIC			1.214

	Add options QUOTA; pointed out by Mattias Karlsson
	also move options NFSSERVER after options SOFTDEP
	[keihan, ticket #1385]

usr.sbin/mailwrapper/mailer.conf.5		1.10-1.12
usr.sbin/mailwrapper/mailwrapper.c		1.7

	Actually make additional arguments in mailer.conf useful, and document
	them. Reviewed by perry and wiz.
	[is, ticket #1390]

gnu/usr.bin/gzip/gzexe				1.3
gnu/usr.bin/gzip/znew				1.4

	PR/21819: Jeremy Reed: znew and gzexe create/use unsafe tmp files.
	Replaced with the FreeBSD current version.
	[christos, ticket #1392]

sys/netinet6/in6_ifattach.c			1.55 (via patch)
sys/netinet6/ip6_mroute.c			1.50 (via patch)
sys/netinet6/ip6_mroute.h			1.9

	On interface detach, clear multicast forwarding table.  from kame
	[itojun, ticket #1375]

sys/netinet/tcp_output.c			1.80
sys/netinet/tcp_subr.c				1.128
sys/netinet/tcp_timer.c				1.58
sys/netinet/tcp_var.h				1.91
usr.bin/netstat/inet.c				1.52

	Path MTU discovery blackhole detection. PR 12790
	[tls, ticket #1445]

crypto/dist/kame/racoon/missing/crypto/sha2/sha2.c 1.5

	bzero() 2nd arg mistake.  found by openbsd guys.  from kame
	[itojun, ticket #1446]

usr.sbin/ypbind/ypbind.c			1.48

	width needs to be updated before each loop, because svc_maxfd may have
	changed.
	[bouyer, ticket #1449]

libexec/ld.elf_so/rtld.c			1.54 (via patch)
libexec/ld.elf_so/rtld.h			1.40
libexec/ld.elf_so/symbol.c			1.16 (via patch)

	Remove all of the `mark' code. This is responsible for the `undefined
	PLT symbol' errors, probably because the increment gets interrupted
	occasionally by a signal. In general, _rtld_bind() should not modify
	ANY internal state.
	[dmcmahill, ticket #1395]

sys/netinet6/ah_input.c				1.41
sys/netinet6/esp_input.c			1.33

	m_cat may free mbuf on 2nd arg, so m_pkthdr manipulation has to happen
	before m_cat call.  from Julian Coleman via kame.
	[itojun, ticket #1401]

usr.sbin/cron/crontab.c				1.19

	In "crontab -l", suppress the header lines, just as "crontab -e" does.
	OK'd by Christos Zoulas and Paul Vixie.
	Fixes PR 21705.
	[hubertf, ticket #1450]

src/sys/arch/i386/i386/procfs_machdep.c:	patch
src/sys/arch/i386/include/cpu.h:		patch

	Make output of CPU features look nicer on new Pentium IV CPUs.
	[drochner, ticket #1344]

