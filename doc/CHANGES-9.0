# $NetBSD: CHANGES-9.0,v 1.1.2.7 2019/08/06 16:24:59 martin Exp $

A complete list of changes from the initial NetBSD 9.0 branch on 2019-07-30
until the 9.0 release:

doc/CHANGES-9.0                                 patched by hand
doc/LAST_MINUTE                                 patched by hand
doc/README.files                                patched by hand
external/gpl2/groff/tmac/mdoc.local             patched by hand
sys/sys/param.h                                 patched by hand

	Welcome to 9.0_BETA!

distrib/utils/libhack/multibyte.c		1.9

	Avoid using an uninitialized variable.
	[martin, ticket #2]

usr.sbin/sysinst/disks.c			1.45
usr.sbin/sysinst/label.c			1.11
usr.sbin/sysinst/target.c			1.9

	Do not strip the trailing / on root mounts when evaluation
	"last mounted on". Fix some /dev/ and raw vs. block device confusion
	on system upgrades.
	[martin, ticket #4]

usr.sbin/sysinst/bsddisklabel.c			1.24-1.25

	PR 54423: Fix handling of user defined partitions. Complete
	initialization of install info for user defined partitions.
	[martin, ticket #5]

usr.sbin/sysinst/bsddisklabel.c			1.26

	If we can not fit a planned partition, retry with a bit more slope
	in size.
	[martin, ticket #6]

sys/arch/arm/acpi/acpi_machdep.c		1.7,1.8
sys/stand/efiboot/efiacpi.c			1.4
sys/stand/efiboot/efifdt.c			1.18
sys/stand/efiboot/version			1.12

	Add full UEFI memory map to the /chosen node.
	acpi_md_OsMapMemory can be used for both normal and device memory.
	Use the UEFI memory map to determine how to map a given region.
	[jmcneill, ticket #3]

sys/net/raw_usrreq.c				1.63,1.64

	PR kern/54419: fix typos (s/m_free/m_freem/).
	[ozaki-r, ticket #7]

external/gpl3/gcc/dist/libstdc++-v3/acinclude.m4 1.7
external/gpl3/gcc/dist/libstdc++-v3/config/locale/generic/time_members.cc 1.2
external/gpl3/gcc/dist/libstdc++-v3/configure	1.12
external/gpl3/gcc/dist/libstdc++-v3/include/bits/locale_facets_nonio.h 1.2
external/gpl3/gcc/dist/libstdc++-v3/src/c++11/ctype.cc 1.2
external/gpl3/gcc/lib/libiberty/defs.mk		1.22
external/gpl3/gcc/lib/libstdc++-v3/Makefile	1.48
external/gpl3/gcc/lib/libstdc++-v3/arch/aarch64/defs.mk 1.8
external/gpl3/gcc/lib/libstdc++-v3/arch/aarch64/gstdint.h 1.5
external/gpl3/gcc/lib/libstdc++-v3/arch/alpha/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/arm/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/armeb/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earm/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earmeb/defs.mk 1.12
external/gpl3/gcc/lib/libstdc++-v3/arch/earmhf/defs.mk 1.13
external/gpl3/gcc/lib/libstdc++-v3/arch/earmhfeb/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earmv4/defs.mk 1.12
external/gpl3/gcc/lib/libstdc++-v3/arch/earmv4eb/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earmv6/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earmv6eb/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earmv6hf/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earmv6hfeb/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earmv7/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earmv7eb/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earmv7hf/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/earmv7hfeb/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/hppa/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/i386/defs.mk 1.15
external/gpl3/gcc/lib/libstdc++-v3/arch/ia64/c++config.h 1.13
external/gpl3/gcc/lib/libstdc++-v3/arch/ia64/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/ia64/symver-config.h 1.2
external/gpl3/gcc/lib/libstdc++-v3/arch/m68000/defs.mk 1.13
external/gpl3/gcc/lib/libstdc++-v3/arch/m68k/defs.mk 1.12
external/gpl3/gcc/lib/libstdc++-v3/arch/mips64eb/defs.mk 1.12
external/gpl3/gcc/lib/libstdc++-v3/arch/mips64el/defs.mk 1.12
external/gpl3/gcc/lib/libstdc++-v3/arch/mipseb/defs.mk 1.12
external/gpl3/gcc/lib/libstdc++-v3/arch/mipsel/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/powerpc/defs.mk 1.13
external/gpl3/gcc/lib/libstdc++-v3/arch/riscv32/c++config.h 1.8
external/gpl3/gcc/lib/libstdc++-v3/arch/riscv32/defs.mk 1.6
external/gpl3/gcc/lib/libstdc++-v3/arch/riscv32/symver-config.h 1.3
external/gpl3/gcc/lib/libstdc++-v3/arch/riscv64/c++config.h 1.8
external/gpl3/gcc/lib/libstdc++-v3/arch/riscv64/defs.mk 1.5
external/gpl3/gcc/lib/libstdc++-v3/arch/sh3eb/defs.mk 1.13
external/gpl3/gcc/lib/libstdc++-v3/arch/sh3el/defs.mk 1.11
external/gpl3/gcc/lib/libstdc++-v3/arch/sparc/defs.mk 1.13
external/gpl3/gcc/lib/libstdc++-v3/arch/sparc64/defs.mk 1.12
external/gpl3/gcc/lib/libstdc++-v3/arch/vax/defs.mk 1.13
external/gpl3/gcc/lib/libstdc++-v3/arch/x86_64/defs.mk 1.15
external/gpl3/gcc/usr.bin/gcc/arch/aarch64/defs.mk 1.5
external/gpl3/gcc/usr.bin/gcc/arch/aarch64/tm.h	1.3
external/gpl3/gcc/usr.bin/gcc/arch/alpha/defs.mk 1.15
external/gpl3/gcc/usr.bin/gcc/arch/alpha/tm.h	1.5
external/gpl3/gcc/usr.bin/gcc/arch/arm/auto-host.h 1.14
external/gpl3/gcc/usr.bin/gcc/arch/arm/defs.mk	1.18
external/gpl3/gcc/usr.bin/gcc/arch/arm/tm.h	1.9
external/gpl3/gcc/usr.bin/gcc/arch/armeb/auto-host.h 1.17
external/gpl3/gcc/usr.bin/gcc/arch/armeb/defs.mk 1.18
external/gpl3/gcc/usr.bin/gcc/arch/armeb/tm.h	1.10
external/gpl3/gcc/usr.bin/gcc/arch/earm/auto-host.h 1.16
external/gpl3/gcc/usr.bin/gcc/arch/earm/defs.mk	1.17
external/gpl3/gcc/usr.bin/gcc/arch/earm/tm.h	1.8
external/gpl3/gcc/usr.bin/gcc/arch/earmeb/auto-host.h 1.14
external/gpl3/gcc/usr.bin/gcc/arch/earmeb/defs.mk 1.15
external/gpl3/gcc/usr.bin/gcc/arch/earmeb/tm.h	1.8
external/gpl3/gcc/usr.bin/gcc/arch/earmhf/auto-host.h 1.15
external/gpl3/gcc/usr.bin/gcc/arch/earmhf/defs.mk 1.16
external/gpl3/gcc/usr.bin/gcc/arch/earmhf/tm.h	1.8
external/gpl3/gcc/usr.bin/gcc/arch/earmhfeb/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmhfeb/defs.mk 1.14
external/gpl3/gcc/usr.bin/gcc/arch/earmhfeb/tm.h 1.8
external/gpl3/gcc/usr.bin/gcc/arch/earmv4/auto-host.h 1.12
external/gpl3/gcc/usr.bin/gcc/arch/earmv4/defs.mk 1.14
external/gpl3/gcc/usr.bin/gcc/arch/earmv4/tm.h	1.6
external/gpl3/gcc/usr.bin/gcc/arch/earmv4eb/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv4eb/defs.mk 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv4eb/tm.h 1.6
external/gpl3/gcc/usr.bin/gcc/arch/earmv6/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv6/defs.mk 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv6/tm.h	1.6
external/gpl3/gcc/usr.bin/gcc/arch/earmv6eb/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv6eb/defs.mk 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv6eb/tm.h 1.6
external/gpl3/gcc/usr.bin/gcc/arch/earmv6hf/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv6hf/defs.mk 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv6hf/tm.h 1.6
external/gpl3/gcc/usr.bin/gcc/arch/earmv6hfeb/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv6hfeb/defs.mk 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv6hfeb/tm.h 1.6
external/gpl3/gcc/usr.bin/gcc/arch/earmv7/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv7/defs.mk 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv7/tm.h	1.6
external/gpl3/gcc/usr.bin/gcc/arch/earmv7eb/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv7eb/defs.mk 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv7eb/tm.h 1.6
external/gpl3/gcc/usr.bin/gcc/arch/earmv7hf/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv7hf/defs.mk 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv7hf/tm.h 1.6
external/gpl3/gcc/usr.bin/gcc/arch/earmv7hfeb/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv7hfeb/defs.mk 1.13
external/gpl3/gcc/usr.bin/gcc/arch/earmv7hfeb/tm.h 1.6
external/gpl3/gcc/usr.bin/gcc/arch/hppa/defs.mk	1.16
external/gpl3/gcc/usr.bin/gcc/arch/hppa/tm.h	1.7
external/gpl3/gcc/usr.bin/gcc/arch/i386/auto-host.h 1.15
external/gpl3/gcc/usr.bin/gcc/arch/i386/defs.mk	1.17
external/gpl3/gcc/usr.bin/gcc/arch/i386/tm.h	1.5
external/gpl3/gcc/usr.bin/gcc/arch/ia64/defs.mk	1.9
external/gpl3/gcc/usr.bin/gcc/arch/ia64/tm.h	1.5
external/gpl3/gcc/usr.bin/gcc/arch/m68000/defs.mk 1.15
external/gpl3/gcc/usr.bin/gcc/arch/m68000/tm.h	1.6
external/gpl3/gcc/usr.bin/gcc/arch/m68k/defs.mk	1.17
external/gpl3/gcc/usr.bin/gcc/arch/m68k/tm.h	1.7
external/gpl3/gcc/usr.bin/gcc/arch/mips64eb/defs.mk 1.16
external/gpl3/gcc/usr.bin/gcc/arch/mips64eb/tm.h 1.6
external/gpl3/gcc/usr.bin/gcc/arch/mips64el/defs.mk 1.16
external/gpl3/gcc/usr.bin/gcc/arch/mips64el/tm.h 1.6
external/gpl3/gcc/usr.bin/gcc/arch/mipseb/defs.mk 1.17
external/gpl3/gcc/usr.bin/gcc/arch/mipseb/tm.h	1.6
external/gpl3/gcc/usr.bin/gcc/arch/mipsel/defs.mk 1.17
external/gpl3/gcc/usr.bin/gcc/arch/mipsel/tm.h	1.6
external/gpl3/gcc/usr.bin/gcc/arch/powerpc/auto-host.h 1.13
external/gpl3/gcc/usr.bin/gcc/arch/powerpc/defs.mk 1.19
external/gpl3/gcc/usr.bin/gcc/arch/powerpc/tm.h	1.8
external/gpl3/gcc/usr.bin/gcc/arch/riscv64/multilib.h 1.3
external/gpl3/gcc/usr.bin/gcc/arch/sh3eb/defs.mk 1.15
external/gpl3/gcc/usr.bin/gcc/arch/sh3eb/tm.h	1.5
external/gpl3/gcc/usr.bin/gcc/arch/sh3el/defs.mk 1.16
external/gpl3/gcc/usr.bin/gcc/arch/sh3el/tm.h	1.5
external/gpl3/gcc/usr.bin/gcc/arch/sparc/auto-host.h 1.14
external/gpl3/gcc/usr.bin/gcc/arch/sparc/defs.mk 1.16
external/gpl3/gcc/usr.bin/gcc/arch/sparc/tm.h	1.5
external/gpl3/gcc/usr.bin/gcc/arch/sparc64/auto-host.h 1.16
external/gpl3/gcc/usr.bin/gcc/arch/sparc64/defs.mk 1.16
external/gpl3/gcc/usr.bin/gcc/arch/sparc64/tm.h	1.6
external/gpl3/gcc/usr.bin/gcc/arch/vax/defs.mk	1.17
external/gpl3/gcc/usr.bin/gcc/arch/vax/tm.h	1.6
external/gpl3/gcc/usr.bin/gcc/arch/x86_64/auto-host.h 1.18
external/gpl3/gcc/usr.bin/gcc/arch/x86_64/defs.mk 1.19
external/gpl3/gcc/usr.bin/gcc/arch/x86_64/tm.h	1.6

	Use the dragonfly locale code for NetBSD too.
	Regen mknative for everyone after:
	- NETBSD_ENABLE_PTHREADS removed (default always)
	- HAVE_GNU_INDIRECT_FUNCTION enabled for some platforms
	- switch to dragondfly bsd locale routines
	[christos, ticket #9]

external/historical/nawk/dist/FIXES		1.2
external/historical/nawk/dist/awk.1		1.2
external/historical/nawk/dist/awk.h		1.3
external/historical/nawk/dist/b.c		1.7
external/historical/nawk/dist/b.c		1.8
external/historical/nawk/dist/lex.c		1.5
external/historical/nawk/dist/lib.c		1.9
external/historical/nawk/dist/main.c		1.9
external/historical/nawk/dist/proto.h		1.8
external/historical/nawk/dist/proto.h		1.9
external/historical/nawk/dist/run.c		1.10
external/historical/nawk/dist/tran.c		1.10
external/historical/nawk/dist/tran.c		1.9
external/historical/nawk/dist/ytab.c		1.2

	PR/54424: awk: broken character classes in UTF-8 locale:
	only the first matches
	Pick up some of the fixes from upstream:
        - posix paren matching
        - print \v \a
        - some more fatal handling
        - init all the character range.
	Add translators for \v and \a per posix.
	[christos, ticket #11]

sys/arch/i386/stand/efiboot/version		1.2

	x86 efiboot: version 1.1.
	[nonaka, ticket #12]

external/bsd/cron/dist/do_command.c		1.14

	PR/54433: empty $MAILTO causes cron to crash.
	[christos, ticket #13]

sys/arch/arm/acpi/acpi_platform.c		1.16

	Ignore AccessWidth (PL011 and SBSA console always needs 32-bit access).
	[jmcneill, ticket #17]

sys/arch/arm/pci/pci_msi_machdep.c		1.7

	Properly honour max_type arg to pci_intr_alloc.
	[jmcneill, ticket #18]

usr.sbin/sysinst/gpt.c				1.7

	Deal with missing labels when parsing gpt(8) output.
	[martin, ticket #8]

usr.sbin/sysinst/disks.c			1.46

	Properly handle partitions that we were requested to mount but not
	newfs.
	[martin, ticket #14]

usr.sbin/sysinst/gpt.c				1.8

	When reading an existing gpt, match the wedges already existing 
	on the parent device, so we can use them directly if we should proceed
	with an unmodified partition table.
	[martin, ticket #15]

usr.sbin/sysinst/label.c			1.12

	When we find a FFSv1 filesystem, properly record it that way - so the
	correct bootblocks get installed on system upgrades.
	[martin, ticket #16]

sys/arch/amd64/amd64/process_machdep.c		1.44

	Do not dereference user pointer in ptrace_machdep_dorequest()/amd64,
	always use copyin(9) for reading user memory.
	This fixes SMAP crash on some amd64 machines.
	[kamil, ticket #19]

sys/kern/kern_proc.c				1.234

	Update our vm resource use for sysctl(3) call reading kinfo_proc*.
	Without this change RSS properties are zeroed unless a process exits
	or calls getrusage(2).
	[kamil, ticket #20]

sys/arch/i386/i386/process_machdep.c		1.94

	Do not dereference user pointer in ptrace_machdep_dorequest()/i386,
	always use copyin(9) for reading user memory.
	[kamil, ticket #21]

sys/sys/event.h					1.33

	Make EV_SET() casts compatible with the C++ code.
	[kamil, ticket #22]


