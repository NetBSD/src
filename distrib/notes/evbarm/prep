.\"	$NetBSD: prep,v 1.3 2002/03/29 03:29:10 thorpej Exp $
.\"
.\" Copyright (c) 2001, 2002 The NetBSD Foundation, Inc.     
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"        This product includes software developed by the NetBSD
.\"        Foundation, Inc. and its contributors.
.\" 4. Neither the name of The NetBSD Foundation nor the names of its
.\"    contributors may be used to endorse or promote products derived
.\"    from this software without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE NETBSD FOUNDATION, INC. AND CONTRIBUTORS
.\" ``AS IS'' AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED
.\" TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
.\" PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE FOUNDATION OR CONTRIBUTORS
.\" BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
.\" CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
.\" SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
.\" INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
.\" CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
.\" ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
.\" POSSIBILITY OF SUCH DAMAGE.
.\"
.
First and foremost, before beginning the installation process,
.Em make sure you have a reliable backup
of any data on the target system that you wish to keep.  Mistakes in
e.g. partitioning your hard disk may lead to data loss.
.
.Ss2 Preparation for the Intel IQ80310
The IQ80310 uses RedBoot firmware from Red Hat, Inc.  RedBoot
supports loading the kernel via the serial port and the on-board
Ethernet.  These notes assume that the Ethernet will be used to
load the kernel.  RedBoot uses the Trivial File Transfer Protocol
(TFTP) to load the kernel via the network.
.Pp
These notes also assume that the IQ80310 will be run as a diskless
system; that an NFS server will provide the root file system.  The
.Nx
kernel uses the Dynamic Host Configuration Protocol (DHCP) to
obtain network address and root file system information.
.Pp
The first step is to configure your DHCP, NFS, and TFTP server
software.  You will need the MAC address for the on-board Ethernet,
which RedBoot can provide; see the RedBoot documentation for more
information.
.Pp
The next step is to configure RedBoot to obtain its IP address from
your DHCP server; see the RedBoot documentation for more information.
.Pp
Once your DHCP server and RedBoot are properly configured, you should
see information similar to the following when the IQ80310 is reset
or powered-up:
.Bd -literal
RedBoot(tm) debug environment - built 17:16:14, Feb 12 2001
Platform: IQ80310 (XScale) 
Copyright (C) 2000, Red Hat, Inc.

RAM: 0xa0000000-0xa2000000
FLASH: 0x00000000 - 0x00800000, 64 blocks of 0x00020000 bytes each.
IP: 192.168.0.10, Default server: 192.168.0.1
RedBoot\*>
.Ed
.Ss2 Preparation for the Intel IQ80321
The IQ80321 uses RedBoot firmware from Red Hat, Inc.  RedBoot
supports loading the kernel via the serial port and the on-board
Ethernet.  These notes assume that the Ethernet will be used to
load the kernel.  RedBoot uses the Trivial File Transfer Protocol
(TFTP) to load the kernel via the network.
.Pp
These notes also assume that the IQ80321 will be run as a diskless
system; that an NFS server will provide the root file system.  The
.Nx
kernel uses the Dynamic Host Configuration Protocol (DHCP) to
obtain network address and root file system information.
.Pp
The first step is to configure your DHCP, NFS, and TFTP server
software.  You will need the MAC address for the on-board Ethernet,
which RedBoot can provide; see the RedBoot documentation for more
information.
.Pp
The next step is to configure RedBoot to obtain its IP address from
your DHCP server; see the RedBoot documentation for more information.
.Pp
Once your DHCP server and RedBoot are properly configured, you should
see information similar to the following when the IQ80321 is reset
or powered-up:
.Bd -literal
Ethernet eth0: MAC address 00:07:e9:03:38:40
IP: 208.176.2.165, Default server: 208.176.2.166

RedBoot(tm) bootstrap and debug environment [ROM]
Non-certified release, version UNKNOWN - built 11:21:56, Feb  1 2002

Platform: IQ80321 (XScale) 
Copyright (C) 2000, 2001, 2002, Red Hat, Inc.

RAM: 0x00000000-0x08000000, 0x00017008-0x01ddd000 available
FLASH: 0xf0000000 - 0xf0800000, 64 blocks of 0x00020000 bytes each.
RedBoot\*> 
.Ed
