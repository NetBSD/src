.\" Copyright (C) 2004 International Business Machines Corporation
.\" Written by Megan Schneider based on the Trusted Computing Group Software Stack Specification Version 1.1 Golden
.\"
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "Tspi_Key_ConvertMigrationBlob" 3 "2004-05-25" "TSS 1.1"
.ce 1
TCG Software Stack Developer's Reference
.SH NAME
Tspi_Key_ConvertMigrationBlob \- create a wrapped key from a migration blob
.SH "SYNOPSIS"
.ad l
.hy 0
.nf
.B #include <tss/platform.h>
.B #include <tss/tcpa_defines.h>
.B #include <tss/tcpa_typedef.h>
.B #include <tss/tcpa_struct.h>
.B #include <tss/tss_typedef.h>
.B #include <tss/tss_structs.h>
.B #include <tss/tspi.h>
.sp
.BI "TSS_RESULT Tspi_Key_ConvertMigrationBlob(TSS_HKEY " hKeyToMigrate ",         TSS_HKEY " hParentKey ","
.BI "                                         UINT32   " ulRandomLength ",        BYTE*    " rgbRandom ","
.BI "                                         UINT32   " ulMigrationBlobLength ", BYTE*    " rgbMigrationBlob ");"
.fi
.sp
.ad
.hy

.SH "DESCRIPTION"
.PP
\fBTspi_Key_ConvertMigrationBlob\fR takes the
migration blob built by \fBTspi_Key_CreateMigrationBlob\fR using the
migration scheme TSS_MS_MIGRATE and creates a normal wrapped key. The
resulting normal wrapped key blob is stored in the instance associated
with hKeyToMigrate and may be retrieved from that instance by
\fBTspi_GetAttribData\fR.

.SH "PARAMETERS"
.PP
.SS hKeyToMigrate
The handle of the key object to convert.
.SS hParentKey
Handle to the parent key related to the key addressed by \fIhKeyToMigrate\fR.
.SS ulRandomLength
Length of random data provided at the parameter \fIrgbRandom\fR.
.SS rgbRandom
Random data as returned together with the migration blob by the
method \fBTspi_Key_CreateMigrationBlob\fR.
.SS ulMigrationBlobLength
Length of the migration blob data provided at the parameter \fIrgbMigrationBlob\fR.
.SS rgbMigrationBlob
Migration blob data as returned by a previously called method
\fBTspi_Key_CreateMigrationBlob\fR.

.SH "RETURN CODES"
.PP
\fBTspi_Key_ConvertMigrationBlob\fR returns TSS_SUCCESS on success,
otherwise one of the following values is returned:
.TP
.SM TSS_E_INVALID_HANDLE
\fIhKeyToMigrate\fR or \fIhParentKey\fR is not a valid handle.

.TP
.SM TSS_E_INTERNAL_ERROR
An internal SW error has been detected.

.TP
.SM TSS_E_BAD_PARAMETER
One or more parameters is bad.

.SH "CONFORMING TO"

.PP
\fBTspi_Key_ConvertMigrationBlob\fR conforms to the Trusted Computing
Group Software Specification version 1.1 Golden

.SH "SEE ALSO"

.PP
\fBTspi_Key_LoadKey\fR(3), \fBTspi_Key_UnloadKey\fR(3),
\fBTspi_Key_CertifyKey\fR(3), \fBTspi_Key_CreateMigrationBlob\fR(3).

