.\" Copyright (C) 2004 International Business Machines Corporation
.\" Written by Megan Schneider based on the Trusted Computing Group Software Stack Specification Version 1.1 Golden
.\"
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "Tspi_TPM_LoadMaintenancePubKey" 3 "2004-05-26" "TSS 1.1"
.ce 1
TCG Software Stack Developer's Reference
.SH NAME
Tspi_TPM_LoadMaintenancePubKey\- load the public maintenance key into the TPM
.SH "SYNOPSIS"
.ad l
.hy 0
.nf
.B #include <tss/platform.h>
.B #include <tss/tcpa_defines.h>
.B #include <tss/tcpa_typedef.h>
.B #include <tss/tcpa_struct.h>
.B #include <tss/tss_typedef.h>
.B #include <tss/tss_structs.h>
.B #include <tss/tspi.h>
.sp
.BI "TSS_RESULT Tspi_TPM_LoadMaintenancePubKey(TSS_HTPM        " hTPM ", TSS_HKEY " hMaintenanceKey ","
.BI "                                          TSS_VALIDATION* " pValidationData ");"
.fi
.sp
.ad
.hy

.SH "DESCRIPTION"
.PP
\fBTspi_TPM_LoadMaintenancePubKey\fR
loads the public maintenance key into the TPM. The
maintenance key can only be loaded once; any subsequent calls to
this function will fail. The key information for loading the
maintenance public key must be set in the key object by
Tspi_SetAttribData before this method is called. If
\fIpValidationData\fR is NULL, the TSS service provider proofs the
digest got internally from the TPM. Otherwise, the caller has to
proof the digest by its own.
.SH "PARAMETERS"
.PP
.SS hTPM
Handle of the TPM object
.PP
.SS hMaintenanceKey
Handle of the maintenance key object
.PP
.SS pValidationData
Validation data structure.
[IN] Provide externalData information required to compute the signature.
[OUT] On successful completion of the ocmmand, the structure provides a
buffer containing the validation data and a buffer containing the data
the validation data was computed from.

.SH "RETURN CODES"
.PP
\fBTspi_TPM_LoadMaintenancePubKey\fR returns TSS_SUCCESS on success,
otherwise one of the following values are returned:
.TP
.SM TSS_E_INVALID_HANDLE
\fIhTPM\fR or \fIhMaintenanceKey\fR is not a valid handle.
.TP
.SM TSS_E_INTERNAL_ERROR
An internal SW error has been detected.
.TP
.SM TSS_E_BAD_PARAMETER
One or more of the parameters is incorrect.
.TP
.SM TSS_E_NOTIMPL
The command is not implemented.

.SH "CONFORMING TO"

.PP
\fBTspi_TPM_LoadMaintenancePubKey\fR conforms to the Trusted Computing
Group Software Specification version 1.1 Golden
.SH "SEE ALSO"

.PP
\fBTspi_TPM_CheckMaintenancePubKey\fR(3),
\fBTspi_TPM_KillMaintenanceFeature\fR(3),
\fBTspi_TPM_CreateMaintenanceArchive\fR(3).



