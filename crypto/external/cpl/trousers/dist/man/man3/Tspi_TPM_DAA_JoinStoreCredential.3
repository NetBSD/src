.\" Copyright (C) 2006 International Business Machines Corporation
.\" Written by Anthony Bussani based on the Trusted Computing Group Software Stack Specification Version 1.2
.\"
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "Tspi_TPM_DAA_JoinStoreCredential" 3 "2006-09-04" "TSS 1.2"
.ce 1
TCG Software Stack Developer's Reference
.SH NAME
Tspi_TPM_DAA_JoinStoreCredential \- compute the final DAA Credential
.SH "SYNOPSIS"
.ad l
.hy 0
.nf
.B #include <tss/tss_typedef.h>
.B #include <tss/tss_structs.h>
.B #include <tss/tspi.h>
.sp
.BI "TSS_RESULT Tspi_TPM_DAA_JoinStoreCredential("
.BI "    TSS_HDAA                    " hDAA ","
.BI "    TSS_HTPM                    " hTPM ","
.BI "    TSS_DAA_CRED_ISSUER         " credIssuer ","
.BI "    TSS_DAA_JOIN_SESSION        " joinSession ","
.BI "    TSS_HKEY*                   " hDaaCredential
.BI ");"
.fi
.sp
.ad
.hy

.SH "DESCRIPTION"
.PP
\Tspi_TPM_DAA_JoinStoreCredential\fR
is the last out of 3 functions (after \fBTspi_TPM_DAA_JoinInit()\fR and \fBTspi_TPM_DAA_JoinCreateDaaPubKey()\fR)
 to execute in order to receive a DAA Credential. It verifies the issued credential from the DAA Issuer
and computes the final DAA Credential.
.SH "PARAMETERS"
.PP
.SS hDAA
The \fIhDAA\fR parameter is used to specify the handle of the DAA object.
.SS hTPM
The \fIhTPM\fR parameter is the handle to the TPM object.
.SS credIssuer
The \fIcredIssuer\fR parameter is the DAA Credential issued by the DAA Issuer including proof of correctness.
.SS joinSession
The \fIjoinSession\fR parameter is the structure containing the DAA Join session information.
.SS hDaaCredential
The \fIhDaaCredential\fR parameter is the handle of the received DAA Credential.

.SH "RETURN CODES"
.PP
\fBTspi_TPM_DAA_JoinStoreCredential\fR returns TSS_SUCCESS on success, otherwise one of the
following values is returned:
.TP
.SM TSS_E_INVALID_HANDLE
Either the DAA or the TPM handler is not valid.
.TP
.SM TSS_E_BAD_PARAMETER
.TP
.SM TSS_E_INTERNAL_ERROR
An internal SW error has been detected.
.SM TSS_E_DAA_CREDENTIAL_PROOF_ERROR
One of the verification of the issued credential failed
.SH "CONFORMING TO"
.PP
\fBTspi_TPM_DAA_JoinStoreCredential\fR conforms to the Trusted Computing Group
Software Specification version 1.2

.SH "SEE ALSO"

.PP
\fBTspi_TPM_DAA_JoinInit\fR(3)
\fBTspi_TPM_DAA_JoinCreateDaaPubKey\fR(3)
