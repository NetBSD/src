.\" Copyright (C) 2004 International Business Machines Corporation
.\" Written by Kathy Robertson based on the Trusted Computing Group Software Stack Specification Version 1.1 Golden
.\"
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "Tspi_TPM_AuthorizeMigrationTicket" 3 "2004-05-26" "TSS 1.1" "TCG Software Stack Developer's Reference"
.SH NAME
Tspi_TPM_AuthorizeMigrationTicket\- create the migration ticket required for the migration process.
.SH "SYNOPSIS"
.ad l
.hy 0
.nf
.B #include <tss/platform.h>
.B #include <tss/tcpa_defines.h>
.B #include <tss/tcpa_typedef.h>
.B #include <tss/tcpa_struct.h>
.B #include <tss/tss_typedef.h>
.B #include <tss/tss_structs.h>
.B #include <tss/tspi.h>
.sp
.BI "TSS_RESULT Tspi_TPM_AuthorizeMigrationTicket(TSS_HTPM           " hTPM ",            TSS_HKEY " hMigrationKey ","
.BI "                                             TSS_MIGRATE_SCHEME " migrationScheme ", UINT32*  " pulMigTicketLength ","
.BI "                                             BYTE**             " prgbMigTicket ");"
.fi
.sp
.ad
.hy

.SH "DESCRIPTION"
.PP
\fBTspi_TPM_AuthorizeMigrationTicket\fR is used by the owner to authorize a target public key for migration. This mean sthat when a system is set up, the owner can decide that all archives should be done on a particular server. Then as keys are created, the user can pick one of these servers for the target of the migration of their keys, if they wish. This provides one of the two authorizations necessary to migrate a key.
.SH "PARAMETERS"
.PP
.SS hTPM
Handle of the TPM object
.PP 
.SS hMigrationKey
Handle of the object representing the migration key.
.PP 
.SS migrationScheme
Flag indiating the migration scheme to be used.
.PP
.SS pulMigTicketLength
Recieves the length (in bytes) of the prgbMigTicket parameter.
.PP
.SS prgbMigTicket
Recieves a pointer to thememory block containing the migration ticket blob.
.SH "RETURN CODES"
.PP
\fBTspi_TPM_AuthorizeMigrationTicket\fR returns TSS_SUCCESS on success, otherwise one of the following values are returned:
.TP
.SM TSS_E_INVALID_HANDLE
Either \fBhTPM\fR or \fBhMigrationKey\fR is not a valid handle.
.TP
.SM TSS_E_INTERNAL_ERROR
An error occurred internal to the TSS.

.SH "CONFORMING TO"

.PP
\fBTspi_TPM_AuthorizeMigrationTicket\fR conforms to the Trusted Computing Group Software Specification version 1.1 Golden
.SH "SEE ALSO"

.PP
\fB(none)\fR.



