.\" Copyright (C) 2004 International Business Machines Corporation
.\" Written by Megan Schneider based on the Trusted Computing Group Software Stack Specification Version 1.1 Golden
.\"
.de Sh \" Subsection
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Ip \" List item
.br
.ie \\n(.$>=3 .ne \\$3
.el .ne 3
.IP "\\$1" \\$2
..
.TH "Tspi_TPM_CreateEndorsementKey" 3 "2004-05-25" "TSS 1.1"
.ce 1
TCG Software Stack Developer's Reference
.SH NAME
Tspi_TPM_CreateEndorsementKey \- create the endorsement key
.SH "SYNOPSIS"
.ad l
.hy 0
.nf
.B #include <tss/platform.h>
.B #include <tss/tcpa_defines.h>
.B #include <tss/tcpa_typedef.h>
.B #include <tss/tcpa_struct.h>
.B #include <tss/tss_typedef.h>
.B #include <tss/tss_structs.h>
.B #include <tss/tspi.h>
.sp
.BI "TSS_RESULT Tspi_TPM_CreateEndorsementKey(TSS_HTPM        " hTPM ", TSS_HKEY " hKey ","
.BI "                                         TSS_VALIDATION* " pValidationData ");"
.fi
.sp
.ad
.hy

.SH "DESCRIPTION"
.PP
\fBTspi_TPM_CreateEndorsementKey\fR
creates an endorsement key. \fBThis function is currently not implemented\fR.
Before this method is called, the key information for creating the key
must be set in the key object by \fITspi_SetAttribData\fR. On return,
the public endorsement key can be retrieved by \fITspi_GetAttribData\fR from
the key object.

.SH "PARAMETERS"
.PP
.SS hTPM
The \fIhTPM\fR parameter is used to specify the handle of the TPM object.
.SS hKey
The \fIhKey\fR parameter is the handle of the key specifying the
attributes of the endorsement key to create.
.SS pValidationData
The \fIpValidationData\fR parameter is a validation data structure. It provides
external information required to compute the signature. Once the command is
completed, the structure provides a buffer containing the validation data and
a buffer containing the data the validation data was computed from.

.SH "RETURN CODES"
.PP
\fBTspi_TPM_CreateEndorsementKey\fR returns TSS_SUCCESS on success,
otherwise one of the following values is returned:
.TP
.SM TSS_E_INVALID_HANDLE
\fIhTPM\fR or \fIhKey\fR is not a valid handle.

.TP
.SM TSS_E_INTERNAL_ERROR
An internal SW error has been detected.

.TP
.SM TSS_E_BAD_PARAMETER
One or more parameters is bad.

.SH "CONFORMING TO"

.PP
\fBTspi_TPM_CreateEndorsementKey\fR conforms to the Trusted Computing
Group Software Specification version 1.1 Golden

.SH "SEE ALSO"

.PP
\fBTspi_TPM_GetPubEndorsementKey\fR(3), \fBTspi_Key_GetPubKey\fR(3).

